<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://github.com/lyf110/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html"><meta property="og:site_name" content="lyf blog"><meta property="og:title" content="四、Spring高级49讲-SpringBoot相关"><meta property="og:description" content="1 Boot创建与启动 37 Boot 骨架项目 如果是 linux 环境，用以下命令即可获取 spring boot 的骨架 pom.xml curl -G https://start.spring.io/pom.xml -d dependencies=web,mysql,mybatis -o pom.xml"><meta property="og:type" content="article"><meta property="og:image" content="https://github.com/lyf110/"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-04-04T06:51:15.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="四、Spring高级49讲-SpringBoot相关"><meta property="article:author" content="liu yang fang"><meta property="article:tag" content="ssm"><meta property="article:tag" content="Spring"><meta property="article:tag" content="Spring高级"><meta property="article:tag" content="源码剖析"><meta property="article:published_time" content="2023-04-03T15:51:46.000Z"><meta property="article:modified_time" content="2023-04-04T06:51:15.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"四、Spring高级49讲-SpringBoot相关","image":["https://github.com/lyf110/"],"datePublished":"2023-04-03T15:51:46.000Z","dateModified":"2023-04-04T06:51:15.000Z","author":[{"@type":"Person","name":"liu yang fang","link":"https://github.com/lyf110"}]}</script><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;700&display=swap" rel="stylesheet"><link rel="icon" href="/favicon.ico"><title>四、Spring高级49讲-SpringBoot相关 | lyf blog</title><meta name="description" content="1 Boot创建与启动 37 Boot 骨架项目 如果是 linux 环境，用以下命令即可获取 spring boot 的骨架 pom.xml curl -G https://start.spring.io/pom.xml -d dependencies=web,mysql,mybatis -o pom.xml">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-d27d5514.css" as="style"><link rel="stylesheet" href="/assets/style-d27d5514.css">
    <link rel="modulepreload" href="/assets/app-ce1c9f9d.js"><link rel="modulepreload" href="/assets/framework-7a1bedf3.js"><link rel="modulepreload" href="/assets/04_Spring高级49讲-SpringBoot相关.html-cc486ffd.js"><link rel="modulepreload" href="/assets/04_Spring高级49讲-SpringBoot相关.html-c4b479b5.js"><link rel="prefetch" href="/assets/blog.html-2201ce83.js" as="script"><link rel="prefetch" href="/assets/index.html-8d072788.js" as="script"><link rel="prefetch" href="/assets/tools.html-7a68a8b6.js" as="script"><link rel="prefetch" href="/assets/Nacos源码分析.html-c966ca07.js" as="script"><link rel="prefetch" href="/assets/Sentinel源码分析.html-cb76e968.js" as="script"><link rel="prefetch" href="/assets/微服务常见面试题.html-ce1f705b.js" as="script"><link rel="prefetch" href="/assets/Java基础.html-4d071ff3.js" as="script"><link rel="prefetch" href="/assets/项目场景题收集.html-b126d705.js" as="script"><link rel="prefetch" href="/assets/项目工具类收集.html-374221e5.js" as="script"><link rel="prefetch" href="/assets/Windows杀进程资料.html-50d2cb36.js" as="script"><link rel="prefetch" href="/assets/recursion.html-aaea187f.js" as="script"><link rel="prefetch" href="/assets/Ffmpeg使用说明.html-0afcf120.js" as="script"><link rel="prefetch" href="/assets/Centos7常见问题记录.html-50305cea.js" as="script"><link rel="prefetch" href="/assets/Centos7新机开荒.html-1d547664.js" as="script"><link rel="prefetch" href="/assets/Https加密原理.html-9975080f.js" as="script"><link rel="prefetch" href="/assets/MVCC个人理解.html-d38548e4.js" as="script"><link rel="prefetch" href="/assets/MySQL安装教程.html-bcc88bcd.js" as="script"><link rel="prefetch" href="/assets/数据库死锁.html-bd1ffe92.js" as="script"><link rel="prefetch" href="/assets/集合常用面试题.html-7d8a7a20.js" as="script"><link rel="prefetch" href="/assets/让线程顺序运行的11种方法.html-94ada2cb.js" as="script"><link rel="prefetch" href="/assets/1 怎么解决Java8 stream操作toMap的key重复问题.html-3aaa77a1.js" as="script"><link rel="prefetch" href="/assets/JDK8新特性.html-41c37b1d.js" as="script"><link rel="prefetch" href="/assets/01.Spring的生命周期.html-82b742c3.js" as="script"><link rel="prefetch" href="/assets/02.SpringBoot配置项目支持多数据库.html-99d1c7ec.js" as="script"><link rel="prefetch" href="/assets/Dubbo.html-e3f9ac59.js" as="script"><link rel="prefetch" href="/assets/Elasticsearch（一）.html-517a8d25.js" as="script"><link rel="prefetch" href="/assets/Elasticsearch（二）.html-3864efce.js" as="script"><link rel="prefetch" href="/assets/Lucene入门.html-21dc4d90.js" as="script"><link rel="prefetch" href="/assets/01.Nacos 配置中心.html-c9924931.js" as="script"><link rel="prefetch" href="/assets/02.Nacos 服务发现.html-d70a62ff.js" as="script"><link rel="prefetch" href="/assets/03.Nacos 服务发现源码分析.html-0c3a1085.js" as="script"><link rel="prefetch" href="/assets/04.Nacos 配置中心源码解读.html-aaa71697.js" as="script"><link rel="prefetch" href="/assets/Seata Saga模式.html-69ab419b.js" as="script"><link rel="prefetch" href="/assets/seata的部署和集成.html-03cbaae8.js" as="script"><link rel="prefetch" href="/assets/分布式事务Seata.html-1d95d13a.js" as="script"><link rel="prefetch" href="/assets/微服务保护.html-4e05d279.js" as="script"><link rel="prefetch" href="/assets/SpringCloud实用篇01.html-abc40c0c.js" as="script"><link rel="prefetch" href="/assets/SpringCloud实用篇02.html-1477a9c7.js" as="script"><link rel="prefetch" href="/assets/SpringCloud（一）.html-f3ae588c.js" as="script"><link rel="prefetch" href="/assets/SpringCloud（二）.html-88b3a79c.js" as="script"><link rel="prefetch" href="/assets/index.html-75e12137.js" as="script"><link rel="prefetch" href="/assets/index.html-60bc8b80.js" as="script"><link rel="prefetch" href="/assets/Bootstrap-01.html-a2785680.js" as="script"><link rel="prefetch" href="/assets/Bootstrap-02.html-71d373f7.js" as="script"><link rel="prefetch" href="/assets/jquery3基础.html-f79e962a.js" as="script"><link rel="prefetch" href="/assets/jquery3高级.html-16c8a378.js" as="script"><link rel="prefetch" href="/assets/Vue.html-3a1fcb70.js" as="script"><link rel="prefetch" href="/assets/day01-MyBatis2.0.html-3304763a.js" as="script"><link rel="prefetch" href="/assets/day02-MyBatis2.0.html-b4ee9b29.js" as="script"><link rel="prefetch" href="/assets/day03-MyBatis2.0.html-4b846c80.js" as="script"><link rel="prefetch" href="/assets/Mybatis-Plus入门第一天.html-be8b137a.js" as="script"><link rel="prefetch" href="/assets/Mybatis-Plus入门第二天.html-40502c55.js" as="script"><link rel="prefetch" href="/assets/MyBatisPlus.html-c22e9ab3.js" as="script"><link rel="prefetch" href="/assets/SpringBoot.html-06ec4dd9.js" as="script"><link rel="prefetch" href="/assets/spring5mvc第一天2.0.html-cd8d7b4c.js" as="script"><link rel="prefetch" href="/assets/spring5mvc第三天2.0.html-49d529d9.js" as="script"><link rel="prefetch" href="/assets/spring5mvc第二天2.0.html-06437a70.js" as="script"><link rel="prefetch" href="/assets/Centos7安装Docker.html-c80d0c4a.js" as="script"><link rel="prefetch" href="/assets/Docker-2022-实用篇.html-8e663b09.js" as="script"><link rel="prefetch" href="/assets/docker-linux-安装.html-352c65fc.js" as="script"><link rel="prefetch" href="/assets/docker-v1-01.html-84cf5e4c.js" as="script"><link rel="prefetch" href="/assets/docker-v2-01.html-dbcc5af0.js" as="script"><link rel="prefetch" href="/assets/docker-v2-02.html-ef421f81.js" as="script"><link rel="prefetch" href="/assets/Docker常见问题记录.html-c6edb416.js" as="script"><link rel="prefetch" href="/assets/Idea设置大全.html-889b47aa.js" as="script"><link rel="prefetch" href="/assets/Maven高级2.0.html-21969b52.js" as="script"><link rel="prefetch" href="/assets/分布式搜索引擎01.html-c4022f7a.js" as="script"><link rel="prefetch" href="/assets/分布式搜索引擎02.html-75a9fe2b.js" as="script"><link rel="prefetch" href="/assets/分布式搜索引擎03.html-41d1edd3.js" as="script"><link rel="prefetch" href="/assets/笔记.html-02870b4f.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ-基础篇.html-7d214fae.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ-高级篇.html-8154931f.js" as="script"><link rel="prefetch" href="/assets/RocketMQ-01.html-d508c009.js" as="script"><link rel="prefetch" href="/assets/RocketMQ-02.html-93769297.js" as="script"><link rel="prefetch" href="/assets/RocketMQ-03.html-ba5030ab.js" as="script"><link rel="prefetch" href="/assets/Redis7-基础篇.html-abf4fa2c.js" as="script"><link rel="prefetch" href="/assets/Redis7-高级篇.html-21797812.js" as="script"><link rel="prefetch" href="/assets/01.Redis-入门篇.html-fee26d4e.js" as="script"><link rel="prefetch" href="/assets/02.Redis-实战篇.html-f7acc947.js" as="script"><link rel="prefetch" href="/assets/03.Redis高级篇-分布式缓存.html-76e9b26a.js" as="script"><link rel="prefetch" href="/assets/04.Redis高级篇-多级缓存.html-bcdd7b8e.js" as="script"><link rel="prefetch" href="/assets/05.Redis高级篇-最佳实践.html-a3596a14.js" as="script"><link rel="prefetch" href="/assets/06.Redis-原理篇.html-89041de5.js" as="script"><link rel="prefetch" href="/assets/Netty01-nio.html-c2c0c2b3.js" as="script"><link rel="prefetch" href="/assets/Netty02-入门.html-f8e46de2.js" as="script"><link rel="prefetch" href="/assets/Netty03-进阶.html-81035463.js" as="script"><link rel="prefetch" href="/assets/Netty04-优化与源码.html-c62d7bfb.js" as="script"><link rel="prefetch" href="/assets/01_Spring高级49讲-容器与bean.html-b4d28370.js" as="script"><link rel="prefetch" href="/assets/02_Spring-高级49讲-AOP.html-4d843985.js" as="script"><link rel="prefetch" href="/assets/03_Spring高级49讲-WEB.html-3923a48f.js" as="script"><link rel="prefetch" href="/assets/05_Spring高级49讲-其它.html-688750b1.js" as="script"><link rel="prefetch" href="/assets/spring5第一天2.0.html-3bbb3b20.js" as="script"><link rel="prefetch" href="/assets/spring5第三天2.0.html-d0e7b718.js" as="script"><link rel="prefetch" href="/assets/spring5第二天2.0.html-852d21b0.js" as="script"><link rel="prefetch" href="/assets/spring5第四天2.0.html-574ea6cd.js" as="script"><link rel="prefetch" href="/assets/附录(切入点表达式规则).html-6b379561.js" as="script"><link rel="prefetch" href="/assets/01 MySQL概述.html-0b690b14.js" as="script"><link rel="prefetch" href="/assets/02 MySQL分类.html-6da54caa.js" as="script"><link rel="prefetch" href="/assets/03 MySQL函数.html-6eb99aab.js" as="script"><link rel="prefetch" href="/assets/04 MySQL约束.html-bb8d06a3.js" as="script"><link rel="prefetch" href="/assets/05 MySQL多表查询.html-b659c5a8.js" as="script"><link rel="prefetch" href="/assets/06 MySQL事务.html-de4cafd5.js" as="script"><link rel="prefetch" href="/assets/1 日志.html-7090f26b.js" as="script"><link rel="prefetch" href="/assets/2 主从复制.html-70191fcb.js" as="script"><link rel="prefetch" href="/assets/3 分库分表.html-6b15979f.js" as="script"><link rel="prefetch" href="/assets/4 MyCat.html-c51d4a92.js" as="script"><link rel="prefetch" href="/assets/5 读写分离.html-1c664b36.js" as="script"><link rel="prefetch" href="/assets/01 存储引擎.html-004d3e77.js" as="script"><link rel="prefetch" href="/assets/02 索引.html-158cf356.js" as="script"><link rel="prefetch" href="/assets/03 MySQL优化.html-309c1e2c.js" as="script"><link rel="prefetch" href="/assets/04 视图、存储过程、触发器.html-9cb5724a.js" as="script"><link rel="prefetch" href="/assets/05 锁.html-5a31056b.js" as="script"><link rel="prefetch" href="/assets/06 事务.html-f1508041.js" as="script"><link rel="prefetch" href="/assets/07 MySQL管理.html-5100e2f5.js" as="script"><link rel="prefetch" href="/assets/404.html-e8024d5f.js" as="script"><link rel="prefetch" href="/assets/index.html-7a44b2a7.js" as="script"><link rel="prefetch" href="/assets/index.html-c2d8257e.js" as="script"><link rel="prefetch" href="/assets/index.html-65508815.js" as="script"><link rel="prefetch" href="/assets/index.html-6098d3bf.js" as="script"><link rel="prefetch" href="/assets/index.html-40fa5774.js" as="script"><link rel="prefetch" href="/assets/index.html-b0e0e9af.js" as="script"><link rel="prefetch" href="/assets/index.html-dec21a8c.js" as="script"><link rel="prefetch" href="/assets/index.html-0d941bbd.js" as="script"><link rel="prefetch" href="/assets/index.html-1fd0c226.js" as="script"><link rel="prefetch" href="/assets/index.html-855e15e1.js" as="script"><link rel="prefetch" href="/assets/index.html-7ac25e09.js" as="script"><link rel="prefetch" href="/assets/index.html-0b9dd320.js" as="script"><link rel="prefetch" href="/assets/index.html-ef577929.js" as="script"><link rel="prefetch" href="/assets/index.html-c92a16c7.js" as="script"><link rel="prefetch" href="/assets/index.html-594fde9b.js" as="script"><link rel="prefetch" href="/assets/index.html-b173eeb5.js" as="script"><link rel="prefetch" href="/assets/index.html-699799d5.js" as="script"><link rel="prefetch" href="/assets/index.html-1655480d.js" as="script"><link rel="prefetch" href="/assets/index.html-2762eb7c.js" as="script"><link rel="prefetch" href="/assets/index.html-ec29bb00.js" as="script"><link rel="prefetch" href="/assets/index.html-8ad46694.js" as="script"><link rel="prefetch" href="/assets/index.html-c52aef96.js" as="script"><link rel="prefetch" href="/assets/index.html-45e4c836.js" as="script"><link rel="prefetch" href="/assets/index.html-4d5c4585.js" as="script"><link rel="prefetch" href="/assets/index.html-9c53d089.js" as="script"><link rel="prefetch" href="/assets/index.html-389340d2.js" as="script"><link rel="prefetch" href="/assets/index.html-560a0e47.js" as="script"><link rel="prefetch" href="/assets/index.html-b44ae0e9.js" as="script"><link rel="prefetch" href="/assets/index.html-318d5d38.js" as="script"><link rel="prefetch" href="/assets/index.html-64cb38e1.js" as="script"><link rel="prefetch" href="/assets/index.html-847cae86.js" as="script"><link rel="prefetch" href="/assets/index.html-6f14aea0.js" as="script"><link rel="prefetch" href="/assets/index.html-ee52fb03.js" as="script"><link rel="prefetch" href="/assets/index.html-bf49ba50.js" as="script"><link rel="prefetch" href="/assets/index.html-50a493c3.js" as="script"><link rel="prefetch" href="/assets/index.html-6055cf89.js" as="script"><link rel="prefetch" href="/assets/index.html-53af87b9.js" as="script"><link rel="prefetch" href="/assets/index.html-6a6f9ab6.js" as="script"><link rel="prefetch" href="/assets/index.html-16fbeec9.js" as="script"><link rel="prefetch" href="/assets/index.html-71ea77cb.js" as="script"><link rel="prefetch" href="/assets/index.html-1b4b4894.js" as="script"><link rel="prefetch" href="/assets/index.html-19212216.js" as="script"><link rel="prefetch" href="/assets/index.html-0f0e002d.js" as="script"><link rel="prefetch" href="/assets/index.html-48300a13.js" as="script"><link rel="prefetch" href="/assets/index.html-cf862da0.js" as="script"><link rel="prefetch" href="/assets/index.html-6430fb47.js" as="script"><link rel="prefetch" href="/assets/index.html-9d582514.js" as="script"><link rel="prefetch" href="/assets/index.html-628f91d7.js" as="script"><link rel="prefetch" href="/assets/index.html-7fe46b97.js" as="script"><link rel="prefetch" href="/assets/index.html-64530238.js" as="script"><link rel="prefetch" href="/assets/index.html-4a2282ff.js" as="script"><link rel="prefetch" href="/assets/index.html-8ed873a1.js" as="script"><link rel="prefetch" href="/assets/index.html-6a4b2e99.js" as="script"><link rel="prefetch" href="/assets/index.html-6a6ef731.js" as="script"><link rel="prefetch" href="/assets/index.html-324d994a.js" as="script"><link rel="prefetch" href="/assets/index.html-b2cb6c65.js" as="script"><link rel="prefetch" href="/assets/index.html-6bc6c9a9.js" as="script"><link rel="prefetch" href="/assets/index.html-008a4009.js" as="script"><link rel="prefetch" href="/assets/index.html-1b44bc96.js" as="script"><link rel="prefetch" href="/assets/index.html-9ab99db5.js" as="script"><link rel="prefetch" href="/assets/index.html-d4efb8cb.js" as="script"><link rel="prefetch" href="/assets/index.html-c6071e2e.js" as="script"><link rel="prefetch" href="/assets/index.html-176e959a.js" as="script"><link rel="prefetch" href="/assets/index.html-ac83c7ec.js" as="script"><link rel="prefetch" href="/assets/index.html-aa6b1351.js" as="script"><link rel="prefetch" href="/assets/index.html-0de2b419.js" as="script"><link rel="prefetch" href="/assets/index.html-0afc07ab.js" as="script"><link rel="prefetch" href="/assets/index.html-ad5d3e88.js" as="script"><link rel="prefetch" href="/assets/index.html-b07d9651.js" as="script"><link rel="prefetch" href="/assets/index.html-81e4ee0f.js" as="script"><link rel="prefetch" href="/assets/index.html-7532eea1.js" as="script"><link rel="prefetch" href="/assets/index.html-073dd832.js" as="script"><link rel="prefetch" href="/assets/index.html-882202ca.js" as="script"><link rel="prefetch" href="/assets/index.html-2d34f4d1.js" as="script"><link rel="prefetch" href="/assets/index.html-fbd58386.js" as="script"><link rel="prefetch" href="/assets/index.html-4f426bef.js" as="script"><link rel="prefetch" href="/assets/index.html-836760e1.js" as="script"><link rel="prefetch" href="/assets/index.html-c08dc8a7.js" as="script"><link rel="prefetch" href="/assets/index.html-8f7a11c1.js" as="script"><link rel="prefetch" href="/assets/index.html-009beb66.js" as="script"><link rel="prefetch" href="/assets/index.html-596458cb.js" as="script"><link rel="prefetch" href="/assets/index.html-731d7a71.js" as="script"><link rel="prefetch" href="/assets/index.html-6b063fb8.js" as="script"><link rel="prefetch" href="/assets/index.html-6a725f4a.js" as="script"><link rel="prefetch" href="/assets/index.html-6318f350.js" as="script"><link rel="prefetch" href="/assets/index.html-2c82ecd3.js" as="script"><link rel="prefetch" href="/assets/index.html-8f79dde7.js" as="script"><link rel="prefetch" href="/assets/index.html-f236d0e0.js" as="script"><link rel="prefetch" href="/assets/index.html-c5daf2c8.js" as="script"><link rel="prefetch" href="/assets/index.html-d874ae66.js" as="script"><link rel="prefetch" href="/assets/index.html-87cebe18.js" as="script"><link rel="prefetch" href="/assets/index.html-6b3fd793.js" as="script"><link rel="prefetch" href="/assets/index.html-6deee822.js" as="script"><link rel="prefetch" href="/assets/index.html-05193bc8.js" as="script"><link rel="prefetch" href="/assets/index.html-e974589b.js" as="script"><link rel="prefetch" href="/assets/index.html-75026ff4.js" as="script"><link rel="prefetch" href="/assets/index.html-783a5464.js" as="script"><link rel="prefetch" href="/assets/index.html-7c9910fa.js" as="script"><link rel="prefetch" href="/assets/index.html-9558b866.js" as="script"><link rel="prefetch" href="/assets/index.html-3a1d239a.js" as="script"><link rel="prefetch" href="/assets/index.html-2bc20db6.js" as="script"><link rel="prefetch" href="/assets/index.html-b4fe098b.js" as="script"><link rel="prefetch" href="/assets/index.html-d6eb0416.js" as="script"><link rel="prefetch" href="/assets/index.html-26b4945c.js" as="script"><link rel="prefetch" href="/assets/index.html-972d27e2.js" as="script"><link rel="prefetch" href="/assets/index.html-45a75503.js" as="script"><link rel="prefetch" href="/assets/index.html-292cd72f.js" as="script"><link rel="prefetch" href="/assets/index.html-814f5a55.js" as="script"><link rel="prefetch" href="/assets/index.html-4a7a603b.js" as="script"><link rel="prefetch" href="/assets/index.html-dca1adb2.js" as="script"><link rel="prefetch" href="/assets/index.html-186c0015.js" as="script"><link rel="prefetch" href="/assets/index.html-5ac45bfb.js" as="script"><link rel="prefetch" href="/assets/index.html-22140455.js" as="script"><link rel="prefetch" href="/assets/index.html-90d6f8e8.js" as="script"><link rel="prefetch" href="/assets/index.html-836ad4a2.js" as="script"><link rel="prefetch" href="/assets/index.html-682ed04d.js" as="script"><link rel="prefetch" href="/assets/index.html-04b334d0.js" as="script"><link rel="prefetch" href="/assets/index.html-2d1843c0.js" as="script"><link rel="prefetch" href="/assets/index.html-bc626a2e.js" as="script"><link rel="prefetch" href="/assets/index.html-95eff682.js" as="script"><link rel="prefetch" href="/assets/index.html-f73b8490.js" as="script"><link rel="prefetch" href="/assets/index.html-e4987e48.js" as="script"><link rel="prefetch" href="/assets/index.html-d14bdbaf.js" as="script"><link rel="prefetch" href="/assets/index.html-b7033790.js" as="script"><link rel="prefetch" href="/assets/index.html-35697d1e.js" as="script"><link rel="prefetch" href="/assets/index.html-3536a38f.js" as="script"><link rel="prefetch" href="/assets/index.html-f1bff1b1.js" as="script"><link rel="prefetch" href="/assets/index.html-b8fd9817.js" as="script"><link rel="prefetch" href="/assets/index.html-76dd3c70.js" as="script"><link rel="prefetch" href="/assets/index.html-c8c18739.js" as="script"><link rel="prefetch" href="/assets/index.html-5f4cac44.js" as="script"><link rel="prefetch" href="/assets/index.html-4f4cf926.js" as="script"><link rel="prefetch" href="/assets/index.html-2a5bd6b7.js" as="script"><link rel="prefetch" href="/assets/index.html-e577154f.js" as="script"><link rel="prefetch" href="/assets/index.html-8e3e2285.js" as="script"><link rel="prefetch" href="/assets/index.html-630afe2c.js" as="script"><link rel="prefetch" href="/assets/index.html-a07984f0.js" as="script"><link rel="prefetch" href="/assets/index.html-d2b3eefa.js" as="script"><link rel="prefetch" href="/assets/index.html-a283e669.js" as="script"><link rel="prefetch" href="/assets/index.html-863ebb9a.js" as="script"><link rel="prefetch" href="/assets/index.html-c5200fcc.js" as="script"><link rel="prefetch" href="/assets/index.html-37abb384.js" as="script"><link rel="prefetch" href="/assets/index.html-5bb88a8b.js" as="script"><link rel="prefetch" href="/assets/index.html-cf5e90da.js" as="script"><link rel="prefetch" href="/assets/index.html-66ae7fe6.js" as="script"><link rel="prefetch" href="/assets/index.html-64a7a5b8.js" as="script"><link rel="prefetch" href="/assets/index.html-acfe5990.js" as="script"><link rel="prefetch" href="/assets/index.html-4581b87a.js" as="script"><link rel="prefetch" href="/assets/index.html-f8c14602.js" as="script"><link rel="prefetch" href="/assets/index.html-bab644c6.js" as="script"><link rel="prefetch" href="/assets/index.html-fa5e8210.js" as="script"><link rel="prefetch" href="/assets/index.html-fc759619.js" as="script"><link rel="prefetch" href="/assets/index.html-b213330d.js" as="script"><link rel="prefetch" href="/assets/index.html-30a0af87.js" as="script"><link rel="prefetch" href="/assets/index.html-75978b77.js" as="script"><link rel="prefetch" href="/assets/index.html-32b3491e.js" as="script"><link rel="prefetch" href="/assets/index.html-59ca2443.js" as="script"><link rel="prefetch" href="/assets/index.html-987846fb.js" as="script"><link rel="prefetch" href="/assets/index.html-91c690fb.js" as="script"><link rel="prefetch" href="/assets/index.html-a48a655a.js" as="script"><link rel="prefetch" href="/assets/index.html-a09b7784.js" as="script"><link rel="prefetch" href="/assets/index.html-5dc03253.js" as="script"><link rel="prefetch" href="/assets/index.html-96a908d1.js" as="script"><link rel="prefetch" href="/assets/index.html-3cbc5bc6.js" as="script"><link rel="prefetch" href="/assets/index.html-fa31a2a5.js" as="script"><link rel="prefetch" href="/assets/index.html-ff486795.js" as="script"><link rel="prefetch" href="/assets/index.html-a96a13d7.js" as="script"><link rel="prefetch" href="/assets/index.html-4d2cd113.js" as="script"><link rel="prefetch" href="/assets/index.html-f0159889.js" as="script"><link rel="prefetch" href="/assets/index.html-4dcdb9d1.js" as="script"><link rel="prefetch" href="/assets/index.html-c69083f8.js" as="script"><link rel="prefetch" href="/assets/index.html-22711a96.js" as="script"><link rel="prefetch" href="/assets/index.html-7cb5872a.js" as="script"><link rel="prefetch" href="/assets/index.html-4b1b84c4.js" as="script"><link rel="prefetch" href="/assets/index.html-e0c16ff1.js" as="script"><link rel="prefetch" href="/assets/index.html-d6a7d13c.js" as="script"><link rel="prefetch" href="/assets/index.html-f8f6dab2.js" as="script"><link rel="prefetch" href="/assets/index.html-def8fbc2.js" as="script"><link rel="prefetch" href="/assets/index.html-d14b4dc3.js" as="script"><link rel="prefetch" href="/assets/index.html-96bf54f0.js" as="script"><link rel="prefetch" href="/assets/index.html-4623fd45.js" as="script"><link rel="prefetch" href="/assets/index.html-c6acd68f.js" as="script"><link rel="prefetch" href="/assets/index.html-13d0fca8.js" as="script"><link rel="prefetch" href="/assets/index.html-cf8783af.js" as="script"><link rel="prefetch" href="/assets/index.html-d0d2e2c8.js" as="script"><link rel="prefetch" href="/assets/index.html-b4233e90.js" as="script"><link rel="prefetch" href="/assets/index.html-7a9335c5.js" as="script"><link rel="prefetch" href="/assets/index.html-af838e02.js" as="script"><link rel="prefetch" href="/assets/index.html-0d8bd120.js" as="script"><link rel="prefetch" href="/assets/index.html-1920f004.js" as="script"><link rel="prefetch" href="/assets/index.html-8913b174.js" as="script"><link rel="prefetch" href="/assets/index.html-be90f6f8.js" as="script"><link rel="prefetch" href="/assets/index.html-0e622f96.js" as="script"><link rel="prefetch" href="/assets/index.html-fa6fabc2.js" as="script"><link rel="prefetch" href="/assets/index.html-a46aedeb.js" as="script"><link rel="prefetch" href="/assets/index.html-94e85ee7.js" as="script"><link rel="prefetch" href="/assets/index.html-9cd8ff9c.js" as="script"><link rel="prefetch" href="/assets/index.html-8fe6afa8.js" as="script"><link rel="prefetch" href="/assets/index.html-e5bff0ee.js" as="script"><link rel="prefetch" href="/assets/index.html-a353acff.js" as="script"><link rel="prefetch" href="/assets/index.html-2c42df8e.js" as="script"><link rel="prefetch" href="/assets/index.html-e685b064.js" as="script"><link rel="prefetch" href="/assets/index.html-bce73b8c.js" as="script"><link rel="prefetch" href="/assets/index.html-8f755b24.js" as="script"><link rel="prefetch" href="/assets/index.html-161cfd2f.js" as="script"><link rel="prefetch" href="/assets/index.html-fd5532f1.js" as="script"><link rel="prefetch" href="/assets/index.html-00ea4678.js" as="script"><link rel="prefetch" href="/assets/index.html-17f494f6.js" as="script"><link rel="prefetch" href="/assets/index.html-7373dd2a.js" as="script"><link rel="prefetch" href="/assets/index.html-43aa72ea.js" as="script"><link rel="prefetch" href="/assets/index.html-2058319a.js" as="script"><link rel="prefetch" href="/assets/index.html-fac8fcf7.js" as="script"><link rel="prefetch" href="/assets/index.html-d02462a2.js" as="script"><link rel="prefetch" href="/assets/index.html-449b35c2.js" as="script"><link rel="prefetch" href="/assets/index.html-a307c69e.js" as="script"><link rel="prefetch" href="/assets/index.html-570872b6.js" as="script"><link rel="prefetch" href="/assets/index.html-c68d03c2.js" as="script"><link rel="prefetch" href="/assets/index.html-449e078a.js" as="script"><link rel="prefetch" href="/assets/index.html-afd5c28a.js" as="script"><link rel="prefetch" href="/assets/index.html-e3247093.js" as="script"><link rel="prefetch" href="/assets/index.html-88f31470.js" as="script"><link rel="prefetch" href="/assets/index.html-f11f5ab3.js" as="script"><link rel="prefetch" href="/assets/index.html-495bbda2.js" as="script"><link rel="prefetch" href="/assets/index.html-495e82b8.js" as="script"><link rel="prefetch" href="/assets/index.html-e2a05d80.js" as="script"><link rel="prefetch" href="/assets/index.html-04c52082.js" as="script"><link rel="prefetch" href="/assets/index.html-98ef8437.js" as="script"><link rel="prefetch" href="/assets/index.html-8ed3ec08.js" as="script"><link rel="prefetch" href="/assets/index.html-df67c987.js" as="script"><link rel="prefetch" href="/assets/index.html-d74e9cca.js" as="script"><link rel="prefetch" href="/assets/index.html-604e4b37.js" as="script"><link rel="prefetch" href="/assets/index.html-27b368b9.js" as="script"><link rel="prefetch" href="/assets/index.html-d18e302c.js" as="script"><link rel="prefetch" href="/assets/index.html-bbbdb95c.js" as="script"><link rel="prefetch" href="/assets/index.html-8d837281.js" as="script"><link rel="prefetch" href="/assets/index.html-443f213b.js" as="script"><link rel="prefetch" href="/assets/index.html-bddace15.js" as="script"><link rel="prefetch" href="/assets/index.html-eeaf07d7.js" as="script"><link rel="prefetch" href="/assets/index.html-fb476a0b.js" as="script"><link rel="prefetch" href="/assets/index.html-22496847.js" as="script"><link rel="prefetch" href="/assets/index.html-a0dc2f84.js" as="script"><link rel="prefetch" href="/assets/index.html-a2b63b69.js" as="script"><link rel="prefetch" href="/assets/index.html-51e5fc87.js" as="script"><link rel="prefetch" href="/assets/index.html-3cf0055d.js" as="script"><link rel="prefetch" href="/assets/index.html-f8a15ad4.js" as="script"><link rel="prefetch" href="/assets/index.html-046be050.js" as="script"><link rel="prefetch" href="/assets/index.html-af00f73a.js" as="script"><link rel="prefetch" href="/assets/index.html-795a06ba.js" as="script"><link rel="prefetch" href="/assets/index.html-34474ed7.js" as="script"><link rel="prefetch" href="/assets/index.html-29bc36ba.js" as="script"><link rel="prefetch" href="/assets/index.html-e2093c5c.js" as="script"><link rel="prefetch" href="/assets/index.html-64f9f9af.js" as="script"><link rel="prefetch" href="/assets/index.html-5b6ffa97.js" as="script"><link rel="prefetch" href="/assets/index.html-4b0b03e5.js" as="script"><link rel="prefetch" href="/assets/index.html-d26a06ca.js" as="script"><link rel="prefetch" href="/assets/index.html-385c8d17.js" as="script"><link rel="prefetch" href="/assets/index.html-3585ea6d.js" as="script"><link rel="prefetch" href="/assets/index.html-8ce02fdd.js" as="script"><link rel="prefetch" href="/assets/index.html-b0dd5205.js" as="script"><link rel="prefetch" href="/assets/index.html-87812d39.js" as="script"><link rel="prefetch" href="/assets/index.html-a341b7d2.js" as="script"><link rel="prefetch" href="/assets/index.html-ea37f5f0.js" as="script"><link rel="prefetch" href="/assets/index.html-47e60921.js" as="script"><link rel="prefetch" href="/assets/index.html-588274db.js" as="script"><link rel="prefetch" href="/assets/index.html-b39803ba.js" as="script"><link rel="prefetch" href="/assets/index.html-e1a6ceda.js" as="script"><link rel="prefetch" href="/assets/index.html-33126c06.js" as="script"><link rel="prefetch" href="/assets/index.html-9fbc9f60.js" as="script"><link rel="prefetch" href="/assets/index.html-f49e0f1f.js" as="script"><link rel="prefetch" href="/assets/index.html-62ea0783.js" as="script"><link rel="prefetch" href="/assets/index.html-215050dd.js" as="script"><link rel="prefetch" href="/assets/index.html-f180485a.js" as="script"><link rel="prefetch" href="/assets/index.html-a229b664.js" as="script"><link rel="prefetch" href="/assets/index.html-39f1d0e6.js" as="script"><link rel="prefetch" href="/assets/index.html-6c6c4f7b.js" as="script"><link rel="prefetch" href="/assets/index.html-6f796429.js" as="script"><link rel="prefetch" href="/assets/index.html-ace93632.js" as="script"><link rel="prefetch" href="/assets/index.html-bd528ceb.js" as="script"><link rel="prefetch" href="/assets/index.html-79697d77.js" as="script"><link rel="prefetch" href="/assets/blog.html-e26d2f74.js" as="script"><link rel="prefetch" href="/assets/index.html-fd6b6e17.js" as="script"><link rel="prefetch" href="/assets/tools.html-20002948.js" as="script"><link rel="prefetch" href="/assets/Nacos源码分析.html-d6fdaaf1.js" as="script"><link rel="prefetch" href="/assets/Sentinel源码分析.html-d2287ccb.js" as="script"><link rel="prefetch" href="/assets/微服务常见面试题.html-1e73cd58.js" as="script"><link rel="prefetch" href="/assets/Java基础.html-35f10bcd.js" as="script"><link rel="prefetch" href="/assets/项目场景题收集.html-ea4afb56.js" as="script"><link rel="prefetch" href="/assets/项目工具类收集.html-21d9556d.js" as="script"><link rel="prefetch" href="/assets/Windows杀进程资料.html-9819abe6.js" as="script"><link rel="prefetch" href="/assets/recursion.html-fe8f3ab8.js" as="script"><link rel="prefetch" href="/assets/Ffmpeg使用说明.html-3202d822.js" as="script"><link rel="prefetch" href="/assets/Centos7常见问题记录.html-664f70ec.js" as="script"><link rel="prefetch" href="/assets/Centos7新机开荒.html-56a34cbc.js" as="script"><link rel="prefetch" href="/assets/Https加密原理.html-530bf4a2.js" as="script"><link rel="prefetch" href="/assets/MVCC个人理解.html-19303061.js" as="script"><link rel="prefetch" href="/assets/MySQL安装教程.html-4ac08eba.js" as="script"><link rel="prefetch" href="/assets/数据库死锁.html-14699953.js" as="script"><link rel="prefetch" href="/assets/集合常用面试题.html-3838c6f8.js" as="script"><link rel="prefetch" href="/assets/让线程顺序运行的11种方法.html-69a593ab.js" as="script"><link rel="prefetch" href="/assets/1 怎么解决Java8 stream操作toMap的key重复问题.html-9b989647.js" as="script"><link rel="prefetch" href="/assets/JDK8新特性.html-d2dca101.js" as="script"><link rel="prefetch" href="/assets/01.Spring的生命周期.html-bdf2fa10.js" as="script"><link rel="prefetch" href="/assets/02.SpringBoot配置项目支持多数据库.html-8c7f8f5f.js" as="script"><link rel="prefetch" href="/assets/Dubbo.html-6926f9ce.js" as="script"><link rel="prefetch" href="/assets/Elasticsearch（一）.html-186cfa5d.js" as="script"><link rel="prefetch" href="/assets/Elasticsearch（二）.html-5d0b63d9.js" as="script"><link rel="prefetch" href="/assets/Lucene入门.html-66934155.js" as="script"><link rel="prefetch" href="/assets/01.Nacos 配置中心.html-ffe7cb10.js" as="script"><link rel="prefetch" href="/assets/02.Nacos 服务发现.html-095a3cf6.js" as="script"><link rel="prefetch" href="/assets/03.Nacos 服务发现源码分析.html-e6d72f35.js" as="script"><link rel="prefetch" href="/assets/04.Nacos 配置中心源码解读.html-1bfd9a91.js" as="script"><link rel="prefetch" href="/assets/Seata Saga模式.html-d12dbb58.js" as="script"><link rel="prefetch" href="/assets/seata的部署和集成.html-510062eb.js" as="script"><link rel="prefetch" href="/assets/分布式事务Seata.html-df276017.js" as="script"><link rel="prefetch" href="/assets/微服务保护.html-8bd69f02.js" as="script"><link rel="prefetch" href="/assets/SpringCloud实用篇01.html-a403d3d9.js" as="script"><link rel="prefetch" href="/assets/SpringCloud实用篇02.html-c1775312.js" as="script"><link rel="prefetch" href="/assets/SpringCloud（一）.html-80914200.js" as="script"><link rel="prefetch" href="/assets/SpringCloud（二）.html-bd628246.js" as="script"><link rel="prefetch" href="/assets/index.html-c20667f2.js" as="script"><link rel="prefetch" href="/assets/index.html-b96ce9f5.js" as="script"><link rel="prefetch" href="/assets/Bootstrap-01.html-b9707bd3.js" as="script"><link rel="prefetch" href="/assets/Bootstrap-02.html-5753da76.js" as="script"><link rel="prefetch" href="/assets/jquery3基础.html-e61e55ff.js" as="script"><link rel="prefetch" href="/assets/jquery3高级.html-7233e5b1.js" as="script"><link rel="prefetch" href="/assets/Vue.html-aa40e4e1.js" as="script"><link rel="prefetch" href="/assets/day01-MyBatis2.0.html-70b66e9f.js" as="script"><link rel="prefetch" href="/assets/day02-MyBatis2.0.html-a0600ff5.js" as="script"><link rel="prefetch" href="/assets/day03-MyBatis2.0.html-405934aa.js" as="script"><link rel="prefetch" href="/assets/Mybatis-Plus入门第一天.html-5ec27f34.js" as="script"><link rel="prefetch" href="/assets/Mybatis-Plus入门第二天.html-2cfdbd6c.js" as="script"><link rel="prefetch" href="/assets/MyBatisPlus.html-4f50b2bd.js" as="script"><link rel="prefetch" href="/assets/SpringBoot.html-6f028257.js" as="script"><link rel="prefetch" href="/assets/spring5mvc第一天2.0.html-8f47de3a.js" as="script"><link rel="prefetch" href="/assets/spring5mvc第三天2.0.html-350cde97.js" as="script"><link rel="prefetch" href="/assets/spring5mvc第二天2.0.html-f11314f2.js" as="script"><link rel="prefetch" href="/assets/Centos7安装Docker.html-6bbed298.js" as="script"><link rel="prefetch" href="/assets/Docker-2022-实用篇.html-be709570.js" as="script"><link rel="prefetch" href="/assets/docker-linux-安装.html-fbaf2888.js" as="script"><link rel="prefetch" href="/assets/docker-v1-01.html-cc6a55d6.js" as="script"><link rel="prefetch" href="/assets/docker-v2-01.html-18d1fa9c.js" as="script"><link rel="prefetch" href="/assets/docker-v2-02.html-482752a2.js" as="script"><link rel="prefetch" href="/assets/Docker常见问题记录.html-32bdf784.js" as="script"><link rel="prefetch" href="/assets/Idea设置大全.html-d8ca44f2.js" as="script"><link rel="prefetch" href="/assets/Maven高级2.0.html-b920004c.js" as="script"><link rel="prefetch" href="/assets/分布式搜索引擎01.html-8d07aace.js" as="script"><link rel="prefetch" href="/assets/分布式搜索引擎02.html-015e45fb.js" as="script"><link rel="prefetch" href="/assets/分布式搜索引擎03.html-e6fa14aa.js" as="script"><link rel="prefetch" href="/assets/笔记.html-de1b0c1a.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ-基础篇.html-82ac6c52.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ-高级篇.html-a84b2740.js" as="script"><link rel="prefetch" href="/assets/RocketMQ-01.html-ae6033cc.js" as="script"><link rel="prefetch" href="/assets/RocketMQ-02.html-6cf8ef73.js" as="script"><link rel="prefetch" href="/assets/RocketMQ-03.html-2368fa69.js" as="script"><link rel="prefetch" href="/assets/Redis7-基础篇.html-bca5478d.js" as="script"><link rel="prefetch" href="/assets/Redis7-高级篇.html-ea95fa20.js" as="script"><link rel="prefetch" href="/assets/01.Redis-入门篇.html-afefeee6.js" as="script"><link rel="prefetch" href="/assets/02.Redis-实战篇.html-3ea39e8f.js" as="script"><link rel="prefetch" href="/assets/03.Redis高级篇-分布式缓存.html-9099efe9.js" as="script"><link rel="prefetch" href="/assets/04.Redis高级篇-多级缓存.html-b54340ce.js" as="script"><link rel="prefetch" href="/assets/05.Redis高级篇-最佳实践.html-d8403c64.js" as="script"><link rel="prefetch" href="/assets/06.Redis-原理篇.html-941249e2.js" as="script"><link rel="prefetch" href="/assets/Netty01-nio.html-ab0c7763.js" as="script"><link rel="prefetch" href="/assets/Netty02-入门.html-6593e0a6.js" as="script"><link rel="prefetch" href="/assets/Netty03-进阶.html-0205b7ff.js" as="script"><link rel="prefetch" href="/assets/Netty04-优化与源码.html-62693707.js" as="script"><link rel="prefetch" href="/assets/01_Spring高级49讲-容器与bean.html-1d699162.js" as="script"><link rel="prefetch" href="/assets/02_Spring-高级49讲-AOP.html-226ea5bd.js" as="script"><link rel="prefetch" href="/assets/03_Spring高级49讲-WEB.html-ab8a0b03.js" as="script"><link rel="prefetch" href="/assets/05_Spring高级49讲-其它.html-f9c0100a.js" as="script"><link rel="prefetch" href="/assets/spring5第一天2.0.html-87193f71.js" as="script"><link rel="prefetch" href="/assets/spring5第三天2.0.html-d276ab2a.js" as="script"><link rel="prefetch" href="/assets/spring5第二天2.0.html-2ab4ac0e.js" as="script"><link rel="prefetch" href="/assets/spring5第四天2.0.html-fcd15071.js" as="script"><link rel="prefetch" href="/assets/附录(切入点表达式规则).html-84ac6132.js" as="script"><link rel="prefetch" href="/assets/01 MySQL概述.html-0944da32.js" as="script"><link rel="prefetch" href="/assets/02 MySQL分类.html-4a2e1e9e.js" as="script"><link rel="prefetch" href="/assets/03 MySQL函数.html-39913d78.js" as="script"><link rel="prefetch" href="/assets/04 MySQL约束.html-e47d7da5.js" as="script"><link rel="prefetch" href="/assets/05 MySQL多表查询.html-ed185e28.js" as="script"><link rel="prefetch" href="/assets/06 MySQL事务.html-89fe5b14.js" as="script"><link rel="prefetch" href="/assets/1 日志.html-23fd341a.js" as="script"><link rel="prefetch" href="/assets/2 主从复制.html-6b120434.js" as="script"><link rel="prefetch" href="/assets/3 分库分表.html-656aba35.js" as="script"><link rel="prefetch" href="/assets/4 MyCat.html-14f4a94c.js" as="script"><link rel="prefetch" href="/assets/5 读写分离.html-880adbdc.js" as="script"><link rel="prefetch" href="/assets/01 存储引擎.html-c84fc572.js" as="script"><link rel="prefetch" href="/assets/02 索引.html-903a4a70.js" as="script"><link rel="prefetch" href="/assets/03 MySQL优化.html-38069a4b.js" as="script"><link rel="prefetch" href="/assets/04 视图、存储过程、触发器.html-4d4e637f.js" as="script"><link rel="prefetch" href="/assets/05 锁.html-b67d4730.js" as="script"><link rel="prefetch" href="/assets/06 事务.html-db0ea5aa.js" as="script"><link rel="prefetch" href="/assets/07 MySQL管理.html-61647636.js" as="script"><link rel="prefetch" href="/assets/404.html-9ce6035f.js" as="script"><link rel="prefetch" href="/assets/index.html-edc2dc59.js" as="script"><link rel="prefetch" href="/assets/index.html-9116c59a.js" as="script"><link rel="prefetch" href="/assets/index.html-0d2323fb.js" as="script"><link rel="prefetch" href="/assets/index.html-4b245915.js" as="script"><link rel="prefetch" href="/assets/index.html-440d0e06.js" as="script"><link rel="prefetch" href="/assets/index.html-34a10f0e.js" as="script"><link rel="prefetch" href="/assets/index.html-53b4af91.js" as="script"><link rel="prefetch" href="/assets/index.html-9b27f7a8.js" as="script"><link rel="prefetch" href="/assets/index.html-5d8af298.js" as="script"><link rel="prefetch" href="/assets/index.html-54ead1d7.js" as="script"><link rel="prefetch" href="/assets/index.html-5657c874.js" as="script"><link rel="prefetch" href="/assets/index.html-dec257cd.js" as="script"><link rel="prefetch" href="/assets/index.html-c31939e3.js" as="script"><link rel="prefetch" href="/assets/index.html-fdb41de0.js" as="script"><link rel="prefetch" href="/assets/index.html-0fa41148.js" as="script"><link rel="prefetch" href="/assets/index.html-130cdf9d.js" as="script"><link rel="prefetch" href="/assets/index.html-2c1e2619.js" as="script"><link rel="prefetch" href="/assets/index.html-831a99e2.js" as="script"><link rel="prefetch" href="/assets/index.html-05b5a391.js" as="script"><link rel="prefetch" href="/assets/index.html-71d04d87.js" as="script"><link rel="prefetch" href="/assets/index.html-28b06130.js" as="script"><link rel="prefetch" href="/assets/index.html-8b26e3ce.js" as="script"><link rel="prefetch" href="/assets/index.html-e852d1ca.js" as="script"><link rel="prefetch" href="/assets/index.html-67281c06.js" as="script"><link rel="prefetch" href="/assets/index.html-beb3bbb9.js" as="script"><link rel="prefetch" href="/assets/index.html-643d07f7.js" as="script"><link rel="prefetch" href="/assets/index.html-d3c84f7b.js" as="script"><link rel="prefetch" href="/assets/index.html-65ff1556.js" as="script"><link rel="prefetch" href="/assets/index.html-073d3efa.js" as="script"><link rel="prefetch" href="/assets/index.html-c0f54aad.js" as="script"><link rel="prefetch" href="/assets/index.html-9d41bb35.js" as="script"><link rel="prefetch" href="/assets/index.html-0722552c.js" as="script"><link rel="prefetch" href="/assets/index.html-cdfc810e.js" as="script"><link rel="prefetch" href="/assets/index.html-829d9a99.js" as="script"><link rel="prefetch" href="/assets/index.html-68e653d1.js" as="script"><link rel="prefetch" href="/assets/index.html-d3ca87d0.js" as="script"><link rel="prefetch" href="/assets/index.html-21113088.js" as="script"><link rel="prefetch" href="/assets/index.html-f2dc98b6.js" as="script"><link rel="prefetch" href="/assets/index.html-c08e6e79.js" as="script"><link rel="prefetch" href="/assets/index.html-a9d0c576.js" as="script"><link rel="prefetch" href="/assets/index.html-9340a959.js" as="script"><link rel="prefetch" href="/assets/index.html-97b05f7c.js" as="script"><link rel="prefetch" href="/assets/index.html-d51283ea.js" as="script"><link rel="prefetch" href="/assets/index.html-2dfa31a3.js" as="script"><link rel="prefetch" href="/assets/index.html-e99ad80c.js" as="script"><link rel="prefetch" href="/assets/index.html-96ae5cf3.js" as="script"><link rel="prefetch" href="/assets/index.html-46ce0f81.js" as="script"><link rel="prefetch" href="/assets/index.html-18534302.js" as="script"><link rel="prefetch" href="/assets/index.html-37cde32f.js" as="script"><link rel="prefetch" href="/assets/index.html-7ef7fa65.js" as="script"><link rel="prefetch" href="/assets/index.html-9be5c047.js" as="script"><link rel="prefetch" href="/assets/index.html-ae6ebd1d.js" as="script"><link rel="prefetch" href="/assets/index.html-5e2d2f35.js" as="script"><link rel="prefetch" href="/assets/index.html-3eddff2b.js" as="script"><link rel="prefetch" href="/assets/index.html-305fd60c.js" as="script"><link rel="prefetch" href="/assets/index.html-d719f8cc.js" as="script"><link rel="prefetch" href="/assets/index.html-5db6e423.js" as="script"><link rel="prefetch" href="/assets/index.html-3e4777da.js" as="script"><link rel="prefetch" href="/assets/index.html-369157dc.js" as="script"><link rel="prefetch" href="/assets/index.html-e409087c.js" as="script"><link rel="prefetch" href="/assets/index.html-09cda23c.js" as="script"><link rel="prefetch" href="/assets/index.html-106f6811.js" as="script"><link rel="prefetch" href="/assets/index.html-98c4bea3.js" as="script"><link rel="prefetch" href="/assets/index.html-5cf4c095.js" as="script"><link rel="prefetch" href="/assets/index.html-1f716d16.js" as="script"><link rel="prefetch" href="/assets/index.html-a987020d.js" as="script"><link rel="prefetch" href="/assets/index.html-8126c1a2.js" as="script"><link rel="prefetch" href="/assets/index.html-8c3e30e8.js" as="script"><link rel="prefetch" href="/assets/index.html-da916e51.js" as="script"><link rel="prefetch" href="/assets/index.html-ab3bd1d4.js" as="script"><link rel="prefetch" href="/assets/index.html-bcd36fbb.js" as="script"><link rel="prefetch" href="/assets/index.html-4eacff6a.js" as="script"><link rel="prefetch" href="/assets/index.html-0249a9ea.js" as="script"><link rel="prefetch" href="/assets/index.html-62180d80.js" as="script"><link rel="prefetch" href="/assets/index.html-2f209424.js" as="script"><link rel="prefetch" href="/assets/index.html-7dd65cdb.js" as="script"><link rel="prefetch" href="/assets/index.html-6fe7b0ab.js" as="script"><link rel="prefetch" href="/assets/index.html-ca3c7c38.js" as="script"><link rel="prefetch" href="/assets/index.html-f411bcdb.js" as="script"><link rel="prefetch" href="/assets/index.html-b2faa453.js" as="script"><link rel="prefetch" href="/assets/index.html-008c1cf8.js" as="script"><link rel="prefetch" href="/assets/index.html-7afcbd9f.js" as="script"><link rel="prefetch" href="/assets/index.html-50f37300.js" as="script"><link rel="prefetch" href="/assets/index.html-37b44e66.js" as="script"><link rel="prefetch" href="/assets/index.html-68c76944.js" as="script"><link rel="prefetch" href="/assets/index.html-c93cca86.js" as="script"><link rel="prefetch" href="/assets/index.html-e5858afe.js" as="script"><link rel="prefetch" href="/assets/index.html-3518fdfd.js" as="script"><link rel="prefetch" href="/assets/index.html-e2a451fc.js" as="script"><link rel="prefetch" href="/assets/index.html-f1a7b93e.js" as="script"><link rel="prefetch" href="/assets/index.html-41610527.js" as="script"><link rel="prefetch" href="/assets/index.html-e5df0240.js" as="script"><link rel="prefetch" href="/assets/index.html-e7254ae2.js" as="script"><link rel="prefetch" href="/assets/index.html-c0ce3f73.js" as="script"><link rel="prefetch" href="/assets/index.html-1949aea7.js" as="script"><link rel="prefetch" href="/assets/index.html-850f6c04.js" as="script"><link rel="prefetch" href="/assets/index.html-5c6b2784.js" as="script"><link rel="prefetch" href="/assets/index.html-8c9ee548.js" as="script"><link rel="prefetch" href="/assets/index.html-95e7a1dc.js" as="script"><link rel="prefetch" href="/assets/index.html-278bf2fc.js" as="script"><link rel="prefetch" href="/assets/index.html-c1f8610f.js" as="script"><link rel="prefetch" href="/assets/index.html-3058e711.js" as="script"><link rel="prefetch" href="/assets/index.html-5a5c39c2.js" as="script"><link rel="prefetch" href="/assets/index.html-b4cc63c2.js" as="script"><link rel="prefetch" href="/assets/index.html-703a5c52.js" as="script"><link rel="prefetch" href="/assets/index.html-f894906a.js" as="script"><link rel="prefetch" href="/assets/index.html-4c69d9ca.js" as="script"><link rel="prefetch" href="/assets/index.html-be6e95ed.js" as="script"><link rel="prefetch" href="/assets/index.html-44ce1d78.js" as="script"><link rel="prefetch" href="/assets/index.html-00e6b46c.js" as="script"><link rel="prefetch" href="/assets/index.html-dac7a817.js" as="script"><link rel="prefetch" href="/assets/index.html-ca920c59.js" as="script"><link rel="prefetch" href="/assets/index.html-bde7460a.js" as="script"><link rel="prefetch" href="/assets/index.html-540ae1e8.js" as="script"><link rel="prefetch" href="/assets/index.html-0421cb1b.js" as="script"><link rel="prefetch" href="/assets/index.html-23ac28de.js" as="script"><link rel="prefetch" href="/assets/index.html-7806bb80.js" as="script"><link rel="prefetch" href="/assets/index.html-346780bc.js" as="script"><link rel="prefetch" href="/assets/index.html-0e2519d5.js" as="script"><link rel="prefetch" href="/assets/index.html-83ed024f.js" as="script"><link rel="prefetch" href="/assets/index.html-0d3d5028.js" as="script"><link rel="prefetch" href="/assets/index.html-b7e57723.js" as="script"><link rel="prefetch" href="/assets/index.html-25266e9c.js" as="script"><link rel="prefetch" href="/assets/index.html-8afb1ced.js" as="script"><link rel="prefetch" href="/assets/index.html-82370b0e.js" as="script"><link rel="prefetch" href="/assets/index.html-ad5af630.js" as="script"><link rel="prefetch" href="/assets/index.html-e4069176.js" as="script"><link rel="prefetch" href="/assets/index.html-bb4326e1.js" as="script"><link rel="prefetch" href="/assets/index.html-61fbd7f4.js" as="script"><link rel="prefetch" href="/assets/index.html-514f599b.js" as="script"><link rel="prefetch" href="/assets/index.html-dcfe79d5.js" as="script"><link rel="prefetch" href="/assets/index.html-f07cf8de.js" as="script"><link rel="prefetch" href="/assets/index.html-8c86f39b.js" as="script"><link rel="prefetch" href="/assets/index.html-7130285f.js" as="script"><link rel="prefetch" href="/assets/index.html-43523e66.js" as="script"><link rel="prefetch" href="/assets/index.html-50e76aa8.js" as="script"><link rel="prefetch" href="/assets/index.html-b074a3c7.js" as="script"><link rel="prefetch" href="/assets/index.html-96c80d1f.js" as="script"><link rel="prefetch" href="/assets/index.html-fd25f505.js" as="script"><link rel="prefetch" href="/assets/index.html-3da0d2af.js" as="script"><link rel="prefetch" href="/assets/index.html-40fc8369.js" as="script"><link rel="prefetch" href="/assets/index.html-916ffa74.js" as="script"><link rel="prefetch" href="/assets/index.html-d6cb760a.js" as="script"><link rel="prefetch" href="/assets/index.html-cc74056f.js" as="script"><link rel="prefetch" href="/assets/index.html-641bee86.js" as="script"><link rel="prefetch" href="/assets/index.html-c3963412.js" as="script"><link rel="prefetch" href="/assets/index.html-a8c989e8.js" as="script"><link rel="prefetch" href="/assets/index.html-1561c2d3.js" as="script"><link rel="prefetch" href="/assets/index.html-de9f1668.js" as="script"><link rel="prefetch" href="/assets/index.html-c1464d19.js" as="script"><link rel="prefetch" href="/assets/index.html-649d8a69.js" as="script"><link rel="prefetch" href="/assets/index.html-1a1be84b.js" as="script"><link rel="prefetch" href="/assets/index.html-d79fa890.js" as="script"><link rel="prefetch" href="/assets/index.html-cd0ae63d.js" as="script"><link rel="prefetch" href="/assets/index.html-3d80e4da.js" as="script"><link rel="prefetch" href="/assets/index.html-e6fccf69.js" as="script"><link rel="prefetch" href="/assets/index.html-60d5ed56.js" as="script"><link rel="prefetch" href="/assets/index.html-e39069f9.js" as="script"><link rel="prefetch" href="/assets/index.html-fca63887.js" as="script"><link rel="prefetch" href="/assets/index.html-c2ac7638.js" as="script"><link rel="prefetch" href="/assets/index.html-9c8abbcf.js" as="script"><link rel="prefetch" href="/assets/index.html-03f9bcdd.js" as="script"><link rel="prefetch" href="/assets/index.html-87667979.js" as="script"><link rel="prefetch" href="/assets/index.html-89589837.js" as="script"><link rel="prefetch" href="/assets/index.html-4c5101ae.js" as="script"><link rel="prefetch" href="/assets/index.html-fa8973a0.js" as="script"><link rel="prefetch" href="/assets/index.html-b01e3719.js" as="script"><link rel="prefetch" href="/assets/index.html-60dfadf0.js" as="script"><link rel="prefetch" href="/assets/index.html-2b079c99.js" as="script"><link rel="prefetch" href="/assets/index.html-9806b030.js" as="script"><link rel="prefetch" href="/assets/index.html-85e67108.js" as="script"><link rel="prefetch" href="/assets/index.html-ec2bd4b7.js" as="script"><link rel="prefetch" href="/assets/index.html-525a5a63.js" as="script"><link rel="prefetch" href="/assets/index.html-ed56cb33.js" as="script"><link rel="prefetch" href="/assets/index.html-70d0f40d.js" as="script"><link rel="prefetch" href="/assets/index.html-33b02c89.js" as="script"><link rel="prefetch" href="/assets/index.html-cb0eaa79.js" as="script"><link rel="prefetch" href="/assets/index.html-c36d1d1e.js" as="script"><link rel="prefetch" href="/assets/index.html-1db6908d.js" as="script"><link rel="prefetch" href="/assets/index.html-a456ded8.js" as="script"><link rel="prefetch" href="/assets/index.html-3401eaa2.js" as="script"><link rel="prefetch" href="/assets/index.html-8310b5d8.js" as="script"><link rel="prefetch" href="/assets/index.html-455f5253.js" as="script"><link rel="prefetch" href="/assets/index.html-18be38b4.js" as="script"><link rel="prefetch" href="/assets/index.html-276e8b83.js" as="script"><link rel="prefetch" href="/assets/index.html-19091f42.js" as="script"><link rel="prefetch" href="/assets/index.html-288eec25.js" as="script"><link rel="prefetch" href="/assets/index.html-dd72154a.js" as="script"><link rel="prefetch" href="/assets/index.html-8cae6860.js" as="script"><link rel="prefetch" href="/assets/index.html-2d39d65b.js" as="script"><link rel="prefetch" href="/assets/index.html-7fb19805.js" as="script"><link rel="prefetch" href="/assets/index.html-a004db2e.js" as="script"><link rel="prefetch" href="/assets/index.html-b93c437a.js" as="script"><link rel="prefetch" href="/assets/index.html-40da67b5.js" as="script"><link rel="prefetch" href="/assets/index.html-039dae71.js" as="script"><link rel="prefetch" href="/assets/index.html-6a79a564.js" as="script"><link rel="prefetch" href="/assets/index.html-0b3ba0cc.js" as="script"><link rel="prefetch" href="/assets/index.html-24750256.js" as="script"><link rel="prefetch" href="/assets/index.html-156fe4c9.js" as="script"><link rel="prefetch" href="/assets/index.html-95f53fb6.js" as="script"><link rel="prefetch" href="/assets/index.html-0798b1a4.js" as="script"><link rel="prefetch" href="/assets/index.html-b9aa8d5a.js" as="script"><link rel="prefetch" href="/assets/index.html-148b0ad0.js" as="script"><link rel="prefetch" href="/assets/index.html-0fb8d31f.js" as="script"><link rel="prefetch" href="/assets/index.html-2cc7165e.js" as="script"><link rel="prefetch" href="/assets/index.html-37ca61ac.js" as="script"><link rel="prefetch" href="/assets/index.html-d8af78fc.js" as="script"><link rel="prefetch" href="/assets/index.html-cfb0e06b.js" as="script"><link rel="prefetch" href="/assets/index.html-b0649cd7.js" as="script"><link rel="prefetch" href="/assets/index.html-41263b46.js" as="script"><link rel="prefetch" href="/assets/index.html-f14826f9.js" as="script"><link rel="prefetch" href="/assets/index.html-6f421c05.js" as="script"><link rel="prefetch" href="/assets/index.html-e83cbf28.js" as="script"><link rel="prefetch" href="/assets/index.html-bec752f9.js" as="script"><link rel="prefetch" href="/assets/index.html-bf37c968.js" as="script"><link rel="prefetch" href="/assets/index.html-4e505d87.js" as="script"><link rel="prefetch" href="/assets/index.html-29393571.js" as="script"><link rel="prefetch" href="/assets/index.html-7bf64aa1.js" as="script"><link rel="prefetch" href="/assets/index.html-fa6fc714.js" as="script"><link rel="prefetch" href="/assets/index.html-b3975f45.js" as="script"><link rel="prefetch" href="/assets/index.html-00b030d3.js" as="script"><link rel="prefetch" href="/assets/index.html-254dcddd.js" as="script"><link rel="prefetch" href="/assets/index.html-cf0741cf.js" as="script"><link rel="prefetch" href="/assets/index.html-7d40580b.js" as="script"><link rel="prefetch" href="/assets/index.html-3e5fc941.js" as="script"><link rel="prefetch" href="/assets/index.html-a48e6a82.js" as="script"><link rel="prefetch" href="/assets/index.html-14734ff4.js" as="script"><link rel="prefetch" href="/assets/index.html-5049b0d8.js" as="script"><link rel="prefetch" href="/assets/index.html-cf8c46a4.js" as="script"><link rel="prefetch" href="/assets/index.html-d2183a50.js" as="script"><link rel="prefetch" href="/assets/index.html-f8079c99.js" as="script"><link rel="prefetch" href="/assets/index.html-1908d737.js" as="script"><link rel="prefetch" href="/assets/index.html-39948514.js" as="script"><link rel="prefetch" href="/assets/index.html-9b34f4a0.js" as="script"><link rel="prefetch" href="/assets/index.html-42ec3d71.js" as="script"><link rel="prefetch" href="/assets/index.html-6f413df4.js" as="script"><link rel="prefetch" href="/assets/index.html-bf917f41.js" as="script"><link rel="prefetch" href="/assets/index.html-572f0cee.js" as="script"><link rel="prefetch" href="/assets/index.html-a1ccfba6.js" as="script"><link rel="prefetch" href="/assets/index.html-817f111d.js" as="script"><link rel="prefetch" href="/assets/index.html-dbd8c5a0.js" as="script"><link rel="prefetch" href="/assets/index.html-a372f6af.js" as="script"><link rel="prefetch" href="/assets/index.html-4405e52a.js" as="script"><link rel="prefetch" href="/assets/index.html-c04efe27.js" as="script"><link rel="prefetch" href="/assets/index.html-741c5a50.js" as="script"><link rel="prefetch" href="/assets/index.html-a1af8aaa.js" as="script"><link rel="prefetch" href="/assets/index.html-2732d0ce.js" as="script"><link rel="prefetch" href="/assets/index.html-86d609f8.js" as="script"><link rel="prefetch" href="/assets/index.html-a24a6a21.js" as="script"><link rel="prefetch" href="/assets/index.html-1e98eb58.js" as="script"><link rel="prefetch" href="/assets/index.html-06ad273e.js" as="script"><link rel="prefetch" href="/assets/index.html-568474e5.js" as="script"><link rel="prefetch" href="/assets/index.html-9aaa40d3.js" as="script"><link rel="prefetch" href="/assets/index.html-a80cfae2.js" as="script"><link rel="prefetch" href="/assets/index.html-481c5485.js" as="script"><link rel="prefetch" href="/assets/index.html-137740f8.js" as="script"><link rel="prefetch" href="/assets/index.html-278c91a2.js" as="script"><link rel="prefetch" href="/assets/index.html-c7f4da3c.js" as="script"><link rel="prefetch" href="/assets/index.html-4a47b895.js" as="script"><link rel="prefetch" href="/assets/index.html-65fbe5e1.js" as="script"><link rel="prefetch" href="/assets/index.html-51ca91ff.js" as="script"><link rel="prefetch" href="/assets/index.html-6af160e1.js" as="script"><link rel="prefetch" href="/assets/index.html-ecd410c1.js" as="script"><link rel="prefetch" href="/assets/index.html-59f7b1b9.js" as="script"><link rel="prefetch" href="/assets/index.html-f928645d.js" as="script"><link rel="prefetch" href="/assets/index.html-6b5250be.js" as="script"><link rel="prefetch" href="/assets/index.html-4eae8352.js" as="script"><link rel="prefetch" href="/assets/index.html-76df2f6e.js" as="script"><link rel="prefetch" href="/assets/index.html-939434ac.js" as="script"><link rel="prefetch" href="/assets/index.html-0abeb98c.js" as="script"><link rel="prefetch" href="/assets/index.html-368acc29.js" as="script"><link rel="prefetch" href="/assets/index.html-28e8f4b6.js" as="script"><link rel="prefetch" href="/assets/index.html-a22f1f38.js" as="script"><link rel="prefetch" href="/assets/index.html-5fb9c629.js" as="script"><link rel="prefetch" href="/assets/index.html-804ca543.js" as="script"><link rel="prefetch" href="/assets/index.html-c809681d.js" as="script"><link rel="prefetch" href="/assets/index.html-799a42de.js" as="script"><link rel="prefetch" href="/assets/index.html-9a1b51ae.js" as="script"><link rel="prefetch" href="/assets/index.html-b5b7e4b8.js" as="script"><link rel="prefetch" href="/assets/giscus-16d370b8.js" as="script"><link rel="prefetch" href="/assets/auto-ba5ecab5.js" as="script"><link rel="prefetch" href="/assets/index-b03bef79.js" as="script"><link rel="prefetch" href="/assets/flowchart-35969cab.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-95585b94.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-a794bb63.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-d92a2fc9.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-224f94d9.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-e5069ce0.js" as="script"><link rel="prefetch" href="/assets/search.esm-2c3fba7d.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-a50d0e7d.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-36cd6c3c.js" as="script"><link rel="prefetch" href="/assets/SearchResult-0d18d72e.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button type="button" class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo.svg" alt="lyf blog"><!----><span class="site-name hide-in-pad">lyf blog</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="笔记"><span class="title"><span class="font-icon icon iconfont icon-note" style=""></span>笔记</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/java/" class="nav-link" aria-label="JavaSE"><span class="font-icon icon iconfont icon-java" style=""></span>JavaSE<!----></a></li><li class="dropdown-item"><a href="/notes/front/" class="nav-link" aria-label="前端"><span class="font-icon icon iconfont icon-vue" style=""></span>前端<!----></a></li><li class="dropdown-item"><a href="/notes/ssm/" class="nav-link active" aria-label="SSM"><span class="font-icon icon iconfont icon-java" style=""></span>SSM<!----></a></li><li class="dropdown-item"><a href="/notes/database/" class="nav-link" aria-label="数据库"><span class="font-icon icon iconfont icon-mysql" style=""></span>数据库<!----></a></li><li class="dropdown-item"><a href="/notes/cloud/" class="nav-link" aria-label="微服务"><span class="font-icon icon iconfont icon-java" style=""></span>微服务<!----></a></li><li class="dropdown-item"><a href="/notes/tools/" class="nav-link" aria-label="开发工具"><span class="font-icon icon iconfont icon-tool" style=""></span>开发工具<!----></a></li><li class="dropdown-item"><a href="/notes/project/" class="nav-link" aria-label="项目"><span class="font-icon icon iconfont icon-workingDirectory" style=""></span>项目<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="面试指南"><span class="title"><span class="font-icon icon iconfont icon-java" style=""></span>面试指南</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/interview/javabase/" class="nav-link" aria-label="Java基础"><span class="font-icon icon iconfont icon-java" style=""></span>Java基础<!----></a></li><li class="dropdown-item"><a href="/interview/database/" class="nav-link" aria-label="数据库"><span class="font-icon icon iconfont icon-mysql" style=""></span>数据库<!----></a></li><li class="dropdown-item"><a href="/interview/ssm/" class="nav-link" aria-label="常用框架"><span class="font-icon icon iconfont icon-java" style=""></span>常用框架<!----></a></li><li class="dropdown-item"><a href="/interview/cloud/" class="nav-link" aria-label="微服务"><span class="font-icon icon iconfont icon-es6" style=""></span>微服务<!----></a></li><li class="dropdown-item"><a href="/interview/computer/" class="nav-link" aria-label="计算机原理"><span class="font-icon icon iconfont icon-computer" style=""></span>计算机原理<!----></a></li><li class="dropdown-item"><a href="/interview/windows/" class="nav-link" aria-label="windows相关"><span class="font-icon icon iconfont icon-computer" style=""></span>windows相关<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="其它"><span class="title"><span class="font-icon icon iconfont icon-others" style=""></span>其它</span><span class="arrow"></span><ul class="nav-dropdown"></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/label/" class="nav-link" aria-label="书签"><span class="font-icon icon iconfont icon-tool" style=""></span>书签<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/lyf110/lyf110.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" class="outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="placeholder">搜索</div><div class="key-hints"><kbd class="key">Ctrl</kbd><kbd class="key">K</kbd></div></button><!--]--><!--[--><!----><!--]--><button type="button" class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-java" style=""></span><span class="title">Java基础</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-vue" style=""></span><span class="title">前端</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active" type="button"><span class="font-icon icon iconfont icon-java" style=""></span><span class="title">常用框架</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><!----><span class="title">Mybatis</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><!----><span class="title">Mybatis Plus</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active" type="button"><!----><span class="title">Spring</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable active" type="button"><!----><span class="title">Spring49</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/notes/ssm/spring/spring49/01_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-%E5%AE%B9%E5%99%A8%E4%B8%8Ebean.html" class="nav-link sidebar-link sidebar-page" aria-label="一、Spring高级49讲-容器与Bean"><!---->一、Spring高级49讲-容器与Bean<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/ssm/spring/spring49/02_Spring-%E9%AB%98%E7%BA%A749%E8%AE%B2-AOP.html" class="nav-link sidebar-link sidebar-page" aria-label="二、Spring高级49讲-AOP相关"><!---->二、Spring高级49讲-AOP相关<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/ssm/spring/spring49/03_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-WEB.html" class="nav-link sidebar-link sidebar-page" aria-label="三、Spring高级49讲-WEB相关"><!---->三、Spring高级49讲-WEB相关<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="四、Spring高级49讲-SpringBoot相关"><!---->四、Spring高级49讲-SpringBoot相关<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_37-boot-骨架项目" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="37 Boot 骨架项目"><!---->37 Boot 骨架项目<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_38-boot-war项目" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="38 Boot War项目"><!---->38 Boot War项目<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_38-1-测试" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="38.1 测试"><!---->38.1 测试<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_38-2-启示" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="38.2 启示"><!---->38.2 启示<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_39-boot-启动过程" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="39 Boot 启动过程"><!---->39 Boot 启动过程<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_39-1-阶段一-springapplication-构造" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="39.1 阶段一：SpringApplication 构造"><!---->39.1 阶段一：SpringApplication 构造<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_39-2-阶段二-执行-run-方法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="39.2 阶段二：执行 run 方法"><!---->39.2 阶段二：执行 run 方法<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_39-3-演示-启动过程" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="39.3 演示 - 启动过程"><!---->39.3 演示 - 启动过程<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_39-4-org-springframework-boot-springapplication-run-java-lang-string-源码解读" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="39.4 org.springframework.boot.SpringApplication#run(java.lang.String...) 源码解读"><!---->39.4 org.springframework.boot.SpringApplication#run(java.lang.String...) 源码解读<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_39-5-收获💡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="39.5 收获💡"><!---->39.5 收获💡<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_40-tomcat-内嵌容器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="40 Tomcat 内嵌容器"><!---->40 Tomcat 内嵌容器<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_40-1-tomcat-基本结构" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="40.1 Tomcat 基本结构"><!---->40.1 Tomcat 基本结构<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_40-2-演示1-tomcat-内嵌容器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="40.2 演示1 - Tomcat 内嵌容器"><!---->40.2 演示1 - Tomcat 内嵌容器<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_40-3-演示2-集成-spring-容器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="40.3 演示2 - 集成 Spring 容器"><!---->40.3 演示2 - 集成 Spring 容器<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_40-4-完整代码" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="40.4 完整代码"><!---->40.4 完整代码<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_41-boot-自动配置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="41 Boot 自动配置"><!---->41 Boot 自动配置<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_1-测试第三方导入配置注册的bean和导入本项目配置注册bean的注册时机" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1 测试第三方导入配置注册的bean和导入本项目配置注册bean的注册时机"><!---->1 测试第三方导入配置注册的bean和导入本项目配置注册bean的注册时机<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_2-aopautoconfiguration" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2 AopAutoConfiguration"><!---->2 AopAutoConfiguration<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_3-datasourceautoconfiguration" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3 DataSourceAutoConfiguration"><!---->3 DataSourceAutoConfiguration<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_4-mybatisautoconfiguration" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4 MybatisAutoConfiguration"><!---->4 MybatisAutoConfiguration<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_5-transactionautoconfiguration" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5 TransactionAutoConfiguration"><!---->5 TransactionAutoConfiguration<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_6-wvc-自动配置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6 WVC 自动配置"><!---->6 WVC 自动配置<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_7-演示-自动配置类原理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7 演示 - 自动配置类原理"><!---->7 演示 - 自动配置类原理<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_42-条件装配底层" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="42 条件装配底层"><!---->42 条件装配底层<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_1-测试代码1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1 测试代码1"><!---->1 测试代码1<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_2-测试代码2" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2 测试代码2"><!---->2 测试代码2<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_3-总结" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3 总结"><!---->3 总结<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_4-收获💡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4 收获💡"><!---->4 收获💡<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/notes/ssm/spring/spring49/05_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-%E5%85%B6%E5%AE%83.html" class="nav-link sidebar-link sidebar-page" aria-label="五、Spring高级49讲-其它部分"><!---->五、Spring高级49讲-其它部分<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><!----><span class="title">Spring66</span><span class="arrow end"></span></button><!----></section></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><!----><span class="title">Springboot</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><!----><span class="title">Springmvc</span><span class="arrow end"></span></button><!----></section></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-mysql" style=""></span><span class="title">数据库</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-tool" style=""></span><span class="title">开发工具</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-es6" style=""></span><span class="title">微服务</span><span class="arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->四、Spring高级49讲-SpringBoot相关</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">liu yang fang</span></span><span property="author" content="liu yang fang"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-04-03T15:51:46.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 51 分钟</span><meta property="timeRequired" content="PT51M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category4 clickable" role="navigation">ssm</span><span class="page-category-item category1 clickable" role="navigation">Spring</span><span class="page-category-item category4 clickable" role="navigation">Spring高级</span><span class="page-category-item category1 clickable" role="navigation">源码剖析</span><meta property="articleSection" content="ssm,Spring,Spring高级,源码剖析"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag4 clickable" role="navigation">ssm</span><span class="page-tag-item tag1 clickable" role="navigation">Spring</span><span class="page-tag-item tag4 clickable" role="navigation">Spring高级</span><span class="page-tag-item tag1 clickable" role="navigation">源码剖析</span><meta property="keywords" content="ssm,Spring,Spring高级,源码剖析"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_37-boot-骨架项目" class="router-link-active router-link-exact-active toc-link level2">37 Boot 骨架项目</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_38-boot-war项目" class="router-link-active router-link-exact-active toc-link level2">38 Boot War项目</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_38-1-测试" class="router-link-active router-link-exact-active toc-link level3">38.1 测试</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_38-2-启示" class="router-link-active router-link-exact-active toc-link level3">38.2 启示</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_39-boot-启动过程" class="router-link-active router-link-exact-active toc-link level2">39 Boot 启动过程</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_39-1-阶段一-springapplication-构造" class="router-link-active router-link-exact-active toc-link level3">39.1 阶段一：SpringApplication 构造</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_39-2-阶段二-执行-run-方法" class="router-link-active router-link-exact-active toc-link level3">39.2 阶段二：执行 run 方法</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_39-3-演示-启动过程" class="router-link-active router-link-exact-active toc-link level3">39.3 演示 - 启动过程</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_39-4-org-springframework-boot-springapplication-run-java-lang-string-源码解读" class="router-link-active router-link-exact-active toc-link level3">39.4 org.springframework.boot.SpringApplication#run(java.lang.String...) 源码解读</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_39-5-收获💡" class="router-link-active router-link-exact-active toc-link level3">39.5 收获💡</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_40-tomcat-内嵌容器" class="router-link-active router-link-exact-active toc-link level2">40 Tomcat 内嵌容器</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_40-1-tomcat-基本结构" class="router-link-active router-link-exact-active toc-link level3">40.1 Tomcat 基本结构</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_40-2-演示1-tomcat-内嵌容器" class="router-link-active router-link-exact-active toc-link level3">40.2 演示1 - Tomcat 内嵌容器</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_40-3-演示2-集成-spring-容器" class="router-link-active router-link-exact-active toc-link level3">40.3 演示2 - 集成 Spring 容器</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_40-4-完整代码" class="router-link-active router-link-exact-active toc-link level3">40.4 完整代码</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_41-boot-自动配置" class="router-link-active router-link-exact-active toc-link level2">41 Boot 自动配置</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_1-测试第三方导入配置注册的bean和导入本项目配置注册bean的注册时机" class="router-link-active router-link-exact-active toc-link level3">1 测试第三方导入配置注册的bean和导入本项目配置注册bean的注册时机</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_2-aopautoconfiguration" class="router-link-active router-link-exact-active toc-link level3">2 AopAutoConfiguration</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_3-datasourceautoconfiguration" class="router-link-active router-link-exact-active toc-link level3">3 DataSourceAutoConfiguration</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_4-mybatisautoconfiguration" class="router-link-active router-link-exact-active toc-link level3">4 MybatisAutoConfiguration</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_5-transactionautoconfiguration" class="router-link-active router-link-exact-active toc-link level3">5 TransactionAutoConfiguration</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_6-wvc-自动配置" class="router-link-active router-link-exact-active toc-link level3">6 WVC 自动配置</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_7-演示-自动配置类原理" class="router-link-active router-link-exact-active toc-link level3">7 演示 - 自动配置类原理</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_42-条件装配底层" class="router-link-active router-link-exact-active toc-link level2">42 条件装配底层</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_1-测试代码1" class="router-link-active router-link-exact-active toc-link level3">1 测试代码1</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_2-测试代码2" class="router-link-active router-link-exact-active toc-link level3">2 测试代码2</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_3-总结" class="router-link-active router-link-exact-active toc-link level3">3 总结</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/ssm/spring/spring49/04_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-SpringBoot%E7%9B%B8%E5%85%B3.html#_4-收获💡" class="router-link-active router-link-exact-active toc-link level3">4 收获💡</a></li><!----><!--]--></ul></li><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="_1-boot创建与启动" tabindex="-1"><a class="header-anchor" href="#_1-boot创建与启动" aria-hidden="true">#</a> 1 Boot创建与启动</h1><h2 id="_37-boot-骨架项目" tabindex="-1"><a class="header-anchor" href="#_37-boot-骨架项目" aria-hidden="true">#</a> 37 Boot 骨架项目</h2><p>如果是 linux 环境，用以下命令即可获取 spring boot 的骨架 pom.xml</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-G</span> https://start.spring.io/pom.xml <span class="token parameter variable">-d</span> <span class="token assign-left variable">dependencies</span><span class="token operator">=</span>web,mysql,mybatis <span class="token parameter variable">-o</span> pom.xml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>也可以使用 Postman 等工具实现</p><p>若想获取更多用法，请参考</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> https://start.spring.io
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_38-boot-war项目" tabindex="-1"><a class="header-anchor" href="#_38-boot-war项目" aria-hidden="true">#</a> 38 Boot War项目</h2><p>步骤1：创建模块，区别在于打包方式选择 war</p><img src="/assets/202212151232121-9c600be1.png" alt="image-20211021160145072" style="zoom:50%;"><p>接下来勾选 Spring Web 支持</p><img src="/assets/202212151232052-af5e9b23.png" alt="image-20211021162416525" style="zoom:50%;"><p>步骤2：编写控制器</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">abc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;进入了控制器&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>步骤3：编写 jsp 视图，新建 webapp 目录和一个 hello.jsp 文件，注意文件名与控制器方法返回的视图逻辑名一致</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>src
	|- main
		|- java
		|- resources
		|- webapp
			|- hello.jsp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>步骤4：配置视图路径，打开 application.properties 文件</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">spring.mvc.view.prefix</span><span class="token punctuation">=</span><span class="token value attr-value">/</span>
<span class="token key attr-name">spring.mvc.view.suffix</span><span class="token punctuation">=</span><span class="token value attr-value">.jsp</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>将来 prefix + 控制器方法返回值 + suffix 即为视图完整路径</p></blockquote><h3 id="_38-1-测试" tabindex="-1"><a class="header-anchor" href="#_38-1-测试" aria-hidden="true">#</a> 38.1 测试</h3><p>如果用 mvn 插件 <code>mvn spring-boot:run</code> 或 main 方法测试</p><ul><li>必须添加如下依赖，因为此时用的还是内嵌 tomcat，而内嵌 tomcat 默认不带 jasper（用来解析 jsp）</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.tomcat.embed<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>tomcat-embed-jasper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>也可以使用 Idea 配置 tomcat 来测试，此时用的是外置 tomcat</p><ul><li>骨架生成的代码中，多了一个 ServletInitializer，它的作用就是配置外置 Tomcat 使用的，在外置 Tomcat 启动后，去调用它创建和运行 SpringApplication</li></ul><h3 id="_38-2-启示" tabindex="-1"><a class="header-anchor" href="#_38-2-启示" aria-hidden="true">#</a> 38.2 启示</h3><p>对于 jar 项目，若要支持 jsp，也可以在加入 jasper 依赖的前提下，把 jsp 文件置入 <code>META-INF/resources</code></p><h2 id="_39-boot-启动过程" tabindex="-1"><a class="header-anchor" href="#_39-boot-启动过程" aria-hidden="true">#</a> 39 Boot 启动过程</h2><h3 id="_39-1-阶段一-springapplication-构造" tabindex="-1"><a class="header-anchor" href="#_39-1-阶段一-springapplication-构造" aria-hidden="true">#</a> 39.1 阶段一：SpringApplication 构造</h3><ol><li>记录 BeanDefinition 源</li><li>推断应用类型</li><li>记录 ApplicationContext 初始化器</li><li>记录监听器</li><li>推断主启动类</li></ol><h3 id="_39-2-阶段二-执行-run-方法" tabindex="-1"><a class="header-anchor" href="#_39-2-阶段二-执行-run-方法" aria-hidden="true">#</a> 39.2 阶段二：执行 run 方法</h3><ol><li><p>得到 SpringApplicationRunListeners，名字取得不好，实际是事件发布器</p><ul><li>发布 application starting 事件1️⃣</li></ul></li><li><p>封装启动 args</p></li><li><p>准备 Environment 添加命令行参数（*）</p></li><li><p>ConfigurationPropertySources 处理（*）</p><ul><li>发布 application environment 已准备事件2️⃣</li></ul></li><li><p>通过 EnvironmentPostProcessorApplicationListener 进行 env 后处理（*）</p><ul><li>application.properties，由 StandardConfigDataLocationResolver 解析</li><li>spring.application.json</li></ul></li><li><p>绑定 spring.main 到 SpringApplication 对象（*）</p></li><li><p>打印 banner（*）</p></li><li><p>创建容器</p></li><li><p>准备容器</p><ul><li>发布 application context 已初始化事件3️⃣</li></ul></li><li><p>加载 bean 定义</p><ul><li>发布 application prepared 事件4️⃣</li></ul></li><li><p>refresh 容器</p><ul><li>发布 application started 事件5️⃣</li></ul></li><li><p>执行 runner</p><ul><li><p>发布 application ready 事件6️⃣</p></li><li><p>这其中有异常，发布 application failed 事件7️⃣</p></li></ul></li></ol><blockquote><p>带 * 的有独立的示例</p></blockquote><h3 id="_39-3-演示-启动过程" tabindex="-1"><a class="header-anchor" href="#_39-3-演示-启动过程" aria-hidden="true">#</a> 39.3 演示 - 启动过程</h3><h4 id="_39-3-1-springapplication的构造" tabindex="-1"><a class="header-anchor" href="#_39-3-1-springapplication的构造" aria-hidden="true">#</a> 39.3.1 SpringApplication的构造</h4><ol><li>记录 BeanDefinition 源</li><li>推断应用类型</li><li>记录 ApplicationContext 初始化器</li><li>记录监听器</li><li>推断主启动类</li></ol><h5 id="_1-b01-xml" tabindex="-1"><a class="header-anchor" href="#_1-b01-xml" aria-hidden="true">#</a> 1 b01.xml</h5><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bean1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.itheima.boot.a39.test.TestSpringApplicationConstruct.Bean1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-测试代码" tabindex="-1"><a class="header-anchor" href="#_2-测试代码" aria-hidden="true">#</a> 2 测试代码</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">ConfigurableListableBeanFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">WebApplicationType</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>web<span class="token punctuation">.</span>embedded<span class="token punctuation">.</span>tomcat<span class="token punctuation">.</span></span><span class="token class-name">TomcatServletWebServerFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ConfigurableApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">GenericApplicationContext</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashSet</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> TestSpringApplicationConstruct
 * <span class="token keyword">@description</span>
 * <span class="token keyword">@since</span> 2022/12/15 12:38
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSpringApplicationConstruct</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span> springApplication <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">(</span><span class="token class-name">TestSpringApplicationConstruct</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 1. 记录 BeanDefinition 源</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;1. 记录 BeanDefinition 源&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        springApplication<span class="token punctuation">.</span><span class="token function">setSources</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonList</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:b01.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2. 推断应用类型</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;2. 推断应用类型&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Method</span> deduceFromClasspath <span class="token operator">=</span> <span class="token class-name">WebApplicationType</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">&quot;deduceFromClasspath&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        deduceFromClasspath<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> result <span class="token operator">=</span> deduceFromClasspath<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;\t应用类型: %s\n&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 3. 记录 ApplicationContext 初始化器</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;3. 记录 ApplicationContext 初始化器&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        springApplication<span class="token punctuation">.</span><span class="token function">addInitializers</span><span class="token punctuation">(</span>applicationContext <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>applicationContext <span class="token keyword">instanceof</span> <span class="token class-name">GenericApplicationContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">GenericApplicationContext</span><span class="token punctuation">)</span> applicationContext<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">registerBean</span><span class="token punctuation">(</span><span class="token string">&quot;bean3&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Bean3</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 4. 记录监听器</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;4. 记录监听器&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        springApplication<span class="token punctuation">.</span><span class="token function">addListeners</span><span class="token punctuation">(</span>event <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;\t监听事件, 事件类型为: %s\n&quot;</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 5. 推断主启动类</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;5. 推断主启动类&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Method</span> deduceMainApplicationClass <span class="token operator">=</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">&quot;deduceMainApplicationClass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        deduceMainApplicationClass<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> deduceMainApplicationClass<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>springApplication<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;\t主启动类为: %s\n&quot;</span><span class="token punctuation">,</span> clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 启动Spring Boot程序</span>
        <span class="token class-name">ConfigurableApplicationContext</span> applicationContext <span class="token operator">=</span> springApplication<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ConfigurableListableBeanFactory</span> beanFactory <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 打印bean的来源</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> beanDefinitionName <span class="token operator">:</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;name: %s, 来源: %s\n&quot;</span><span class="token punctuation">,</span> beanDefinitionName<span class="token punctuation">,</span> beanFactory<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span>beanDefinitionName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 释放资源</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

         <span class="token comment">/*
            学到了什么
            a. SpringApplication 构造方法中所做的操作
                1. 可以有多种源用来加载 bean 定义
                2. 应用类型推断
                3. 容器初始化器
                4. 演示启动各阶段事件
                5. 演示主类推断
         */</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean1</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean2</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean3</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Bean2</span> <span class="token function">bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">TomcatServletWebServerFactory</span> <span class="token function">tomcatServletWebServerFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TomcatServletWebServerFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-测试结果" tabindex="-1"><a class="header-anchor" href="#_3-测试结果" aria-hidden="true">#</a> 3 测试结果</h5><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code><span class="token number">1</span><span class="token punctuation">.</span> 记录 BeanDefinition 源
<span class="token number">2</span><span class="token punctuation">.</span> 推断应用类型
	应用类型<span class="token punctuation">:</span> SERVLET
<span class="token number">3</span><span class="token punctuation">.</span> 记录 ApplicationContext 初始化器
<span class="token number">4</span><span class="token punctuation">.</span> 记录监听器
<span class="token number">5</span><span class="token punctuation">.</span> 推断主启动类
	主启动类为<span class="token punctuation">:</span> <span class="token keyword">class</span> com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>test<span class="token punctuation">.</span>TestSpringApplicationConstruct
	监听事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> <span class="token keyword">class</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>ApplicationStartingEvent
	监听事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> <span class="token keyword">class</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>ApplicationEnvironmentPreparedEvent

  <span class="token punctuation">.</span>   ____          _            __ _ _
 <span class="token operator">/</span>\\ <span class="token operator">/</span> ___&#39;_ __ _ <span class="token function">_</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span>_ __  __ _ \ \ \ \
<span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token punctuation">)</span>\___ <span class="token operator">|</span> &#39;_ <span class="token operator">|</span> &#39;_<span class="token operator">|</span> <span class="token operator">|</span> &#39;_ \<span class="token operator">/</span> _` <span class="token operator">|</span> \ \ \ \
 \\<span class="token operator">/</span>  ___<span class="token punctuation">)</span><span class="token operator">|</span> <span class="token operator">|</span>_<span class="token punctuation">)</span><span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">||</span> <span class="token punctuation">(</span>_<span class="token operator">|</span> <span class="token operator">|</span>  <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>
  &#39;  <span class="token operator">|</span>____<span class="token operator">|</span> <span class="token punctuation">.</span>__<span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>_\__<span class="token punctuation">,</span> <span class="token operator">|</span> <span class="token operator">/</span> <span class="token operator">/</span> <span class="token operator">/</span> <span class="token operator">/</span>
 <span class="token operator">=========|</span>_<span class="token operator">|==============|</span>___<span class="token operator">/=/</span>_<span class="token operator">/</span>_<span class="token operator">/</span>_<span class="token operator">/</span>
 <span class="token punctuation">:</span><span class="token punctuation">:</span> Spring Boot <span class="token punctuation">:</span><span class="token punctuation">:</span>                <span class="token punctuation">(</span>v2<span class="token number">.6</span><span class="token punctuation">.</span><span class="token number">7</span><span class="token punctuation">)</span>

	监听事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> <span class="token keyword">class</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>ApplicationContextInitializedEvent
<span class="token punctuation">[</span>INFO <span class="token punctuation">]</span> <span class="token number">14</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">:</span><span class="token number">00.482</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a<span class="token punctuation">.</span>t<span class="token punctuation">.</span>TestSpringApplicationConstruct <span class="token operator">-</span> Starting TestSpringApplicationConstruct using Java <span class="token number">1.8</span><span class="token punctuation">.</span><span class="token number">0_144</span> on lyf <span class="token keyword">with</span> PID <span class="token number">12144</span> <span class="token punctuation">(</span>C<span class="token punctuation">:</span>\DISH\JavaCode\java\gitee\liuyangfang\java<span class="token operator">-</span>face\spring<span class="token operator">-</span>demo\target\classes started by lyf in C<span class="token punctuation">:</span>\DISH\JavaCode\java\gitee\liuyangfang\java<span class="token operator">-</span>face<span class="token punctuation">)</span> 
<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token number">14</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">:</span><span class="token number">00.489</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a<span class="token punctuation">.</span>t<span class="token punctuation">.</span>TestSpringApplicationConstruct <span class="token operator">-</span> Running <span class="token keyword">with</span> Spring Boot v2<span class="token number">.6</span><span class="token punctuation">.</span><span class="token number">7</span><span class="token punctuation">,</span> Spring v5<span class="token number">.3</span><span class="token punctuation">.</span><span class="token number">19</span> 
<span class="token punctuation">[</span>INFO <span class="token punctuation">]</span> <span class="token number">14</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">:</span><span class="token number">00.489</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a<span class="token punctuation">.</span>t<span class="token punctuation">.</span>TestSpringApplicationConstruct <span class="token operator">-</span> No active profile set<span class="token punctuation">,</span> falling back to <span class="token number">1</span> <span class="token keyword">default</span> profile<span class="token punctuation">:</span> <span class="token string">&quot;default&quot;</span> 
	监听事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> <span class="token keyword">class</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>ApplicationPreparedEvent
<span class="token punctuation">[</span>INFO <span class="token punctuation">]</span> <span class="token number">14</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">:</span><span class="token number">01.268</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>b<span class="token punctuation">.</span>w<span class="token punctuation">.</span>e<span class="token punctuation">.</span>tomcat<span class="token punctuation">.</span>TomcatWebServer    <span class="token operator">-</span> Tomcat initialized <span class="token keyword">with</span> <span class="token function">port</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token number">8080</span> <span class="token punctuation">(</span>http<span class="token punctuation">)</span> 
<span class="token punctuation">[</span>INFO <span class="token punctuation">]</span> <span class="token number">14</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">:</span><span class="token number">01.281</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> o<span class="token punctuation">.</span>a<span class="token punctuation">.</span>coyote<span class="token punctuation">.</span>http11<span class="token punctuation">.</span>Http11NioProtocol <span class="token operator">-</span> Initializing ProtocolHandler <span class="token punctuation">[</span><span class="token string">&quot;http-nio-8080&quot;</span><span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO <span class="token punctuation">]</span> <span class="token number">14</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">:</span><span class="token number">01.281</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> o<span class="token punctuation">.</span>a<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>core<span class="token punctuation">.</span>StandardService   <span class="token operator">-</span> Starting service <span class="token punctuation">[</span>Tomcat<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO <span class="token punctuation">]</span> <span class="token number">14</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">:</span><span class="token number">01.281</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> o<span class="token punctuation">.</span>a<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>core<span class="token punctuation">.</span>StandardEngine    <span class="token operator">-</span> Starting Servlet engine<span class="token punctuation">:</span> <span class="token punctuation">[</span>Apache Tomcat<span class="token operator">/</span><span class="token number">9.0</span><span class="token punctuation">.</span><span class="token number">62</span><span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO <span class="token punctuation">]</span> <span class="token number">14</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">:</span><span class="token number">01.481</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> o<span class="token punctuation">.</span>a<span class="token punctuation">.</span>c<span class="token punctuation">.</span>c<span class="token punctuation">.</span>C<span class="token punctuation">.</span><span class="token punctuation">[</span>Tomcat<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>localhost<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token operator">/</span><span class="token punctuation">]</span>  <span class="token operator">-</span> Initializing Spring embedded WebApplicationContext 
<span class="token punctuation">[</span>INFO <span class="token punctuation">]</span> <span class="token number">14</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">:</span><span class="token number">01.481</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>b<span class="token punctuation">.</span>w<span class="token punctuation">.</span>s<span class="token punctuation">.</span>c<span class="token punctuation">.</span>ServletWebServerApplicationContext <span class="token operator">-</span> Root WebApplicationContext<span class="token punctuation">:</span> initialization completed in <span class="token number">874</span> ms 
<span class="token punctuation">[</span>INFO <span class="token punctuation">]</span> <span class="token number">14</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">:</span><span class="token number">01.511</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> o<span class="token punctuation">.</span>a<span class="token punctuation">.</span>coyote<span class="token punctuation">.</span>http11<span class="token punctuation">.</span>Http11NioProtocol <span class="token operator">-</span> Starting ProtocolHandler <span class="token punctuation">[</span><span class="token string">&quot;http-nio-8080&quot;</span><span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO <span class="token punctuation">]</span> <span class="token number">14</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">:</span><span class="token number">01.531</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>b<span class="token punctuation">.</span>w<span class="token punctuation">.</span>e<span class="token punctuation">.</span>tomcat<span class="token punctuation">.</span>TomcatWebServer    <span class="token operator">-</span> Tomcat started on <span class="token function">port</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token number">8080</span> <span class="token punctuation">(</span>http<span class="token punctuation">)</span> <span class="token keyword">with</span> <span class="token keyword">context</span> path &#39;&#39; 
	监听事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> <span class="token keyword">class</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span>ServletWebServerInitializedEvent
	监听事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> <span class="token keyword">class</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>ContextRefreshedEvent
<span class="token punctuation">[</span>INFO <span class="token punctuation">]</span> <span class="token number">14</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">:</span><span class="token number">01.535</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a<span class="token punctuation">.</span>t<span class="token punctuation">.</span>TestSpringApplicationConstruct <span class="token operator">-</span> Started TestSpringApplicationConstruct in <span class="token number">1.492</span> seconds <span class="token punctuation">(</span>JVM running <span class="token keyword">for</span> <span class="token number">2.368</span><span class="token punctuation">)</span> 
	监听事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> <span class="token keyword">class</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>ApplicationStartedEvent
	监听事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> <span class="token keyword">class</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>availability<span class="token punctuation">.</span>AvailabilityChangeEvent
	监听事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> <span class="token keyword">class</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>ApplicationReadyEvent
	监听事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> <span class="token keyword">class</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>availability<span class="token punctuation">.</span>AvailabilityChangeEvent
name<span class="token punctuation">:</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>internalConfigurationAnnotationProcessor<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">null</span>
name<span class="token punctuation">:</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>internalAutowiredAnnotationProcessor<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">null</span>
name<span class="token punctuation">:</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>internalCommonAnnotationProcessor<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">null</span>
name<span class="token punctuation">:</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>internalEventListenerProcessor<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">null</span>
name<span class="token punctuation">:</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>internalEventListenerFactory<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">null</span>
name<span class="token punctuation">:</span> bean3<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">null</span>
name<span class="token punctuation">:</span> testSpringApplicationConstruct<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">null</span>
name<span class="token punctuation">:</span> bean1<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>b01<span class="token punctuation">.</span>xml<span class="token punctuation">]</span>
name<span class="token punctuation">:</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>internalCachingMetadataReaderFactory<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">null</span>
name<span class="token punctuation">:</span> bean2<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>test<span class="token punctuation">.</span>TestSpringApplicationConstruct
name<span class="token punctuation">:</span> tomcatServletWebServerFactory<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>test<span class="token punctuation">.</span>TestSpringApplicationConstruct
	监听事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> <span class="token keyword">class</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>availability<span class="token punctuation">.</span>AvailabilityChangeEvent
	监听事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> <span class="token keyword">class</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>ContextClosedEvent
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-对应的springapplication构造源码" tabindex="-1"><a class="header-anchor" href="#_4-对应的springapplication构造源码" aria-hidden="true">#</a> 4 对应的SpringApplication构造源码</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">(</span><span class="token class-name">ResourceLoader</span> resourceLoader<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> primarySources<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>resourceLoader <span class="token operator">=</span> resourceLoader<span class="token punctuation">;</span>
		<span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">notNull</span><span class="token punctuation">(</span>primarySources<span class="token punctuation">,</span> <span class="token string">&quot;PrimarySources must not be null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1 收集所有的BeanDefintion源</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>primarySources <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>primarySources<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2 推断应用类型</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>webApplicationType <span class="token operator">=</span> <span class="token class-name">WebApplicationType</span><span class="token punctuation">.</span><span class="token function">deduceFromClasspath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 3 记录ApplicationContext初始化器</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>bootstrapRegistryInitializers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
				<span class="token function">getSpringFactoriesInstances</span><span class="token punctuation">(</span><span class="token class-name">BootstrapRegistryInitializer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">setInitializers</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token punctuation">)</span> <span class="token function">getSpringFactoriesInstances</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContextInitializer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 4 记录监听器</span>
		<span class="token function">setListeners</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token punctuation">)</span> <span class="token function">getSpringFactoriesInstances</span><span class="token punctuation">(</span><span class="token class-name">ApplicationListener</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 5 推断主启动类</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>mainApplicationClass <span class="token operator">=</span> <span class="token function">deduceMainApplicationClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_39-3-2-执行run方法-获取七大事件" tabindex="-1"><a class="header-anchor" href="#_39-3-2-执行run方法-获取七大事件" aria-hidden="true">#</a> 39.3.2 执行run方法，获取七大事件</h4><ol><li>得到 SpringApplicationRunListeners，名字取得不好，实际是事件发布器 <ul><li>发布 application starting 事件1️⃣</li></ul></li></ol><h5 id="_1-测试代码" tabindex="-1"><a class="header-anchor" href="#_1-测试代码" aria-hidden="true">#</a> 1 测试代码</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">ConfigurableBootstrapContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">DefaultBootstrapContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplicationRunListener</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>event<span class="token punctuation">.</span></span><span class="token class-name">EventPublishingRunListener</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">GenericApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span><span class="token class-name">StandardEnvironment</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">SpringFactoriesLoader</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Constructor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">Duration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> TestSpringApplicationRunListener
 * <span class="token keyword">@description</span> 测试SpringApplication启动时执行run方法时的七大事件
 * <span class="token keyword">@since</span> 2022/12/15 14:23
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSpringApplicationRunListener</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// SpringApplicationRunListener</span>
        <span class="token class-name">SpringApplication</span> springApplication <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">(</span><span class="token class-name">TestSpringApplicationRunListener</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        springApplication<span class="token punctuation">.</span><span class="token function">addListeners</span><span class="token punctuation">(</span>event <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> name <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;org.springframework.boot.context.event.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;\t\t\t是run方法中发布的事件, 事件类型为: %s\n&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;\t是其它方法中发布的事件, 事件类型为: %s\n&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 1 拿到事件发布器</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> names <span class="token operator">=</span> <span class="token class-name">SpringFactoriesLoader</span><span class="token punctuation">.</span><span class="token function">loadFactoryNames</span><span class="token punctuation">(</span><span class="token class-name">SpringApplicationRunListener</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">TestSpringApplicationRunListener</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> name <span class="token operator">:</span> names<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">EventPublishingRunListener</span> publisher <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token class-name">GenericApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;name=%s\n&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// clazz.newInstance(); 这种只能调用无参的构造，但是</span>
            <span class="token comment">// org.springframework.boot.context.event.EventPublishingRunListener中没有无参构造</span>
            <span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> constructor <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 拿到事件发布器</span>
            publisher <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">EventPublishingRunListener</span><span class="token punctuation">)</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span>springApplication<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ConfigurableBootstrapContext</span> bootstrapContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultBootstrapContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 1 Spring Boot 开始启动事件</span>
            publisher<span class="token punctuation">.</span><span class="token function">starting</span><span class="token punctuation">(</span>bootstrapContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 2 发布Environment已准备好事件</span>
            <span class="token class-name">StandardEnvironment</span> environment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandardEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            publisher<span class="token punctuation">.</span><span class="token function">environmentPrepared</span><span class="token punctuation">(</span>bootstrapContext<span class="token punctuation">,</span> environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
            applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 3 在Spring容器创建好，并调用初始化器之后，发布此事件</span>
            publisher<span class="token punctuation">.</span><span class="token function">contextPrepared</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 4 所有的bean definition加载完毕之后发布此事件</span>
            publisher<span class="token punctuation">.</span><span class="token function">contextLoaded</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
            applicationContext<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Duration</span> timeTakenToStartup <span class="token operator">=</span> <span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofNanos</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 5 spring容器初始化完成（refresh方法调用完毕后发布此事件）</span>
            publisher<span class="token punctuation">.</span><span class="token function">started</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">,</span> timeTakenToStartup<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 6 SpringBoot 启动完毕之后发布此事件</span>
            <span class="token class-name">Duration</span> timeTakenToReady <span class="token operator">=</span> <span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofNanos</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
            publisher<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">,</span> timeTakenToReady<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 7 如果在启动的过程中出错则发布此事件</span>
            publisher<span class="token punctuation">.</span><span class="token function">failed</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;启动出错了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/*
                学到了什么
                a. 如何读取 spring.factories 中的配置
                b. run 方法内获取事件发布器 (得到 SpringApplicationRunListeners) 的过程, 对应步骤中
                    1.获取事件发布器
                    发布 application starting 事件1️⃣
                    发布 application environment 已准备事件2️⃣
                    发布 application context 已初始化事件3️⃣
                    发布 application prepared 事件4️⃣
                    发布 application started 事件5️⃣
                    发布 application ready 事件6️⃣
                    这其中有异常，发布 application failed 事件7️⃣
         */</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-测试结果" tabindex="-1"><a class="header-anchor" href="#_2-测试结果" aria-hidden="true">#</a> 2 测试结果</h5><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code>name<span class="token operator">=</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>EventPublishingRunListener
			是run方法中发布的事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>ApplicationStartingEvent
			是run方法中发布的事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>ApplicationEnvironmentPreparedEvent
			是run方法中发布的事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>ApplicationContextInitializedEvent
			是run方法中发布的事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>ApplicationPreparedEvent
	是其它方法中发布的事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>ContextRefreshedEvent
			是run方法中发布的事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>ApplicationStartedEvent
	是其它方法中发布的事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>availability<span class="token punctuation">.</span>AvailabilityChangeEvent
			是run方法中发布的事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>ApplicationReadyEvent
	是其它方法中发布的事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>availability<span class="token punctuation">.</span>AvailabilityChangeEvent
			是run方法中发布的事件<span class="token punctuation">,</span> 事件类型为<span class="token punctuation">:</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>ApplicationFailedEvent
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-小总结" tabindex="-1"><a class="header-anchor" href="#_3-小总结" aria-hidden="true">#</a> 3 小总结</h5><blockquote><p>学到了什么</p><ol><li>如何读取 spring.factories 中的配置</li><li>run 方法内获取事件发布器 (得到 SpringApplicationRunListeners) 的过程, 对应步骤中 <ol><li>获取事件发布器 <ol><li>发布 application starting 事件1️⃣</li><li>发布 application environment 已准备事件2️⃣</li><li>发布 application context 已初始化事件3️⃣</li><li>发布 application prepared 事件4️⃣</li><li>发布 application started 事件5️⃣</li><li>发布 application ready 事件6️⃣</li><li>这其中有异常，发布 application failed 事件7️⃣</li></ol></li></ol></li></ol></blockquote><h4 id="_39-3-3-演示第2和8-12步" tabindex="-1"><a class="header-anchor" href="#_39-3-3-演示第2和8-12步" aria-hidden="true">#</a> 39.3.3 演示第2和8- 12步</h4><figure><img src="/assets/202212151615633-53d70b8e.png" alt="image-20221215161541866" tabindex="0" loading="lazy"><figcaption>image-20221215161541866</figcaption></figure><h5 id="_1-bean1-bean9" tabindex="-1"><a class="header-anchor" href="#_1-bean1-bean9" aria-hidden="true">#</a> 1 Bean1-Bean9</h5><h6 id="_1-1-bean1" tabindex="-1"><a class="header-anchor" href="#_1-1-bean1" aria-hidden="true">#</a> 1.1 Bean1</h6><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>sub</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> Bean1
 * <span class="token keyword">@description</span>
 * <span class="token keyword">@since</span> 2022/12/15 15:40
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bean1</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;bean1 construct&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_1-2-bean2" tabindex="-1"><a class="header-anchor" href="#_1-2-bean2" aria-hidden="true">#</a> 1.2 Bean2</h6><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>sub</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> Bean1
 * <span class="token keyword">@description</span>
 * <span class="token keyword">@since</span> 2022/12/15 15:40
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bean2</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;bean2 construct&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_1-3-bean3" tabindex="-1"><a class="header-anchor" href="#_1-3-bean3" aria-hidden="true">#</a> 1.3 Bean3</h6><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>sub</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> Bean1
 * <span class="token keyword">@description</span>
 * <span class="token keyword">@since</span> 2022/12/15 15:40
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bean3</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Bean3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;bean3 construct&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_1-4-config1" tabindex="-1"><a class="header-anchor" href="#_1-4-config1" aria-hidden="true">#</a> 1.4 Config1</h6><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">ApplicationRunner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">CommandLineRunner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>web<span class="token punctuation">.</span>embedded<span class="token punctuation">.</span>tomcat<span class="token punctuation">.</span></span><span class="token class-name">TomcatServletWebServerFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> Config1
 * <span class="token keyword">@description</span>
 * <span class="token keyword">@since</span> 2022/12/15 15:40
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Config1</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Bean4</span> <span class="token function">bean4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Bean5</span> <span class="token function">bean5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Bean6</span> <span class="token function">bean6</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">TomcatServletWebServerFactory</span> <span class="token function">tomcatServletWebServerFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TomcatServletWebServerFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">ApplicationRunner</span> <span class="token function">applicationRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> applicationArguments <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;\tApplicationRunner run..., the applicationArguments is %s, --开头的参数 %s, 非--开头的参数 %s\n&quot;</span><span class="token punctuation">,</span>
                <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>applicationArguments<span class="token punctuation">.</span><span class="token function">getSourceArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                applicationArguments<span class="token punctuation">.</span><span class="token function">getOptionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                applicationArguments<span class="token punctuation">.</span><span class="token function">getNonOptionArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">CommandLineRunner</span> <span class="token function">commandLineRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> args <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;\tCommandLineRunner run..., the args is %s\n&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean4</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;bean4 construct&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean5</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;bean5 construct&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean6</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean6</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;bean6 construct&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_1-5-bean7" tabindex="-1"><a class="header-anchor" href="#_1-5-bean7" aria-hidden="true">#</a> 1.5 Bean7</h6><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>xml</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> Bean1
 * <span class="token keyword">@description</span>
 * <span class="token keyword">@since</span> 2022/12/15 15:40
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bean7</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Bean7</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;bean7 construct&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_1-6-bean8" tabindex="-1"><a class="header-anchor" href="#_1-6-bean8" aria-hidden="true">#</a> 1.6 Bean8</h6><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>xml</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> Bean1
 * <span class="token keyword">@description</span>
 * <span class="token keyword">@since</span> 2022/12/15 15:40
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bean8</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Bean8</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;bean8 construct&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_1-7-bean9" tabindex="-1"><a class="header-anchor" href="#_1-7-bean9" aria-hidden="true">#</a> 1.7 Bean9</h6><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>xml</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> Bean1
 * <span class="token keyword">@description</span>
 * <span class="token keyword">@since</span> 2022/12/15 15:40
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bean9</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Bean9</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;bean9 construct&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-b03-xml" tabindex="-1"><a class="header-anchor" href="#_2-b03-xml" aria-hidden="true">#</a> 2 b03.xml</h5><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bean7<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.itheima.boot.a39.xml.Bean7<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bean8<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.itheima.boot.a39.xml.Bean8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bean9<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.itheima.boot.a39.xml.Bean9<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-测试代码" tabindex="-1"><a class="header-anchor" href="#_3-测试代码" aria-hidden="true">#</a> 3 测试代码</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">Config1</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">DefaultListableBeanFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>xml<span class="token punctuation">.</span></span><span class="token class-name">XmlBeanDefinitionReader</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>web<span class="token punctuation">.</span>reactive<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">AnnotationConfigReactiveWebServerApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">AnnotationConfigServletWebServerApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationContextInitializer</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">AnnotatedBeanDefinitionReader</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">AnnotationConfigApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ClassPathBeanDefinitionScanner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">GenericApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ClassPathResource</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">WebApplicationType</span><span class="token punctuation">.</span><span class="token static">SERVLET</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> TestSpringApplicationRun
 * <span class="token keyword">@description</span> 测试SpringApplication的run方法的执行流程
 * 运行时请添加运行参数 --server.port=8080 debug
 * <span class="token keyword">@since</span> 2022/12/15 15:16
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSpringApplicationRun</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;all&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span> application <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        application<span class="token punctuation">.</span><span class="token function">addInitializers</span><span class="token punctuation">(</span>applicationContext <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\t初始化方法增强&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;2. 封装启动 args&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2. 封装启动 args</span>
        <span class="token class-name">DefaultApplicationArguments</span> applicationArguments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultApplicationArguments</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 8. 创建容器</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;8. 创建容器&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">GenericApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token function">createApplicationContext</span><span class="token punctuation">(</span><span class="token constant">SERVLET</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 9. 准备容器</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;9. 准备容器&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ApplicationContextInitializer</span> initializer <span class="token operator">:</span> application<span class="token punctuation">.</span><span class="token function">getInitializers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            initializer<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 10. 加载 bean 定义</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;10. 加载 bean 定义&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 10.1 通过读取配置类</span>
        <span class="token class-name">DefaultListableBeanFactory</span> beanFactory <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getDefaultListableBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 读取配置类</span>
        <span class="token class-name">AnnotatedBeanDefinitionReader</span> configReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotatedBeanDefinitionReader</span><span class="token punctuation">(</span>beanFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\t通过读取配置类&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configReader<span class="token punctuation">.</span><span class="token function">registerBean</span><span class="token punctuation">(</span><span class="token class-name">Config1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 10.2 通过读取xml配置文件</span>
        <span class="token class-name">XmlBeanDefinitionReader</span> xmlReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XmlBeanDefinitionReader</span><span class="token punctuation">(</span>beanFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\t通过读取xml配置文件&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        xmlReader<span class="token punctuation">.</span><span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">&quot;b03.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 10.3 通过包扫描</span>
        <span class="token class-name">ClassPathBeanDefinitionScanner</span> scannerReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathBeanDefinitionScanner</span><span class="token punctuation">(</span>beanFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\t通过包扫描&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        scannerReader<span class="token punctuation">.</span><span class="token function">scan</span><span class="token punctuation">(</span><span class="token string">&quot;com.itheima.boot.a39.sub&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 11. refresh 容器</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;11. refresh 容器&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 打印bean的信息及它的来源</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\t打印bean的信息及它的来源&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> name <span class="token operator">:</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;\tname=%s, 来源: %s\n&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 12. 执行 runner</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;12. 执行 runner&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ApplicationRunner</span> applicationRunner <span class="token operator">:</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBeansOfType</span><span class="token punctuation">(</span><span class="token class-name">ApplicationRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            applicationRunner<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>applicationArguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">CommandLineRunner</span> commandLineRunner <span class="token operator">:</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBeansOfType</span><span class="token punctuation">(</span><span class="token class-name">CommandLineRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            commandLineRunner<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 释放资源</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\t释放资源&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 创建ApplicationContext
     *
     * <span class="token keyword">@param</span> <span class="token parameter">applicationType</span> 是哪种应用程序
     * <span class="token keyword">@return</span> GenericApplicationContext
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">GenericApplicationContext</span> <span class="token function">createApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">WebApplicationType</span> applicationType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">GenericApplicationContext</span> applicationContext<span class="token punctuation">;</span>

        <span class="token keyword">switch</span> <span class="token punctuation">(</span>applicationType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token constant">SERVLET</span><span class="token operator">:</span>
                applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigServletWebServerApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">REACTIVE</span><span class="token operator">:</span>
                applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigReactiveWebServerApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">NONE</span><span class="token operator">:</span>
                applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token operator">:</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token string">&quot;不支持的类型&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> applicationContext<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-测试结果" tabindex="-1"><a class="header-anchor" href="#_4-测试结果" aria-hidden="true">#</a> 4 测试结果</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">2.</span> 封装启动 args
<span class="token number">8.</span> 创建容器
<span class="token number">9.</span> 准备容器
	初始化方法增强
<span class="token number">10.</span> 加载 bean 定义
	通过读取配置类
	通过读取xml配置文件
	通过包扫描
<span class="token number">11.</span> refresh 容器
<span class="token punctuation">[</span><span class="token constant">INFO</span> <span class="token punctuation">]</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">38.535</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>b<span class="token punctuation">.</span>w<span class="token punctuation">.</span>e<span class="token punctuation">.</span>tomcat<span class="token punctuation">.</span></span>TomcatWebServer</span>    <span class="token operator">-</span> <span class="token class-name">Tomcat</span> initialized <span class="token keyword">with</span> <span class="token namespace">port</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">8080</span> <span class="token punctuation">(</span>http<span class="token punctuation">)</span> 
十二月 <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">2022</span> <span class="token number">4</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">38</span> 下午 <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>coyote<span class="token punctuation">.</span></span>AbstractProtocol</span> init
信息<span class="token operator">:</span> <span class="token class-name">Initializing</span> <span class="token class-name">ProtocolHandler</span> <span class="token punctuation">[</span><span class="token string">&quot;http-nio-8080&quot;</span><span class="token punctuation">]</span>
十二月 <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">2022</span> <span class="token number">4</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">38</span> 下午 <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span>StandardService</span> startInternal
信息<span class="token operator">:</span> <span class="token class-name">Starting</span> service <span class="token punctuation">[</span><span class="token class-name">Tomcat</span><span class="token punctuation">]</span>
十二月 <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">2022</span> <span class="token number">4</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">38</span> 下午 <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span>StandardEngine</span> startInternal
信息<span class="token operator">:</span> <span class="token class-name">Starting</span> <span class="token class-name">Servlet</span> engine<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token class-name">Apache</span> <span class="token class-name">Tomcat</span><span class="token operator">/</span><span class="token number">9.0</span><span class="token number">.62</span><span class="token punctuation">]</span>
十二月 <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">2022</span> <span class="token number">4</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">38</span> 下午 <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span>ApplicationContext</span> log
信息<span class="token operator">:</span> <span class="token class-name">Initializing</span> <span class="token class-name">Spring</span> embedded <span class="token class-name">WebApplicationContext</span>
<span class="token punctuation">[</span><span class="token constant">INFO</span> <span class="token punctuation">]</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">38.785</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>b<span class="token punctuation">.</span>w<span class="token punctuation">.</span>s<span class="token punctuation">.</span>c<span class="token punctuation">.</span></span>ServletWebServerApplicationContext</span> <span class="token operator">-</span> <span class="token class-name">Root</span> <span class="token class-name">WebApplicationContext</span><span class="token operator">:</span> initialization completed in <span class="token number">921</span> ms 
<span class="token punctuation">[</span><span class="token constant">DEBUG</span><span class="token punctuation">]</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">38.808</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>xml<span class="token punctuation">.</span></span>Bean7</span>      <span class="token operator">-</span> bean7 construct 
<span class="token punctuation">[</span><span class="token constant">DEBUG</span><span class="token punctuation">]</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">38.808</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>xml<span class="token punctuation">.</span></span>Bean8</span>      <span class="token operator">-</span> bean8 construct 
<span class="token punctuation">[</span><span class="token constant">DEBUG</span><span class="token punctuation">]</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">38.808</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>xml<span class="token punctuation">.</span></span>Bean9</span>      <span class="token operator">-</span> bean9 construct 
<span class="token punctuation">[</span><span class="token constant">DEBUG</span><span class="token punctuation">]</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">38.809</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>sub<span class="token punctuation">.</span></span>Bean1</span>      <span class="token operator">-</span> bean1 construct 
<span class="token punctuation">[</span><span class="token constant">DEBUG</span><span class="token punctuation">]</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">38.809</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>sub<span class="token punctuation">.</span></span>Bean2</span>      <span class="token operator">-</span> bean2 construct 
<span class="token punctuation">[</span><span class="token constant">DEBUG</span><span class="token punctuation">]</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">38.809</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>sub<span class="token punctuation">.</span></span>Bean3</span>      <span class="token operator">-</span> bean3 construct 
<span class="token punctuation">[</span><span class="token constant">DEBUG</span><span class="token punctuation">]</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">38.810</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span>Config1</span> <span class="token operator">-</span> bean4 construct 
<span class="token punctuation">[</span><span class="token constant">DEBUG</span><span class="token punctuation">]</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">38.810</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span>Config1</span> <span class="token operator">-</span> bean5 construct 
<span class="token punctuation">[</span><span class="token constant">DEBUG</span><span class="token punctuation">]</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">38.811</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span>Config1</span> <span class="token operator">-</span> bean6 construct 
十二月 <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">2022</span> <span class="token number">4</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">38</span> 下午 <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>coyote<span class="token punctuation">.</span></span>AbstractProtocol</span> start
信息<span class="token operator">:</span> <span class="token class-name">Starting</span> <span class="token class-name">ProtocolHandler</span> <span class="token punctuation">[</span><span class="token string">&quot;http-nio-8080&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token constant">INFO</span> <span class="token punctuation">]</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">38.845</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>b<span class="token punctuation">.</span>w<span class="token punctuation">.</span>e<span class="token punctuation">.</span>tomcat<span class="token punctuation">.</span></span>TomcatWebServer</span>    <span class="token operator">-</span> <span class="token class-name">Tomcat</span> started on <span class="token function">port</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">8080</span> <span class="token punctuation">(</span>http<span class="token punctuation">)</span> <span class="token keyword">with</span> <span class="token namespace">context</span> path &#39;&#39; 
	打印bean的信息及它的来源
	name<span class="token operator">=</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>internalConfigurationAnnotationProcessor<span class="token punctuation">,</span> 来源<span class="token operator">:</span> <span class="token keyword">null</span>
	name<span class="token operator">=</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>internalAutowiredAnnotationProcessor<span class="token punctuation">,</span> 来源<span class="token operator">:</span> <span class="token keyword">null</span>
	name<span class="token operator">=</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>internalCommonAnnotationProcessor<span class="token punctuation">,</span> 来源<span class="token operator">:</span> <span class="token keyword">null</span>
	name<span class="token operator">=</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>event<span class="token punctuation">.</span>internalEventListenerProcessor<span class="token punctuation">,</span> 来源<span class="token operator">:</span> <span class="token keyword">null</span>
	name<span class="token operator">=</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>event<span class="token punctuation">.</span>internalEventListenerFactory<span class="token punctuation">,</span> 来源<span class="token operator">:</span> <span class="token keyword">null</span>
	name<span class="token operator">=</span>config1<span class="token punctuation">,</span> 来源<span class="token operator">:</span> <span class="token keyword">null</span>
	name<span class="token operator">=</span>bean7<span class="token punctuation">,</span> 来源<span class="token operator">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>b03<span class="token punctuation">.</span>xml<span class="token punctuation">]</span>
	name<span class="token operator">=</span>bean8<span class="token punctuation">,</span> 来源<span class="token operator">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>b03<span class="token punctuation">.</span>xml<span class="token punctuation">]</span>
	name<span class="token operator">=</span>bean9<span class="token punctuation">,</span> 来源<span class="token operator">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>b03<span class="token punctuation">.</span>xml<span class="token punctuation">]</span>
	name<span class="token operator">=</span>bean1<span class="token punctuation">,</span> 来源<span class="token operator">:</span> file <span class="token punctuation">[</span><span class="token class-name">C</span><span class="token operator">:</span>\<span class="token constant">DISH</span>\<span class="token class-name">JavaCode</span>\java\gitee\liuyangfang\java<span class="token operator">-</span>face\spring<span class="token operator">-</span>demo\target\classes\com\itheima\boot\a39\sub\<span class="token class-name">Bean1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
	name<span class="token operator">=</span>bean2<span class="token punctuation">,</span> 来源<span class="token operator">:</span> file <span class="token punctuation">[</span><span class="token class-name">C</span><span class="token operator">:</span>\<span class="token constant">DISH</span>\<span class="token class-name">JavaCode</span>\java\gitee\liuyangfang\java<span class="token operator">-</span>face\spring<span class="token operator">-</span>demo\target\classes\com\itheima\boot\a39\sub\<span class="token class-name">Bean2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
	name<span class="token operator">=</span>bean3<span class="token punctuation">,</span> 来源<span class="token operator">:</span> file <span class="token punctuation">[</span><span class="token class-name">C</span><span class="token operator">:</span>\<span class="token constant">DISH</span>\<span class="token class-name">JavaCode</span>\java\gitee\liuyangfang\java<span class="token operator">-</span>face\spring<span class="token operator">-</span>demo\target\classes\com\itheima\boot\a39\sub\<span class="token class-name">Bean3</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
	name<span class="token operator">=</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>internalCachingMetadataReaderFactory<span class="token punctuation">,</span> 来源<span class="token operator">:</span> <span class="token keyword">null</span>
	name<span class="token operator">=</span>bean4<span class="token punctuation">,</span> 来源<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span>Config1</span>
	name<span class="token operator">=</span>bean5<span class="token punctuation">,</span> 来源<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span>Config1</span>
	name<span class="token operator">=</span>bean6<span class="token punctuation">,</span> 来源<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span>Config1</span>
	name<span class="token operator">=</span>tomcatServletWebServerFactory<span class="token punctuation">,</span> 来源<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span>Config1</span>
	name<span class="token operator">=</span>applicationRunner<span class="token punctuation">,</span> 来源<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span>Config1</span>
	name<span class="token operator">=</span>commandLineRunner<span class="token punctuation">,</span> 来源<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a39<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span>Config1</span>
<span class="token number">12.</span> 执行 runner
	<span class="token class-name">ApplicationRunner</span> run<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> the applicationArguments is <span class="token punctuation">[</span><span class="token operator">--</span>server<span class="token punctuation">.</span>port<span class="token operator">=</span><span class="token number">8080</span><span class="token punctuation">,</span> debug<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">--</span>开头的参数 <span class="token punctuation">[</span>server<span class="token punctuation">.</span>port<span class="token punctuation">]</span><span class="token punctuation">,</span> 非<span class="token operator">--</span>开头的参数 <span class="token punctuation">[</span>debug<span class="token punctuation">]</span>
	<span class="token class-name">CommandLineRunner</span> run<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> the args is <span class="token punctuation">[</span><span class="token operator">--</span>server<span class="token punctuation">.</span>port<span class="token operator">=</span><span class="token number">8080</span><span class="token punctuation">,</span> debug<span class="token punctuation">]</span>
	释放资源
十二月 <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">2022</span> <span class="token number">4</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">39</span> 下午 <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>coyote<span class="token punctuation">.</span></span>AbstractProtocol</span> pause
信息<span class="token operator">:</span> <span class="token class-name">Pausing</span> <span class="token class-name">ProtocolHandler</span> <span class="token punctuation">[</span><span class="token string">&quot;http-nio-8080&quot;</span><span class="token punctuation">]</span>
十二月 <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">2022</span> <span class="token number">4</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">39</span> 下午 <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span>StandardService</span> stopInternal
信息<span class="token operator">:</span> <span class="token class-name">Stopping</span> service <span class="token punctuation">[</span><span class="token class-name">Tomcat</span><span class="token punctuation">]</span>
十二月 <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">2022</span> <span class="token number">4</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">39</span> 下午 <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>coyote<span class="token punctuation">.</span></span>AbstractProtocol</span> stop
信息<span class="token operator">:</span> <span class="token class-name">Stopping</span> <span class="token class-name">ProtocolHandler</span> <span class="token punctuation">[</span><span class="token string">&quot;http-nio-8080&quot;</span><span class="token punctuation">]</span>
十二月 <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">2022</span> <span class="token number">4</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">39</span> 下午 <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>coyote<span class="token punctuation">.</span></span>AbstractProtocol</span> destroy
信息<span class="token operator">:</span> <span class="token class-name">Destroying</span> <span class="token class-name">ProtocolHandler</span> <span class="token punctuation">[</span><span class="token string">&quot;http-nio-8080&quot;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_5-小总结" tabindex="-1"><a class="header-anchor" href="#_5-小总结" aria-hidden="true">#</a> 5 小总结</h5><blockquote><p>学到了什么 a. 创建容器、加载 bean 定义、refresh, 对应的步骤</p></blockquote><h4 id="_39-3-4-演示3-7" tabindex="-1"><a class="header-anchor" href="#_39-3-4-演示3-7" aria-hidden="true">#</a> 39.3.4 演示3-7</h4><figure><img src="/assets/202212151622205-459fb2ca.png" alt="image-20221215162240544" tabindex="0" loading="lazy"><figcaption>image-20221215162240544</figcaption></figure><h5 id="_1-准备工作" tabindex="-1"><a class="header-anchor" href="#_1-准备工作" aria-hidden="true">#</a> 1 准备工作</h5><h6 id="_1-1-environmentutil" tabindex="-1"><a class="header-anchor" href="#_1-1-environmentutil" aria-hidden="true">#</a> 1.1 EnvironmentUtil</h6><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>util</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span><span class="token class-name">Environment</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span><span class="token class-name">PropertySource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span><span class="token class-name">StandardEnvironment</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> EnvironmentUtil
 * <span class="token keyword">@description</span>
 * <span class="token keyword">@date</span> 2022/12/15 16:58
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">EnvironmentUtil</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * 私有构造器
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">EnvironmentUtil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">StandardEnvironment</span> environment<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertySource</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> propertySource <span class="token operator">:</span> environment<span class="token punctuation">.</span><span class="token function">getPropertySources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>propertySource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_1-2-step3-properties" tabindex="-1"><a class="header-anchor" href="#_1-2-step3-properties" aria-hidden="true">#</a> 1.2 step3.properties</h6><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">8080</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_1-3-step4-properties" tabindex="-1"><a class="header-anchor" href="#_1-3-step4-properties" aria-hidden="true">#</a> 1.3 step4.properties</h6><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">user.first-name</span><span class="token punctuation">=</span><span class="token value attr-value">George</span>
<span class="token key attr-name">user.middle_name</span><span class="token punctuation">=</span><span class="token value attr-value">Walker</span>
<span class="token key attr-name">user.lastName</span><span class="token punctuation">=</span><span class="token value attr-value">Bush</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_1-4-step6-properties" tabindex="-1"><a class="header-anchor" href="#_1-4-step6-properties" aria-hidden="true">#</a> 1.4 step6.properties</h6><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">spring.main.banner-mode</span><span class="token punctuation">=</span><span class="token value attr-value">off</span>
<span class="token key attr-name">spring.main.lazy-initialization</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_1-5-banner1-txt" tabindex="-1"><a class="header-anchor" href="#_1-5-banner1-txt" aria-hidden="true">#</a> 1.5 banner1.txt</h6><div class="language-txt line-numbers-mode" data-ext="txt"><pre class="language-txt"><code>  _____            _             ____              _
 / ____|          (_)           |  _ \            | |
| (___  _ __  _ __ _ _ __   __ _| |_) | ___   ___ | |_
 \___ \| &#39;_ \| &#39;__| | &#39;_ \ / _` |  _ &lt; / _ \ / _ \| __|
 ____) | |_) | |  | | | | | (_| | |_) | (_) | (_) | |_
|_____/| .__/|_|  |_|_| |_|\__, |____/ \___/ \___/ \__|
       | |                  __/ |
       |_|                 |___/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_1-6-banner2-png" tabindex="-1"><a class="header-anchor" href="#_1-6-banner2-png" aria-hidden="true">#</a> 1.6 banner2.png</h6><figure><img src="/assets/202212151749942-b3b41ef0.png" alt="banner2" tabindex="0" loading="lazy"><figcaption>banner2</figcaption></figure><h6 id="_1-7-application-properties" tabindex="-1"><a class="header-anchor" href="#_1-7-application-properties" aria-hidden="true">#</a> 1.7 application.properties</h6><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">9090</span>
<span class="token key attr-name">goods.name</span><span class="token punctuation">=</span><span class="token value attr-value">小米12</span>
<span class="token key attr-name">spring.datasource.druid.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://127.0.0.1:3306/test?serverTimezone=Asia/Shanghai&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=false&amp;allowPublicKeyRetrieval=true</span>
<span class="token key attr-name">spring.datasource.druid.username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">spring.datasource.driver-class-name</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.cj.jdbc.Driver</span>
<span class="token key attr-name">spring.datasource.password</span><span class="token punctuation">=</span><span class="token value attr-value">123456</span>

<span class="token key attr-name">server.servlet.session.timeout</span><span class="token punctuation">=</span><span class="token value attr-value">10s</span>
<span class="token comment"># 也可以在配置</span>
<span class="token key attr-name">spring.mvc.servlet.load-on-startup</span><span class="token punctuation">=</span><span class="token value attr-value">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-step3" tabindex="-1"><a class="header-anchor" href="#_2-step3" aria-hidden="true">#</a> 2 Step3</h5><blockquote><p>ps Step3 到 Step7 都必须在 此目录： org.springframework.boot</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span><span class="token class-name">PropertySource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span><span class="token class-name">SimpleCommandLinePropertySource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ClassPathResource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">ResourcePropertySource</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">EnvironmentUtil</span><span class="token punctuation">.</span><span class="token static">print</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> Step3
 * <span class="token keyword">@description</span>
 * <span class="token keyword">@since</span> 2022/12/15 16:32
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Step3</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">ApplicationEnvironment</span> environment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApplicationEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 添加命令行参数来源, 在启动参数添加 --server.port=9090， 优先级最高</span>
        environment<span class="token punctuation">.</span><span class="token function">getPropertySources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleCommandLinePropertySource</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        environment<span class="token punctuation">.</span><span class="token function">getPropertySources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ResourcePropertySource</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">&quot;step3.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">print</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;server.port=%s\n&quot;</span><span class="token punctuation">,</span>environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;server.port&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;JAVA_HOME=%s\n&quot;</span><span class="token punctuation">,</span> environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;JAVA_HOME&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * PropertiesPropertySource <span class="token punctuation">{</span>name=&#39;systemProperties&#39;<span class="token punctuation">}</span>
     * SystemEnvironmentPropertySource <span class="token punctuation">{</span>name=&#39;systemEnvironment&#39;<span class="token punctuation">}</span>
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">defaultEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ApplicationEnvironment</span> environment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApplicationEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertySource</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> propertySource <span class="token operator">:</span> environment<span class="token punctuation">.</span><span class="token function">getPropertySources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>propertySource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_2-1-测试结果" tabindex="-1"><a class="header-anchor" href="#_2-1-测试结果" aria-hidden="true">#</a> 2.1 测试结果</h6><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code><span class="token operator">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>
SimpleCommandLinePropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;commandLineArgs&#39;<span class="token operator">}</span>
PropertiesPropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;systemProperties&#39;<span class="token operator">}</span>
SystemEnvironmentPropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;systemEnvironment&#39;<span class="token operator">}</span>
ResourcePropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;<span class="token keyword">class</span> path resource <span class="token punctuation">[</span>step3<span class="token punctuation">.</span>properties<span class="token punctuation">]</span>&#39;<span class="token operator">}</span>
<span class="token operator">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>
server<span class="token punctuation">.</span>port<span class="token operator">=</span><span class="token number">9090</span>
JAVA_HOME<span class="token operator">=</span>C<span class="token punctuation">:</span>\DISH\APP\JAVA\Java\jdk1<span class="token number">.8</span><span class="token punctuation">.</span><span class="token number">0_144</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-step4" tabindex="-1"><a class="header-anchor" href="#_3-step4" aria-hidden="true">#</a> 3 Step4</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span>source<span class="token punctuation">.</span></span><span class="token class-name">ConfigurationPropertySources</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span><span class="token class-name">PropertySource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span><span class="token class-name">SimpleCommandLinePropertySource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ClassPathResource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">ResourcePropertySource</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> Step3
 * <span class="token keyword">@description</span>
 * <span class="token keyword">@since</span> 2022/12/15 16:32
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Step4</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">ApplicationEnvironment</span> environment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApplicationEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        environment<span class="token punctuation">.</span><span class="token function">getPropertySources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ResourcePropertySource</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">&quot;step4.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertySource</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> propertySource <span class="token operator">:</span> environment<span class="token punctuation">.</span><span class="token function">getPropertySources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>propertySource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;===============================attach前===============================================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user.first-name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user.middle-name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user.last-name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ConfigurationPropertySources</span><span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;===============================attach后===============================================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user.first-name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user.middle-name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user.last-name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_3-1-测试结果" tabindex="-1"><a class="header-anchor" href="#_3-1-测试结果" aria-hidden="true">#</a> 3.1 测试结果</h6><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code><span class="token operator">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>
PropertiesPropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;systemProperties&#39;<span class="token operator">}</span>
SystemEnvironmentPropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;systemEnvironment&#39;<span class="token operator">}</span>
ResourcePropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;<span class="token keyword">class</span> path resource <span class="token punctuation">[</span>step4<span class="token punctuation">.</span>properties<span class="token punctuation">]</span>&#39;<span class="token operator">}</span>
<span class="token operator">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>
<span class="token operator">===============================</span>attach前<span class="token operator">===============================================</span>
George
<span class="token keyword">null</span>
<span class="token keyword">null</span>
<span class="token operator">===============================</span>attach后<span class="token operator">===============================================</span>
George
Walker
Bush
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-step5" tabindex="-1"><a class="header-anchor" href="#_4-step5" aria-hidden="true">#</a> 4 Step5</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">ConfigDataEnvironmentPostProcessor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>event<span class="token punctuation">.</span></span><span class="token class-name">EventPublishingRunListener</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span><span class="token class-name">EnvironmentPostProcessorApplicationListener</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span><span class="token class-name">RandomValuePropertySourceEnvironmentPostProcessor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>logging<span class="token punctuation">.</span></span><span class="token class-name">DeferredLog</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>logging<span class="token punctuation">.</span></span><span class="token class-name">DeferredLogs</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">EnvironmentUtil</span><span class="token punctuation">.</span><span class="token static">print</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> Step5
 * <span class="token keyword">@description</span>
 * <span class="token keyword">@since</span> 2022/12/15 16:54
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Step5</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;test1...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test1</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;test2...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 测试两个后处理器
     * org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor
     *      解析 application.properties
     * org.springframework.boot.env.RandomValuePropertySourceEnvironmentPostProcessor
     *      生成随机数据的能力
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span> application <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ApplicationEnvironment</span> environment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApplicationEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;增强前&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">print</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DeferredLogs</span> deferredLogs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeferredLogs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ConfigurableBootstrapContext</span> bootstrapContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultBootstrapContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 解析application.properties</span>
        <span class="token class-name">ConfigDataEnvironmentPostProcessor</span> processor1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConfigDataEnvironmentPostProcessor</span><span class="token punctuation">(</span>deferredLogs<span class="token punctuation">,</span> bootstrapContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
        processor1<span class="token punctuation">.</span><span class="token function">postProcessEnvironment</span><span class="token punctuation">(</span>environment<span class="token punctuation">,</span> application<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ConfigDataEnvironmentPostProcessor 增强后&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">print</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 提供生成随机数据的能力</span>
        <span class="token class-name">RandomValuePropertySourceEnvironmentPostProcessor</span> processor2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RandomValuePropertySourceEnvironmentPostProcessor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DeferredLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        processor2<span class="token punctuation">.</span><span class="token function">postProcessEnvironment</span><span class="token punctuation">(</span>environment<span class="token punctuation">,</span> application<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;RandomValuePropertySourceEnvironmentPostProcessor 增强后&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">print</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;server.port&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;random.int&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;random.int&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;random.int&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;random.uuid&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;random.uuid&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;random.uuid&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 在environmentPrepared 事件发布前后的ApplicationEnvironment对比
     * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
     * 增强前
     * &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
     * PropertiesPropertySource <span class="token punctuation">{</span>name=&#39;systemProperties&#39;<span class="token punctuation">}</span>
     * SystemEnvironmentPropertySource <span class="token punctuation">{</span>name=&#39;systemEnvironment&#39;<span class="token punctuation">}</span>
     * &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
     * 增强后
     * &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
     * PropertiesPropertySource <span class="token punctuation">{</span>name=&#39;systemProperties&#39;<span class="token punctuation">}</span>
     * OriginAwareSystemEnvironmentPropertySource <span class="token punctuation">{</span>name=&#39;systemEnvironment&#39;<span class="token punctuation">}</span>
     * RandomValuePropertySource <span class="token punctuation">{</span>name=&#39;random&#39;<span class="token punctuation">}</span>
     * OriginTrackedMapPropertySource <span class="token punctuation">{</span>name=&#39;Config resource &#39;class path resource [application.properties]&#39; via location &#39;optional:classpath:/&#39;&#39;<span class="token punctuation">}</span>
     * &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
     *
     * <span class="token keyword">@param</span> <span class="token parameter">args</span> args
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span> application <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 添加Environment事件监听器</span>
        application<span class="token punctuation">.</span><span class="token function">addListeners</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">EnvironmentPostProcessorApplicationListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ApplicationEnvironment</span> environment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApplicationEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;增强前&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">print</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;增强后&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">EventPublishingRunListener</span> publisher <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventPublishingRunListener</span><span class="token punctuation">(</span>application<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        publisher<span class="token punctuation">.</span><span class="token function">environmentPrepared</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DefaultBootstrapContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">print</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_4-1-测试结果" tabindex="-1"><a class="header-anchor" href="#_4-1-测试结果" aria-hidden="true">#</a> 4.1 测试结果</h6><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code>test1<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
增强前
<span class="token operator">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>
PropertiesPropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;systemProperties&#39;<span class="token operator">}</span>
SystemEnvironmentPropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;systemEnvironment&#39;<span class="token operator">}</span>
<span class="token operator">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>
增强后
<span class="token operator">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>
PropertiesPropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;systemProperties&#39;<span class="token operator">}</span>
OriginAwareSystemEnvironmentPropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;systemEnvironment&#39;<span class="token operator">}</span>
RandomValuePropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;random&#39;<span class="token operator">}</span>
OriginTrackedMapPropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;Config resource &#39;<span class="token keyword">class</span> path resource <span class="token punctuation">[</span>application<span class="token punctuation">.</span>properties<span class="token punctuation">]</span>&#39; via location &#39;optional<span class="token punctuation">:</span>classpath<span class="token punctuation">:</span><span class="token operator">/</span>&#39;&#39;<span class="token operator">}</span>
<span class="token operator">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>



test2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
增强前
<span class="token operator">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>
PropertiesPropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;systemProperties&#39;<span class="token operator">}</span>
SystemEnvironmentPropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;systemEnvironment&#39;<span class="token operator">}</span>
<span class="token operator">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>
ConfigDataEnvironmentPostProcessor 增强后
<span class="token operator">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>
PropertiesPropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;systemProperties&#39;<span class="token operator">}</span>
SystemEnvironmentPropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;systemEnvironment&#39;<span class="token operator">}</span>
OriginTrackedMapPropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;Config resource &#39;<span class="token keyword">class</span> path resource <span class="token punctuation">[</span>application<span class="token punctuation">.</span>properties<span class="token punctuation">]</span>&#39; via location &#39;optional<span class="token punctuation">:</span>classpath<span class="token punctuation">:</span><span class="token operator">/</span>&#39;&#39;<span class="token operator">}</span>
<span class="token operator">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>
RandomValuePropertySourceEnvironmentPostProcessor 增强后
<span class="token operator">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>
PropertiesPropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;systemProperties&#39;<span class="token operator">}</span>
SystemEnvironmentPropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;systemEnvironment&#39;<span class="token operator">}</span>
RandomValuePropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;random&#39;<span class="token operator">}</span>
OriginTrackedMapPropertySource <span class="token operator">{</span>name<span class="token operator">=</span>&#39;Config resource &#39;<span class="token keyword">class</span> path resource <span class="token punctuation">[</span>application<span class="token punctuation">.</span>properties<span class="token punctuation">]</span>&#39; via location &#39;optional<span class="token punctuation">:</span>classpath<span class="token punctuation">:</span><span class="token operator">/</span>&#39;&#39;<span class="token operator">}</span>
<span class="token operator">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>
<span class="token number">9090</span>
<span class="token number">1805763766</span>
<span class="token number">1033083007</span>
<span class="token operator">-</span><span class="token number">511594317</span>
<span class="token number">25</span>c03e88<span class="token operator">-</span>a36f<span class="token operator">-</span><span class="token number">481</span>e<span class="token operator">-</span>a601<span class="token operator">-</span>e0bb5c74e304
eedfef6d<span class="token operator">-</span><span class="token number">7292</span><span class="token operator">-</span><span class="token number">4</span>cbb<span class="token operator">-</span>bc79<span class="token operator">-</span><span class="token number">88657</span>a99f43d
<span class="token number">5</span>fbaf4d7<span class="token operator">-</span><span class="token number">50</span>db<span class="token operator">-</span><span class="token number">4361</span><span class="token operator">-</span><span class="token number">8882</span><span class="token operator">-</span><span class="token number">015</span>d0f4c3db2

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_5-step6" tabindex="-1"><a class="header-anchor" href="#_5-step6" aria-hidden="true">#</a> 5 Step6</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>visitor<span class="token punctuation">.</span>functions<span class="token punctuation">.</span></span><span class="token class-name">Bin</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span>bind<span class="token punctuation">.</span></span><span class="token class-name">Bindable</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span>bind<span class="token punctuation">.</span></span><span class="token class-name">Binder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ClassPathResource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">ResourcePropertySource</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Field</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> Step6
 * <span class="token keyword">@description</span> 绑定 spring.main 前缀的 key value 至 SpringApplication, 请通过 debug 查看
 * <span class="token keyword">@since</span> 2022/12/15 17:19
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Step6</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span> application <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ApplicationEnvironment</span> environment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApplicationEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        environment<span class="token punctuation">.</span><span class="token function">getPropertySources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ResourcePropertySource</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">&quot;step4.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        environment<span class="token punctuation">.</span><span class="token function">getPropertySources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ResourcePropertySource</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">&quot;step6.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 绑定并创建对象</span>
        <span class="token class-name">User</span> user1 <span class="token operator">=</span> <span class="token class-name">Binder</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;user1=&quot;</span> <span class="token operator">+</span> user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 针对已有对象的数据绑定</span>
        <span class="token class-name">User</span> user2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Binder</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Bindable</span><span class="token punctuation">.</span><span class="token function">ofInstance</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;user2=&quot;</span> <span class="token operator">+</span> user2<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 测试spring.main的数据绑定情况</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;绑定spring.main数据前: &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printSimpleInfo</span><span class="token punctuation">(</span>application<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Binder</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">&quot;spring.main&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Bindable</span><span class="token punctuation">.</span><span class="token function">ofInstance</span><span class="token punctuation">(</span>application<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;绑定spring.main数据后: &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printSimpleInfo</span><span class="token punctuation">(</span>application<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printSimpleInfo</span><span class="token punctuation">(</span><span class="token class-name">SpringApplication</span> application<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalAccessException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> declaredFields <span class="token operator">=</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> declaredField <span class="token operator">:</span> declaredFields<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;bannerMode&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>declaredField<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token operator">||</span> <span class="token string">&quot;lazyInitialization&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>declaredField<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                declaredField<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Object</span> obj <span class="token operator">=</span> declaredField<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>application<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>declaredField<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span> <span class="token operator">+</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> firstName<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> middleName<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getFirstName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> firstName<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFirstName</span><span class="token punctuation">(</span><span class="token class-name">String</span> firstName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">=</span> firstName<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMiddleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> middleName<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMiddleName</span><span class="token punctuation">(</span><span class="token class-name">String</span> middleName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>middleName <span class="token operator">=</span> middleName<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getLastName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> lastName<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLastName</span><span class="token punctuation">(</span><span class="token class-name">String</span> lastName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>lastName <span class="token operator">=</span> lastName<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">&quot;User{&quot;</span> <span class="token operator">+</span>
                    <span class="token string">&quot;firstName=&#39;&quot;</span> <span class="token operator">+</span> firstName <span class="token operator">+</span> <span class="token char">&#39;\&#39;&#39;</span> <span class="token operator">+</span>
                    <span class="token string">&quot;, middleName=&#39;&quot;</span> <span class="token operator">+</span> middleName <span class="token operator">+</span> <span class="token char">&#39;\&#39;&#39;</span> <span class="token operator">+</span>
                    <span class="token string">&quot;, lastName=&#39;&quot;</span> <span class="token operator">+</span> lastName <span class="token operator">+</span> <span class="token char">&#39;\&#39;&#39;</span> <span class="token operator">+</span>
                    <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_5-1-测试结果" tabindex="-1"><a class="header-anchor" href="#_5-1-测试结果" aria-hidden="true">#</a> 5.1 测试结果</h6><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code>user1<span class="token operator">=</span>User<span class="token operator">{</span>firstName<span class="token operator">=</span>&#39;George&#39;<span class="token punctuation">,</span> middleName<span class="token operator">=</span>&#39;Walker&#39;<span class="token punctuation">,</span> lastName<span class="token operator">=</span>&#39;Bush&#39;<span class="token operator">}</span>
user2<span class="token operator">=</span>User<span class="token operator">{</span>firstName<span class="token operator">=</span>&#39;George&#39;<span class="token punctuation">,</span> middleName<span class="token operator">=</span>&#39;Walker&#39;<span class="token punctuation">,</span> lastName<span class="token operator">=</span>&#39;Bush&#39;<span class="token operator">}</span>
绑定spring<span class="token punctuation">.</span>main数据前<span class="token punctuation">:</span> <span class="token operator">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>
bannerMode<span class="token operator">=</span>CONSOLE
lazyInitialization<span class="token operator">=</span>false
绑定spring<span class="token punctuation">.</span>main数据后<span class="token punctuation">:</span> <span class="token operator">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>
bannerMode<span class="token operator">=</span>OFF
lazyInitialization<span class="token operator">=</span>true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_6-step7" tabindex="-1"><a class="header-anchor" href="#_6-step7" aria-hidden="true">#</a> 6 Step7</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span><span class="token class-name">MapPropertySource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">DefaultResourceLoader</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> Step7
 * <span class="token keyword">@description</span>
 * <span class="token keyword">@since</span> 2022/12/15 17:36
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Step7</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ApplicationEnvironment</span> environment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApplicationEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SpringApplicationBannerPrinter</span> printer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpringApplicationBannerPrinter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DefaultResourceLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SpringBootBanner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 打印Spring Boot 图标和版本号</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;版本号：&quot;</span> <span class="token operator">+</span> <span class="token class-name">SpringBootVersion</span><span class="token punctuation">.</span><span class="token function">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;自带的版本：&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        printer<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>environment<span class="token punctuation">,</span> <span class="token class-name">Step7</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;文字 banner的版本：&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 测试文字 banner</span>
        environment<span class="token punctuation">.</span><span class="token function">getPropertySources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MapPropertySource</span><span class="token punctuation">(</span><span class="token string">&quot;custom1&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonMap</span><span class="token punctuation">(</span><span class="token string">&quot;spring.banner.location&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;banner1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        printer<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>environment<span class="token punctuation">,</span> <span class="token class-name">Step7</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;图片 banner的版本：&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 移除文字版的banner，防止干扰测试</span>
        environment<span class="token punctuation">.</span><span class="token function">getPropertySources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;custom1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 测试图片 banner</span>
        environment<span class="token punctuation">.</span><span class="token function">getPropertySources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MapPropertySource</span><span class="token punctuation">(</span><span class="token string">&quot;custom2&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonMap</span><span class="token punctuation">(</span><span class="token string">&quot;spring.banner.image.location&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;banner2.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        printer<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>environment<span class="token punctuation">,</span> <span class="token class-name">Step7</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_6-1-测试结果" tabindex="-1"><a class="header-anchor" href="#_6-1-测试结果" aria-hidden="true">#</a> 6.1 测试结果</h6><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code>版本号：<span class="token number">2.6</span><span class="token punctuation">.</span><span class="token number">7</span>
自带的版本：<span class="token operator">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>

  <span class="token punctuation">.</span>   ____          _            __ _ _
 <span class="token operator">/</span>\\ <span class="token operator">/</span> ___&#39;_ __ _ <span class="token function">_</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span>_ __  __ _ \ \ \ \
<span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token punctuation">)</span>\___ <span class="token operator">|</span> &#39;_ <span class="token operator">|</span> &#39;_<span class="token operator">|</span> <span class="token operator">|</span> &#39;_ \<span class="token operator">/</span> _` <span class="token operator">|</span> \ \ \ \
 \\<span class="token operator">/</span>  ___<span class="token punctuation">)</span><span class="token operator">|</span> <span class="token operator">|</span>_<span class="token punctuation">)</span><span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">||</span> <span class="token punctuation">(</span>_<span class="token operator">|</span> <span class="token operator">|</span>  <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>
  &#39;  <span class="token operator">|</span>____<span class="token operator">|</span> <span class="token punctuation">.</span>__<span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>_\__<span class="token punctuation">,</span> <span class="token operator">|</span> <span class="token operator">/</span> <span class="token operator">/</span> <span class="token operator">/</span> <span class="token operator">/</span>
 <span class="token operator">=========|</span>_<span class="token operator">|==============|</span>___<span class="token operator">/=/</span>_<span class="token operator">/</span>_<span class="token operator">/</span>_<span class="token operator">/</span>
 <span class="token punctuation">:</span><span class="token punctuation">:</span> Spring Boot <span class="token punctuation">:</span><span class="token punctuation">:</span>                <span class="token punctuation">(</span>v2<span class="token number">.6</span><span class="token punctuation">.</span><span class="token number">7</span><span class="token punctuation">)</span>

文字 banner的版本：<span class="token operator">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>
  _____            _             ____              _
 <span class="token operator">/</span> ____<span class="token operator">|</span>          <span class="token punctuation">(</span>_<span class="token punctuation">)</span>           <span class="token operator">|</span>  _ \            <span class="token operator">|</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token punctuation">(</span>___  _ __  _ __ _ _ __   __ _<span class="token operator">|</span> <span class="token operator">|</span>_<span class="token punctuation">)</span> <span class="token operator">|</span> ___   ___ <span class="token operator">|</span> <span class="token operator">|</span>_
 \___ \<span class="token operator">|</span> &#39;_ \<span class="token operator">|</span> &#39;__<span class="token operator">|</span> <span class="token operator">|</span> &#39;_ \ <span class="token operator">/</span> _` <span class="token operator">|</span>  _ <span class="token operator">&lt;</span> <span class="token operator">/</span> _ \ <span class="token operator">/</span> _ \<span class="token operator">|</span> __<span class="token operator">|</span>
 ____<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token operator">|</span>_<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token operator">|</span>  <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token punctuation">(</span>_<span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span>_<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token operator">|</span>_
<span class="token operator">|</span>_____<span class="token operator">/|</span> <span class="token punctuation">.</span>__<span class="token operator">/|</span>_<span class="token operator">|</span>  <span class="token operator">|</span>_<span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span>\__<span class="token punctuation">,</span> <span class="token operator">|</span>____<span class="token operator">/</span> \___<span class="token operator">/</span> \___<span class="token operator">/</span> \__<span class="token operator">|</span>
       <span class="token operator">|</span> <span class="token operator">|</span>                  __<span class="token operator">/</span> <span class="token operator">|</span>
       <span class="token operator">|</span>_<span class="token operator">|</span>                 <span class="token operator">|</span>___<span class="token operator">/</span>
图片 banner的版本：<span class="token operator">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span>


  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
  @@@@@@@@@@@@@@@@@@@#<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>#@@@@@@@@@@@@@@@@@@@
  @@@@@@@@@@@@@@@@@#<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>#@@@@@@@@@@@@@@@@@
  @@@@@@@@@@@@@@@@o<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>o@@@@@@@@@@@@@@@@
  @@@@@@@@@@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@@@@@@@@@
  @@@@@@@@@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@@@@@@@@
  @@@@@@@@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@<span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@@@@@@@
  @@@@@@@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>o@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@@@@@@
  @@@@@@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>o@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@@@@@
  @@@@@@@@@<span class="token operator">&amp;</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>o@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">&amp;</span>@@@@@@@@@
  @@@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@o<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>o@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@#<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@@
  @@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@o<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>o@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@
  @@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@<span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>o@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@o<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@
  @@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>o@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@
  @@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">&amp;</span>@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>o@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@
  @@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@o<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>o@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@<span class="token operator">&amp;</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@
  @@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>o@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>#@@@@#<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@
  @@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@o<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@<span class="token operator">&amp;</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@
  @@<span class="token operator">&amp;</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>o@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">&amp;</span>@@
  @@@o<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@#<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>o@@@
  @@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@#<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@o<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@
  @@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>o@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@
  @@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@o<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@
  @@@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@@@<span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>o@@@@@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@@
  @@@@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@@@@@@@@@@@@@@@@@#<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@@@
  @@@@@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>#@@@@@@@@@@@@@@@@<span class="token operator">&amp;</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@@@@
  @@@@@@@@@@@<span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>oooo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">8</span>@@@@@@@@@@@
  @@@@@@@@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@@@@@@@
  @@@@@@@@@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@@@@@@@@
  @@@@@@@@@@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@@@@@@@@@
  @@@@@@@@@@@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@@@@@@@@@@
  @@@@@@@@@@@@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@@@@@@@@@@@
  @@@@@@@@@@@@@@@@@@@<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span>@@@@@@@@@@@@@@@@@@@
  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_39-4-org-springframework-boot-springapplication-run-java-lang-string-源码解读" tabindex="-1"><a class="header-anchor" href="#_39-4-org-springframework-boot-springapplication-run-java-lang-string-源码解读" aria-hidden="true">#</a> 39.4 org.springframework.boot.SpringApplication#run(java.lang.String...) 源码解读</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token doc-comment comment">/**
     * Run the Spring application, creating and refreshing a new
     * <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">ApplicationContext</span></span><span class="token punctuation">}</span>.
     *
     * <span class="token keyword">@param</span> <span class="token parameter">args</span> the application arguments (usually passed from a Java main method)
     * <span class="token keyword">@return</span> a running <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">ApplicationContext</span></span><span class="token punctuation">}</span>
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">ConfigurableApplicationContext</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 记录开始时间</span>
        <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DefaultBootstrapContext</span> bootstrapContext <span class="token operator">=</span> <span class="token function">createBootstrapContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ConfigurableApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token function">configureHeadlessProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1 得到SpringApplicationRunListeners，名字取得不好，实际上是事件发布器</span>
        <span class="token class-name">SpringApplicationRunListeners</span> listeners <span class="token operator">=</span> <span class="token function">getRunListeners</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1.1 发布Springboot程序启动事件----&gt; 也是事件1</span>
        listeners<span class="token punctuation">.</span><span class="token function">starting</span><span class="token punctuation">(</span>bootstrapContext<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mainApplicationClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// 2 封装启动参数args</span>
            <span class="token class-name">ApplicationArguments</span> applicationArguments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultApplicationArguments</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 3 准备Environment并添加命令行参数（SimpleCommandLinePropertySource）</span>
            <span class="token class-name">ConfigurableEnvironment</span> environment <span class="token operator">=</span> <span class="token function">prepareEnvironment</span><span class="token punctuation">(</span>listeners<span class="token punctuation">,</span> bootstrapContext<span class="token punctuation">,</span> applicationArguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 3.1 配置spring.beaninfo.ignore</span>
            <span class="token function">configureIgnoreBeanInfo</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 7 准备Banner打印器</span>
            <span class="token class-name">Banner</span> printedBanner <span class="token operator">=</span> <span class="token function">printBanner</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 8 创建Spring的Bean容器</span>
            context <span class="token operator">=</span> <span class="token function">createApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            context<span class="token punctuation">.</span><span class="token function">setApplicationStartup</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>applicationStartup<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 9 准备容器</span>
            <span class="token function">prepareContext</span><span class="token punctuation">(</span>bootstrapContext<span class="token punctuation">,</span> context<span class="token punctuation">,</span> environment<span class="token punctuation">,</span> listeners<span class="token punctuation">,</span> applicationArguments<span class="token punctuation">,</span> printedBanner<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 11 refresh 容器</span>
            <span class="token function">refreshContext</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">afterRefresh</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> applicationArguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Duration</span> timeTakenToStartup <span class="token operator">=</span> <span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofNanos</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>logStartupInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">new</span> <span class="token class-name">StartupInfoLogger</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mainApplicationClass<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">logStarted</span><span class="token punctuation">(</span><span class="token function">getApplicationLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> timeTakenToStartup<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 11.1 发布application stared 事件，表示Spring容器初始化完毕----&gt; 事件5</span>
            listeners<span class="token punctuation">.</span><span class="token function">started</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> timeTakenToStartup<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 12 执行runner方法</span>
            <span class="token function">callRunners</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> applicationArguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 12.1 发生异常的话，发布application failed事件----&gt; 事件7</span>
            <span class="token function">handleRunFailure</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ex<span class="token punctuation">,</span> listeners<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Duration</span> timeTakenToReady <span class="token operator">=</span> <span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofNanos</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 12.1 发布application ready事件，表示SpringBoot已经启动完毕----&gt; 事件6</span>
            listeners<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> timeTakenToReady<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">handleRunFailure</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ex<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 12.2 发生异常的话，发布application failed事件----&gt; 事件7</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> context<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">ConfigurableEnvironment</span> <span class="token function">prepareEnvironment</span><span class="token punctuation">(</span><span class="token class-name">SpringApplicationRunListeners</span> listeners<span class="token punctuation">,</span>
                                                       <span class="token class-name">DefaultBootstrapContext</span> bootstrapContext<span class="token punctuation">,</span>
                                                       <span class="token class-name">ApplicationArguments</span> applicationArguments<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Create and configure the environment</span>
        <span class="token comment">// 3 准备Environment</span>
        <span class="token class-name">ConfigurableEnvironment</span> environment <span class="token operator">=</span> <span class="token function">getOrCreateEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 4 ConfigurationPropertySources处理</span>
        <span class="token function">configureEnvironment</span><span class="token punctuation">(</span>environment<span class="token punctuation">,</span> applicationArguments<span class="token punctuation">.</span><span class="token function">getSourceArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ConfigurationPropertySources</span><span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 4.1 发布 application environment 已准备事件----&gt; 事件2</span>
        listeners<span class="token punctuation">.</span><span class="token function">environmentPrepared</span><span class="token punctuation">(</span>bootstrapContext<span class="token punctuation">,</span> environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 5 通过 EnvironmentPostProcessorApplicationListener 进行 env 后处理（*）</span>
        <span class="token comment">// application.properties，由 StandardConfigDataLocationResolver 解析</span>
        <span class="token comment">// spring.application.json</span>
        <span class="token class-name">DefaultPropertiesPropertySource</span><span class="token punctuation">.</span><span class="token function">moveToEnd</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token operator">!</span>environment<span class="token punctuation">.</span><span class="token function">containsProperty</span><span class="token punctuation">(</span><span class="token string">&quot;spring.main.environment-prefix&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string">&quot;Environment prefix cannot be set via properties.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 6 绑定spring.main 到SpringApplication对象</span>
        <span class="token function">bindToSpringApplication</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isCustomEnvironment<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            environment <span class="token operator">=</span> <span class="token function">convertEnvironment</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">ConfigurationPropertySources</span><span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> environment<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">prepareContext</span><span class="token punctuation">(</span><span class="token class-name">DefaultBootstrapContext</span> bootstrapContext<span class="token punctuation">,</span> <span class="token class-name">ConfigurableApplicationContext</span> context<span class="token punctuation">,</span>
                                <span class="token class-name">ConfigurableEnvironment</span> environment<span class="token punctuation">,</span> <span class="token class-name">SpringApplicationRunListeners</span> listeners<span class="token punctuation">,</span>
                                <span class="token class-name">ApplicationArguments</span> applicationArguments<span class="token punctuation">,</span> <span class="token class-name">Banner</span> printedBanner<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        context<span class="token punctuation">.</span><span class="token function">setEnvironment</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 10. 加载Bean定义</span>
        <span class="token function">postProcessApplicationContext</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 准备容量，也就是执行容器的初始化</span>
        <span class="token function">applyInitializers</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 10.1 发布application prepared 事件----&gt; 事件4</span>
        listeners<span class="token punctuation">.</span><span class="token function">contextPrepared</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        bootstrapContext<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>logStartupInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">logStartupInfo</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">logStartupProfileInfo</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// Add boot specific singleton beans</span>
        <span class="token class-name">ConfigurableListableBeanFactory</span> beanFactory <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        beanFactory<span class="token punctuation">.</span><span class="token function">registerSingleton</span><span class="token punctuation">(</span><span class="token string">&quot;springApplicationArguments&quot;</span><span class="token punctuation">,</span> applicationArguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>printedBanner <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            beanFactory<span class="token punctuation">.</span><span class="token function">registerSingleton</span><span class="token punctuation">(</span><span class="token string">&quot;springBootBanner&quot;</span><span class="token punctuation">,</span> printedBanner<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>beanFactory <span class="token keyword">instanceof</span> <span class="token class-name">AbstractAutowireCapableBeanFactory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">AbstractAutowireCapableBeanFactory</span><span class="token punctuation">)</span> beanFactory<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAllowCircularReferences</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>allowCircularReferences<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>beanFactory <span class="token keyword">instanceof</span> <span class="token class-name">DefaultListableBeanFactory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">DefaultListableBeanFactory</span><span class="token punctuation">)</span> beanFactory<span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">setAllowBeanDefinitionOverriding</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>allowBeanDefinitionOverriding<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>lazyInitialization<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            context<span class="token punctuation">.</span><span class="token function">addBeanFactoryPostProcessor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LazyInitializationBeanFactoryPostProcessor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// Load the sources</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> sources <span class="token operator">=</span> <span class="token function">getAllSources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">notEmpty</span><span class="token punctuation">(</span>sources<span class="token punctuation">,</span> <span class="token string">&quot;Sources must not be empty&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">load</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> sources<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        listeners<span class="token punctuation">.</span><span class="token function">contextLoaded</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * Apply any relevant post processing the <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">ApplicationContext</span></span><span class="token punctuation">}</span>. Subclasses can
     * apply additional processing as required.
     *
     * <span class="token keyword">@param</span> <span class="token parameter">context</span> the application context
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">postProcessApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableApplicationContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>beanNameGenerator <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            context<span class="token punctuation">.</span><span class="token function">getBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">registerSingleton</span><span class="token punctuation">(</span><span class="token class-name">AnnotationConfigUtils</span><span class="token punctuation">.</span><span class="token constant">CONFIGURATION_BEAN_NAME_GENERATOR</span><span class="token punctuation">,</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>beanNameGenerator<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourceLoader <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>context <span class="token keyword">instanceof</span> <span class="token class-name">GenericApplicationContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">GenericApplicationContext</span><span class="token punctuation">)</span> context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setResourceLoader</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourceLoader<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>context <span class="token keyword">instanceof</span> <span class="token class-name">DefaultResourceLoader</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">DefaultResourceLoader</span><span class="token punctuation">)</span> context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setClassLoader</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourceLoader<span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>addConversionService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            context<span class="token punctuation">.</span><span class="token function">getBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setConversionService</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getConversionService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_39-5-收获💡" tabindex="-1"><a class="header-anchor" href="#_39-5-收获💡" aria-hidden="true">#</a> 39.5 收获💡</h3><ol><li>SpringApplication 构造方法中所做的操作 <ul><li>可以有多种源用来加载 bean 定义</li><li>应用类型推断</li><li>添加容器初始化器</li><li>添加监听器</li><li>演示主类推断</li></ul></li><li>如何读取 spring.factories 中的配置</li><li>从配置中获取重要的事件发布器：SpringApplicationRunListeners</li><li>容器的创建、初始化器增强、加载 bean 定义等</li><li>CommandLineRunner、ApplicationRunner 的作用</li><li>环境对象 <ol><li>命令行 PropertySource</li><li>ConfigurationPropertySources 规范环境键名称</li><li>EnvironmentPostProcessor 后处理增强 <ul><li>由 EventPublishingRunListener 通过监听事件2️⃣来调用</li></ul></li><li>绑定 spring.main 前缀的 key value 至 SpringApplication</li></ol></li><li>Banner</li></ol><h2 id="_40-tomcat-内嵌容器" tabindex="-1"><a class="header-anchor" href="#_40-tomcat-内嵌容器" aria-hidden="true">#</a> 40 Tomcat 内嵌容器</h2><h3 id="_40-1-tomcat-基本结构" tabindex="-1"><a class="header-anchor" href="#_40-1-tomcat-基本结构" aria-hidden="true">#</a> 40.1 Tomcat 基本结构</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Server
└───Service
    ├───Connector (协议, 端口)
    └───Engine
        └───Host(虚拟主机 localhost)
            ├───Context1 (应用1, 可以设置虚拟路径, / 即 url 起始路径; 项目磁盘路径, 即 docBase )
            │   │   index.html
            │   └───WEB-INF
            │       │   web.xml (servlet, filter, listener) 3.0
            │       ├───classes (servlet, controller, service ...)
            │       ├───jsp
            │       └───lib (第三方 jar 包)
            └───Context2 (应用2)
                │   index.html
                └───WEB-INF
                        web.xml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_40-2-演示1-tomcat-内嵌容器" tabindex="-1"><a class="header-anchor" href="#_40-2-演示1-tomcat-内嵌容器" aria-hidden="true">#</a> 40.2 演示1 - Tomcat 内嵌容器</h3><h4 id="_40-2-1-关键代码" tabindex="-1"><a class="header-anchor" href="#_40-2-1-关键代码" aria-hidden="true">#</a> 40.2.1 关键代码</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">LifecycleException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1.创建 Tomcat 对象</span>
    <span class="token class-name">Tomcat</span> tomcat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tomcat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tomcat<span class="token punctuation">.</span><span class="token function">setBaseDir</span><span class="token punctuation">(</span><span class="token string">&quot;tomcat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.创建项目文件夹, 即 docBase 文件夹</span>
    <span class="token class-name">File</span> docBase <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">createTempDirectory</span><span class="token punctuation">(</span><span class="token string">&quot;boot.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    docBase<span class="token punctuation">.</span><span class="token function">deleteOnExit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3.创建 Tomcat 项目, 在 Tomcat 中称为 Context</span>
    <span class="token class-name">Context</span> context <span class="token operator">=</span> tomcat<span class="token punctuation">.</span><span class="token function">addContext</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> docBase<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 4.编程添加 Servlet</span>
    context<span class="token punctuation">.</span><span class="token function">addServletContainerInitializer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ServletContainerInitializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStartup</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">,</span> <span class="token class-name">ServletContext</span> ctx<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
            <span class="token class-name">HelloServlet</span> helloServlet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HelloServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">addServlet</span><span class="token punctuation">(</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span> helloServlet<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 5.启动 Tomcat</span>
    tomcat<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 6.创建连接器, 设置监听端口</span>
    <span class="token class-name">Connector</span> connector <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Connector</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Http11Nio2Protocol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    connector<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tomcat<span class="token punctuation">.</span><span class="token function">setConnector</span><span class="token punctuation">(</span>connector<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_40-3-演示2-集成-spring-容器" tabindex="-1"><a class="header-anchor" href="#_40-3-演示2-集成-spring-容器" aria-hidden="true">#</a> 40.3 演示2 - 集成 Spring 容器</h3><h4 id="_40-3-1-关键代码" tabindex="-1"><a class="header-anchor" href="#_40-3-1-关键代码" aria-hidden="true">#</a> 40.3.1 关键代码</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">WebApplicationContext</span> springContext <span class="token operator">=</span> <span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 4.编程添加 Servlet</span>
context<span class="token punctuation">.</span><span class="token function">addServletContainerInitializer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ServletContainerInitializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStartup</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">,</span> <span class="token class-name">ServletContext</span> ctx<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token comment">// ⬇️通过 ServletRegistrationBean 添加 DispatcherServlet 等</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ServletRegistrationBean</span> registrationBean <span class="token operator">:</span> 
             springContext<span class="token punctuation">.</span><span class="token function">getBeansOfType</span><span class="token punctuation">(</span><span class="token class-name">ServletRegistrationBean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            registrationBean<span class="token punctuation">.</span><span class="token function">onStartup</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_40-4-完整代码" tabindex="-1"><a class="header-anchor" href="#_40-4-完整代码" aria-hidden="true">#</a> 40.4 完整代码</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a40</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a40<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">HelloServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span></span><span class="token class-name">Context</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span></span><span class="token class-name">LifecycleException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>connector<span class="token punctuation">.</span></span><span class="token class-name">Connector</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>startup<span class="token punctuation">.</span></span><span class="token class-name">Tomcat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>coyote<span class="token punctuation">.</span>http11<span class="token punctuation">.</span></span><span class="token class-name">Http11Nio2Protocol</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">DispatcherServletRegistrationBean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletRegistrationBean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span>converter<span class="token punctuation">.</span>json<span class="token punctuation">.</span></span><span class="token class-name">MappingJackson2HttpMessageConverter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">AnnotationConfigWebApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">DispatcherServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>mvc<span class="token punctuation">.</span>method<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMappingHandlerAdapter</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletContainerInitializer</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>file<span class="token punctuation">.</span></span><span class="token class-name">Files</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Set</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">UUID</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> TestTomcat
 * <span class="token keyword">@description</span>
 * <span class="token keyword">@since</span> 2022/12/15 18:48
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestTomcat</span> <span class="token punctuation">{</span>
    <span class="token comment">/*
    Server
    └───Service
        ├───Connector (协议, 端口)
        └───Engine
            └───Host(虚拟主机 localhost)
                ├───Context1 (应用1, 可以设置虚拟路径, / 即 url 起始路径; 项目磁盘路径, 即 docBase )
                │   │   index.html
                │   └───WEB-INF
                │       │   web.xml (servlet, filter, listener) 3.0
                │       ├───classes (servlet, controller, service ...)
                │       ├───jsp
                │       └───lib (第三方 jar 包)
                └───Context2 (应用2)
                    │   index.html
                    └───WEB-INF
                            web.xml
 */</span>

    <span class="token doc-comment comment">/**
     *
     * <span class="token keyword">@param</span> <span class="token parameter">args</span>
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">LifecycleException</span> <span class="token punctuation">{</span>
        <span class="token comment">// 1 创建Tomcat对象</span>
        <span class="token class-name">Tomcat</span> tomcat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tomcat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tomcat<span class="token punctuation">.</span><span class="token function">setBaseDir</span><span class="token punctuation">(</span><span class="token string">&quot;tomcat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2 创建项目文件夹，即docBase文件夹，一般创建临时目录即可，可以设置使用完就删除</span>
        <span class="token class-name">File</span> docBase <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">createTempDirectory</span><span class="token punctuation">(</span><span class="token string">&quot;boot.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        docBase<span class="token punctuation">.</span><span class="token function">deleteOnExit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 3 创建Tomcat项目，在Tomcat中称为Context</span>
        <span class="token class-name">Context</span> context <span class="token operator">=</span> tomcat<span class="token punctuation">.</span><span class="token function">addContext</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> docBase<span class="token punctuation">.</span><span class="token function">getCanonicalPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 4 编程的方式添加Servlet</span>
        <span class="token comment">// 4.1 创建一个Spring Bean容器</span>
        <span class="token class-name">AnnotationConfigWebApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token function">createApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">addServletContainerInitializer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ServletContainerInitializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStartup</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">,</span> <span class="token class-name">ServletContext</span> ctx<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
                ctx<span class="token punctuation">.</span><span class="token function">addServlet</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token class-name">HelloServlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 添加DispatchServlet</span>
                <span class="token comment">/*DispatcherServlet dispatcherServlet = applicationContext.getBean(DispatcherServlet.class);
                ctx.addServlet(&quot;dispatcherServlet&quot;, dispatcherServlet).addMapping(&quot;/&quot;);*/</span>
                <span class="token comment">// 换成以下更优雅的方式</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ServletRegistrationBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> registrationBean <span class="token operator">:</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBeansOfType</span><span class="token punctuation">(</span><span class="token class-name">ServletRegistrationBean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    registrationBean<span class="token punctuation">.</span><span class="token function">onStartup</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 5 启动Tomcat</span>
        tomcat<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 6 创建连接器，并添加监听端口</span>
        <span class="token class-name">Connector</span> connector <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Connector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connector<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">8081</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tomcat<span class="token punctuation">.</span><span class="token function">setConnector</span><span class="token punctuation">(</span>connector<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">LifecycleException</span> <span class="token punctuation">{</span>
        <span class="token comment">// 1 创建Tomcat对象</span>
        <span class="token class-name">Tomcat</span> tomcat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tomcat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tomcat<span class="token punctuation">.</span><span class="token function">setBaseDir</span><span class="token punctuation">(</span><span class="token string">&quot;tomcat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2 创建项目文件夹，即docBase文件夹，一般创建临时目录即可，可以设置使用完就删除</span>
        <span class="token class-name">File</span> docBase <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">createTempDirectory</span><span class="token punctuation">(</span><span class="token string">&quot;boot.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        docBase<span class="token punctuation">.</span><span class="token function">deleteOnExit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 3 创建Tomcat项目，在Tomcat中称为Context</span>
        <span class="token class-name">Context</span> context <span class="token operator">=</span> tomcat<span class="token punctuation">.</span><span class="token function">addContext</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> docBase<span class="token punctuation">.</span><span class="token function">getCanonicalPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 4 编程的方式添加Servlet</span>
        <span class="token comment">// 4.1 创建一个Spring Bean容器</span>
        <span class="token class-name">AnnotationConfigWebApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token function">createApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">addServletContainerInitializer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ServletContainerInitializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStartup</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">,</span> <span class="token class-name">ServletContext</span> ctx<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
                ctx<span class="token punctuation">.</span><span class="token function">addServlet</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token class-name">HelloServlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 添加DispatchServlet</span>
                <span class="token class-name">DispatcherServlet</span> dispatcherServlet <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">DispatcherServlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                ctx<span class="token punctuation">.</span><span class="token function">addServlet</span><span class="token punctuation">(</span><span class="token string">&quot;dispatcherServlet&quot;</span><span class="token punctuation">,</span> dispatcherServlet<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 5 启动Tomcat</span>
        tomcat<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 6 创建连接器，并添加监听端口</span>
        <span class="token class-name">Connector</span> connector <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Connector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connector<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">8081</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tomcat<span class="token punctuation">.</span><span class="token function">setConnector</span><span class="token punctuation">(</span>connector<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">AnnotationConfigWebApplicationContext</span> <span class="token function">createApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">AnnotationConfigWebApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigWebApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">WebConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> applicationContext<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">DispatcherServlet</span> <span class="token function">dispatcherServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DispatcherServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">DispatcherServletRegistrationBean</span> <span class="token function">dispatcherServletRegistrationBean</span><span class="token punctuation">(</span><span class="token class-name">DispatcherServlet</span> dispatcherServlet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DispatcherServletRegistrationBean</span><span class="token punctuation">(</span>dispatcherServlet<span class="token punctuation">,</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">RequestMappingHandlerAdapter</span> <span class="token function">requestMappingHandlerAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">RequestMappingHandlerAdapter</span> handlerAdapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RequestMappingHandlerAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 设置返回值json解析器</span>
            handlerAdapter<span class="token punctuation">.</span><span class="token function">setMessageConverters</span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MappingJackson2HttpMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> handlerAdapter<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@RestController</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello2&quot;</span><span class="token punctuation">)</span>
            <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonMap</span><span class="token punctuation">(</span><span class="token string">&quot;hello2&quot;</span><span class="token punctuation">,</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;, 你好啊&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">baseTomcat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">LifecycleException</span> <span class="token punctuation">{</span>
        <span class="token comment">// 1 创建Tomcat对象</span>
        <span class="token class-name">Tomcat</span> tomcat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tomcat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tomcat<span class="token punctuation">.</span><span class="token function">setBaseDir</span><span class="token punctuation">(</span><span class="token string">&quot;tomcat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 应用1, 可以设置虚拟路径, / 即 url 起始路径; 项目磁盘路径, 即 docBase</span>
        <span class="token comment">// 2 创建项目文件夹，即docBase文件夹，一般创建临时目录即可，可以设置使用完就删除</span>
        <span class="token class-name">File</span> docBase <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">createTempDirectory</span><span class="token punctuation">(</span><span class="token string">&quot;boot.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        docBase<span class="token punctuation">.</span><span class="token function">deleteOnExit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 3 创建Tomcat项目，在Tomcat中称为Context</span>
        <span class="token comment">// 3.1 contextPath 设置为&quot;&quot; 相当于访问时的/</span>
        <span class="token class-name">Context</span> context <span class="token operator">=</span> tomcat<span class="token punctuation">.</span><span class="token function">addContext</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> docBase<span class="token punctuation">.</span><span class="token function">getCanonicalPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 4 编程的方式添加Servlet</span>
        context<span class="token punctuation">.</span><span class="token function">addServletContainerInitializer</span><span class="token punctuation">(</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">addServlet</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token class-name">HelloServlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 5 启动Tomcat</span>
        tomcat<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 6 创建连接器，并添加监听端口</span>
        <span class="token class-name">Connector</span> connector <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Connector</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Http11Nio2Protocol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connector<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">8081</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tomcat<span class="token punctuation">.</span><span class="token function">setConnector</span><span class="token punctuation">(</span>connector<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_41-boot-自动配置" tabindex="-1"><a class="header-anchor" href="#_41-boot-自动配置" aria-hidden="true">#</a> 41 Boot 自动配置</h2><h3 id="_1-测试第三方导入配置注册的bean和导入本项目配置注册bean的注册时机" tabindex="-1"><a class="header-anchor" href="#_1-测试第三方导入配置注册的bean和导入本项目配置注册bean的注册时机" aria-hidden="true">#</a> 1 测试第三方导入配置注册的bean和导入本项目配置注册bean的注册时机</h3><h4 id="_1-1-方式1-直接导入配置类-此种导入会先注册第三方中的bean" tabindex="-1"><a class="header-anchor" href="#_1-1-方式1-直接导入配置类-此种导入会先注册第三方中的bean" aria-hidden="true">#</a> 1.1 方式1，直接导入配置类，此种导入会先注册第三方中的bean</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ConfigurationClassPostProcessor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Import</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">GenericApplicationContext</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> TestRegistrarBeanOrder1
 * <span class="token keyword">@description</span> 测试注册Bean的顺序
 * <span class="token keyword">@since</span> 2022/12/16 11:21
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestRegistrarBeanOrder1</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">GenericApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// false: 不允许重复的Bean定义, true 表示允许重复bean定义，并且后注册的bean会覆盖前注册的bean</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">getDefaultListableBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAllowBeanDefinitionOverriding</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">registerBean</span><span class="token punctuation">(</span><span class="token class-name">Config1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">registerBean</span><span class="token punctuation">(</span><span class="token class-name">ConfigurationClassPostProcessor</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 解析@Configuration 注解</span>

        applicationContext<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">AutoConfig1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">AutoConfig2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 导入第三方配置类，方式1，此种导入会先注册第三方中的bean</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Config1</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean1</span> <span class="token function">bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;本类配置: Bean1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Configuration</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfig1</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean1</span> <span class="token function">bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;第三方配置: Bean1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfig2</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean2</span> <span class="token function">bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;第三方配置: Bean2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean1</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Bean1...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean2</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Bean2...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_1-1-1-测试结果" tabindex="-1"><a class="header-anchor" href="#_1-1-1-测试结果" aria-hidden="true">#</a> 1.1.1 测试结果</h5><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code><span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">02</span><span class="token punctuation">:</span><span class="token number">45.157</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>TestRegistrarBeanOrder1   <span class="token operator">-</span> 本类配置<span class="token punctuation">:</span> Bean1 
<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">02</span><span class="token punctuation">:</span><span class="token number">45.164</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>TestRegistrarBeanOrder1   <span class="token operator">-</span> Bean1<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">02</span><span class="token punctuation">:</span><span class="token number">45.167</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>TestRegistrarBeanOrder1   <span class="token operator">-</span> 第三方配置<span class="token punctuation">:</span> Bean2 
<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">02</span><span class="token punctuation">:</span><span class="token number">45.167</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>TestRegistrarBeanOrder1   <span class="token operator">-</span> Bean2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-2-方式2-通过-importselector-此种导入会先注册第三方中的bean" tabindex="-1"><a class="header-anchor" href="#_1-2-方式2-通过-importselector-此种导入会先注册第三方中的bean" aria-hidden="true">#</a> 1.2 方式2：通过@ImportSelector，此种导入会先注册第三方中的bean</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">GenericApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">AnnotationMetadata</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> TestRegistrarBeanOrder2
 * <span class="token keyword">@description</span> 测试注册Bean的顺序
 * <span class="token keyword">@since</span> 2022/12/16 11:21
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestRegistrarBeanOrder2</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">GenericApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// false: 不允许重复的Bean定义, true 表示允许重复bean定义，并且后注册的bean会覆盖前注册的bean</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">getDefaultListableBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAllowBeanDefinitionOverriding</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">registerBean</span><span class="token punctuation">(</span><span class="token class-name">Config1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">registerBean</span><span class="token punctuation">(</span><span class="token class-name">ConfigurationClassPostProcessor</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 解析@Configuration 注解</span>

        applicationContext<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token comment">// @Import({AutoConfig1.class, AutoConfig2.class}) // 导入第三方配置类，方式1，此种导入会先注册第三方中的bean</span>
    <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">MyImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Config1</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean1</span> <span class="token function">bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;本类配置: Bean1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyImportSelector</span> <span class="token keyword">implements</span> <span class="token class-name">ImportSelector</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> importingClassMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
                    <span class="token class-name">AutoConfig1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">AutoConfig2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Configuration</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfig1</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean1</span> <span class="token function">bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;第三方配置: Bean1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfig2</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean2</span> <span class="token function">bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;第三方配置: Bean2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean1</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Bean1...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean2</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Bean2...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_1-2-1-测试结果" tabindex="-1"><a class="header-anchor" href="#_1-2-1-测试结果" aria-hidden="true">#</a> 1.2.1 测试结果</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span><span class="token constant">DEBUG</span><span class="token punctuation">]</span> <span class="token number">12</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">39.068</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a41<span class="token punctuation">.</span></span>TestRegistrarBeanOrder2</span>   <span class="token operator">-</span> 本类配置<span class="token operator">:</span> <span class="token class-name">Bean1</span> 
<span class="token punctuation">[</span><span class="token constant">DEBUG</span><span class="token punctuation">]</span> <span class="token number">12</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">39.074</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a41<span class="token punctuation">.</span></span>TestRegistrarBeanOrder2</span>   <span class="token operator">-</span> <span class="token class-name">Bean1</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
<span class="token punctuation">[</span><span class="token constant">DEBUG</span><span class="token punctuation">]</span> <span class="token number">12</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">39.077</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a41<span class="token punctuation">.</span></span>TestRegistrarBeanOrder2</span>   <span class="token operator">-</span> 第三方配置<span class="token operator">:</span> <span class="token class-name">Bean2</span> 
<span class="token punctuation">[</span><span class="token constant">DEBUG</span><span class="token punctuation">]</span> <span class="token number">12</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">39.077</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a41<span class="token punctuation">.</span></span>TestRegistrarBeanOrder2</span>   <span class="token operator">-</span> <span class="token class-name">Bean2</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-3-方式3-通过-deferredimportselector-此种导入会先推迟注册第三方中的bean-会优先注册本类的bean" tabindex="-1"><a class="header-anchor" href="#_1-3-方式3-通过-deferredimportselector-此种导入会先推迟注册第三方中的bean-会优先注册本类的bean" aria-hidden="true">#</a> 1.3 方式3：通过@DeferredImportSelector，此种导入会先推迟注册第三方中的bean，会优先注册本类的bean</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">GenericApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">AnnotationMetadata</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> TestRegistrarBeanOrder3
 * <span class="token keyword">@description</span> 测试注册Bean的顺序
 * <span class="token keyword">@since</span> 2022/12/16 11:21
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestRegistrarBeanOrder3</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">GenericApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// false: 不允许重复的Bean定义, true 表示允许重复bean定义，并且后注册的bean会覆盖前注册的bean</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">getDefaultListableBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAllowBeanDefinitionOverriding</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">registerBean</span><span class="token punctuation">(</span><span class="token class-name">Config1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">registerBean</span><span class="token punctuation">(</span><span class="token class-name">ConfigurationClassPostProcessor</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 解析@Configuration 注解</span>

        applicationContext<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token comment">// @Import({AutoConfig1.class, AutoConfig2.class}) // 导入第三方配置类，方式1，此种导入会先注册第三方中的bean</span>
    <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">MyImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Config1</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean1</span> <span class="token function">bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;本类配置: Bean1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyImportSelector</span> <span class="token keyword">implements</span> <span class="token class-name">DeferredImportSelector</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> importingClassMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
                    <span class="token class-name">AutoConfig1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">AutoConfig2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Configuration</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfig1</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean1</span> <span class="token function">bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;第三方配置: Bean1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfig2</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean2</span> <span class="token function">bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;第三方配置: Bean2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean1</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Bean1...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean2</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Bean2...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_1-3-1-测试结果" tabindex="-1"><a class="header-anchor" href="#_1-3-1-测试结果" aria-hidden="true">#</a> 1.3.1 测试结果</h5><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code><span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">:</span><span class="token number">15.869</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>TestRegistrarBeanOrder3   <span class="token operator">-</span> 第三方配置<span class="token punctuation">:</span> Bean1 
<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">:</span><span class="token number">15.876</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>TestRegistrarBeanOrder3   <span class="token operator">-</span> Bean1<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">:</span><span class="token number">15.883</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>TestRegistrarBeanOrder3   <span class="token operator">-</span> 第三方配置<span class="token punctuation">:</span> Bean2 
<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">:</span><span class="token number">15.884</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>TestRegistrarBeanOrder3   <span class="token operator">-</span> Bean2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-4-导入方式4-读取meta-inf-spring-factories配置的方式导入" tabindex="-1"><a class="header-anchor" href="#_1-4-导入方式4-读取meta-inf-spring-factories配置的方式导入" aria-hidden="true">#</a> 1.4 导入方式4：读取<code>META-INF/spring.factories</code>配置的方式导入</h4><h5 id="_1-4-1-meta-inf-spring-factories" tabindex="-1"><a class="header-anchor" href="#_1-4-1-meta-inf-spring-factories" aria-hidden="true">#</a> 1.4.1 META-INF/spring.factories</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>com.itheima.boot.a41.TestRegistrarBeanOrder4$MyImportSelector=\
  com.itheima.boot.a41.TestRegistrarBeanOrder4.AutoConfig1,\
  com.itheima.boot.a41.TestRegistrarBeanOrder4.AutoConfig2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_1-4-2-测试代码" tabindex="-1"><a class="header-anchor" href="#_1-4-2-测试代码" aria-hidden="true">#</a> 1.4.2 测试代码</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">GenericApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">SpringFactoriesLoader</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">AnnotationMetadata</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> TestRegistrarBeanOrder4
 * <span class="token keyword">@description</span> 测试注册Bean的顺序
 * <span class="token keyword">@since</span> 2022/12/16 11:21
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestRegistrarBeanOrder4</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">GenericApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// false: 不允许重复的Bean定义, true 表示允许重复bean定义，并且后注册的bean会覆盖前注册的bean</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">getDefaultListableBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAllowBeanDefinitionOverriding</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">registerBean</span><span class="token punctuation">(</span><span class="token class-name">Config1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">registerBean</span><span class="token punctuation">(</span><span class="token class-name">ConfigurationClassPostProcessor</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 解析@Configuration 注解</span>

        applicationContext<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token comment">// @Import({AutoConfig1.class, AutoConfig2.class}) // 导入第三方配置类，方式1，此种导入会先注册第三方中的bean</span>
    <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">MyImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Config1</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean1</span> <span class="token function">bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;本类配置: Bean1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyImportSelector</span> <span class="token keyword">implements</span> <span class="token class-name">DeferredImportSelector</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> importingClassMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">/*return new String[] {
                    AutoConfig1.class.getName(), AutoConfig2.class.getName()
            };*/</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> beanNames <span class="token operator">=</span> <span class="token class-name">SpringFactoriesLoader</span><span class="token punctuation">.</span><span class="token function">loadFactoryNames</span><span class="token punctuation">(</span><span class="token class-name">MyImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> beanNames<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Configuration</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfig1</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean1</span> <span class="token function">bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;第三方配置: Bean1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfig2</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean2</span> <span class="token function">bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;第三方配置: Bean2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean1</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Bean1...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean2</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Bean2...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_1-4-3-测试结果" tabindex="-1"><a class="header-anchor" href="#_1-4-3-测试结果" aria-hidden="true">#</a> 1.4.3 测试结果</h5><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code><span class="token punctuation">[</span>WARN <span class="token punctuation">]</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">56.011</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>c<span class="token punctuation">.</span>s<span class="token punctuation">.</span>GenericApplicationContext   <span class="token operator">-</span> Exception encountered during <span class="token keyword">context</span> initialization <span class="token operator">-</span> cancelling refresh attempt<span class="token punctuation">:</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>BeanDefinitionOverrideException<span class="token punctuation">:</span> Invalid bean definition <span class="token keyword">with</span> name <span class="token number">&#39;bea</span>n1&#39; defined in <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>com<span class="token operator">/</span>itheima<span class="token operator">/</span>boot<span class="token operator">/</span>a41<span class="token operator">/</span>TestRegistrarBeanOrder4$AutoConfig1<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span><span class="token punctuation">:</span> Cannot register bean definition <span class="token punctuation">[</span>Root bean<span class="token punctuation">:</span> <span class="token keyword">class</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">;</span> scope<span class="token operator">=</span><span class="token punctuation">;</span> abstract<span class="token operator">=</span>false<span class="token punctuation">;</span> lazyInit<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span> autowireMode<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span> dependencyCheck<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> autowireCandidate<span class="token operator">=</span>true<span class="token punctuation">;</span> primary<span class="token operator">=</span>false<span class="token punctuation">;</span> factoryBeanName<span class="token operator">=</span>com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>TestRegistrarBeanOrder4$AutoConfig1<span class="token punctuation">;</span> factoryMethodName<span class="token operator">=</span>bean1<span class="token punctuation">;</span> initMethodName<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span> destroyMethodName<span class="token operator">=</span><span class="token punctuation">(</span>inferred<span class="token punctuation">)</span><span class="token punctuation">;</span> defined in <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>com<span class="token operator">/</span>itheima<span class="token operator">/</span>boot<span class="token operator">/</span>a41<span class="token operator">/</span>TestRegistrarBeanOrder4$AutoConfig1<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">for</span> bean <span class="token number">&#39;bea</span>n1&#39;<span class="token punctuation">:</span> There is already <span class="token punctuation">[</span>Root bean<span class="token punctuation">:</span> <span class="token keyword">class</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">;</span> scope<span class="token operator">=</span><span class="token punctuation">;</span> abstract<span class="token operator">=</span>false<span class="token punctuation">;</span> lazyInit<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span> autowireMode<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span> dependencyCheck<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> autowireCandidate<span class="token operator">=</span>true<span class="token punctuation">;</span> primary<span class="token operator">=</span>false<span class="token punctuation">;</span> factoryBeanName<span class="token operator">=</span>com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>TestRegistrarBeanOrder4$Config1<span class="token punctuation">;</span> factoryMethodName<span class="token operator">=</span>bean1<span class="token punctuation">;</span> initMethodName<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span> destroyMethodName<span class="token operator">=</span><span class="token punctuation">(</span>inferred<span class="token punctuation">)</span><span class="token punctuation">;</span> defined in com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>TestRegistrarBeanOrder4$Config1<span class="token punctuation">]</span> bound<span class="token punctuation">.</span> 
Exception in thread <span class="token string">&quot;main&quot;</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>BeanDefinitionOverrideException<span class="token punctuation">:</span> Invalid bean definition <span class="token keyword">with</span> name <span class="token number">&#39;bea</span>n1&#39; defined in <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>com<span class="token operator">/</span>itheima<span class="token operator">/</span>boot<span class="token operator">/</span>a41<span class="token operator">/</span>TestRegistrarBeanOrder4$AutoConfig1<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span><span class="token punctuation">:</span> Cannot register bean definition <span class="token punctuation">[</span>Root bean<span class="token punctuation">:</span> <span class="token keyword">class</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">;</span> scope<span class="token operator">=</span><span class="token punctuation">;</span> abstract<span class="token operator">=</span>false<span class="token punctuation">;</span> lazyInit<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span> autowireMode<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span> dependencyCheck<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> autowireCandidate<span class="token operator">=</span>true<span class="token punctuation">;</span> primary<span class="token operator">=</span>false<span class="token punctuation">;</span> factoryBeanName<span class="token operator">=</span>com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>TestRegistrarBeanOrder4$AutoConfig1<span class="token punctuation">;</span> factoryMethodName<span class="token operator">=</span>bean1<span class="token punctuation">;</span> initMethodName<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span> destroyMethodName<span class="token operator">=</span><span class="token punctuation">(</span>inferred<span class="token punctuation">)</span><span class="token punctuation">;</span> defined in <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>com<span class="token operator">/</span>itheima<span class="token operator">/</span>boot<span class="token operator">/</span>a41<span class="token operator">/</span>TestRegistrarBeanOrder4$AutoConfig1<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">for</span> bean <span class="token number">&#39;bea</span>n1&#39;<span class="token punctuation">:</span> There is already <span class="token punctuation">[</span>Root bean<span class="token punctuation">:</span> <span class="token keyword">class</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">;</span> scope<span class="token operator">=</span><span class="token punctuation">;</span> abstract<span class="token operator">=</span>false<span class="token punctuation">;</span> lazyInit<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span> autowireMode<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span> dependencyCheck<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> autowireCandidate<span class="token operator">=</span>true<span class="token punctuation">;</span> primary<span class="token operator">=</span>false<span class="token punctuation">;</span> factoryBeanName<span class="token operator">=</span>com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>TestRegistrarBeanOrder4$Config1<span class="token punctuation">;</span> factoryMethodName<span class="token operator">=</span>bean1<span class="token punctuation">;</span> initMethodName<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span> destroyMethodName<span class="token operator">=</span><span class="token punctuation">(</span>inferred<span class="token punctuation">)</span><span class="token punctuation">;</span> defined in com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>TestRegistrarBeanOrder4$Config1<span class="token punctuation">]</span> bound<span class="token punctuation">.</span>
	at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>support<span class="token punctuation">.</span>DefaultListableBeanFactory<span class="token punctuation">.</span><span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span>DefaultListableBeanFactory<span class="token punctuation">.</span>java<span class="token punctuation">:</span><span class="token number">1004</span><span class="token punctuation">)</span>
	at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>ConfigurationClassBeanDefinitionReader<span class="token punctuation">.</span><span class="token function">loadBeanDefinitionsForBeanMethod</span><span class="token punctuation">(</span>ConfigurationClassBeanDefinitionReader<span class="token punctuation">.</span>java<span class="token punctuation">:</span><span class="token number">295</span><span class="token punctuation">)</span>
	at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>ConfigurationClassBeanDefinitionReader<span class="token punctuation">.</span><span class="token function">loadBeanDefinitionsForConfigurationClass</span><span class="token punctuation">(</span>ConfigurationClassBeanDefinitionReader<span class="token punctuation">.</span>java<span class="token punctuation">:</span><span class="token number">153</span><span class="token punctuation">)</span>
	at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>ConfigurationClassBeanDefinitionReader<span class="token punctuation">.</span><span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span>ConfigurationClassBeanDefinitionReader<span class="token punctuation">.</span>java<span class="token punctuation">:</span><span class="token number">129</span><span class="token punctuation">)</span>
	at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>ConfigurationClassPostProcessor<span class="token punctuation">.</span><span class="token function">processConfigBeanDefinitions</span><span class="token punctuation">(</span>ConfigurationClassPostProcessor<span class="token punctuation">.</span>java<span class="token punctuation">:</span><span class="token number">343</span><span class="token punctuation">)</span>
	at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>ConfigurationClassPostProcessor<span class="token punctuation">.</span><span class="token function">postProcessBeanDefinitionRegistry</span><span class="token punctuation">(</span>ConfigurationClassPostProcessor<span class="token punctuation">.</span>java<span class="token punctuation">:</span><span class="token number">247</span><span class="token punctuation">)</span>
	at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span>support<span class="token punctuation">.</span>PostProcessorRegistrationDelegate<span class="token punctuation">.</span><span class="token function">invokeBeanDefinitionRegistryPostProcessors</span><span class="token punctuation">(</span>PostProcessorRegistrationDelegate<span class="token punctuation">.</span>java<span class="token punctuation">:</span><span class="token number">311</span><span class="token punctuation">)</span>
	at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span>support<span class="token punctuation">.</span>PostProcessorRegistrationDelegate<span class="token punctuation">.</span><span class="token function">invokeBeanFactoryPostProcessors</span><span class="token punctuation">(</span>PostProcessorRegistrationDelegate<span class="token punctuation">.</span>java<span class="token punctuation">:</span><span class="token number">112</span><span class="token punctuation">)</span>
	at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span>support<span class="token punctuation">.</span>AbstractApplicationContext<span class="token punctuation">.</span><span class="token function">invokeBeanFactoryPostProcessors</span><span class="token punctuation">(</span>AbstractApplicationContext<span class="token punctuation">.</span>java<span class="token punctuation">:</span><span class="token number">746</span><span class="token punctuation">)</span>
	at org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span>support<span class="token punctuation">.</span>AbstractApplicationContext<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span>AbstractApplicationContext<span class="token punctuation">.</span>java<span class="token punctuation">:</span><span class="token number">564</span><span class="token punctuation">)</span>
	at com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>TestRegistrarBeanOrder4<span class="token punctuation">.</span><span class="token function">main</span><span class="token punctuation">(</span>TestRegistrarBeanOrder4<span class="token punctuation">.</span>java<span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/assets/202212161234072-76bbd6bc.png" alt="image-20221216123416615" tabindex="0" loading="lazy"><figcaption>image-20221216123416615</figcaption></figure><h4 id="_1-5-解决方式4存在的问题-在第三方引入的配置类上-加上-conditionalonmissingbean" tabindex="-1"><a class="header-anchor" href="#_1-5-解决方式4存在的问题-在第三方引入的配置类上-加上-conditionalonmissingbean" aria-hidden="true">#</a> 1.5 解决方式4存在的问题(在第三方引入的配置类上，加上 @ConditionalOnMissingBean)</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token annotation punctuation">@Configuration</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfig1</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token annotation punctuation">@ConditionalOnMissingBean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean1</span> <span class="token function">bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;第三方配置: Bean1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfig2</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token annotation punctuation">@ConditionalOnMissingBean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean2</span> <span class="token function">bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;第三方配置: Bean2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_1-5-1-执行结果" tabindex="-1"><a class="header-anchor" href="#_1-5-1-执行结果" aria-hidden="true">#</a> 1.5.1 执行结果</h5><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code><span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">36</span><span class="token punctuation">:</span><span class="token number">02.446</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>TestRegistrarBeanOrder4   <span class="token operator">-</span> 本类配置<span class="token punctuation">:</span> Bean1 
<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">36</span><span class="token punctuation">:</span><span class="token number">02.454</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>TestRegistrarBeanOrder4   <span class="token operator">-</span> Bean1<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">36</span><span class="token punctuation">:</span><span class="token number">02.460</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>TestRegistrarBeanOrder4   <span class="token operator">-</span> 第三方配置<span class="token punctuation">:</span> Bean2 
<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">36</span><span class="token punctuation">:</span><span class="token number">02.460</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>TestRegistrarBeanOrder4   <span class="token operator">-</span> Bean2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-aopautoconfiguration" tabindex="-1"><a class="header-anchor" href="#_2-aopautoconfiguration" aria-hidden="true">#</a> 2 AopAutoConfiguration</h3><h4 id="_2-1-测试代码" tabindex="-1"><a class="header-anchor" href="#_2-1-测试代码" aria-hidden="true">#</a> 2.1 测试代码</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>auto</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">BeanUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">AnnotationAwareAspectJAutoProxyCreator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>aop<span class="token punctuation">.</span></span><span class="token class-name">AopAutoConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">AnnotationConfigUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">DeferredImportSelector</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Import</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">GenericApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span><span class="token class-name">SimpleCommandLinePropertySource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span><span class="token class-name">StandardEnvironment</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">AnnotationMetadata</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> TestAopAuto
 * <span class="token keyword">@description</span>
 * <span class="token keyword">@since</span> 2022/12/16 14:00
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestAopAuto</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">GenericApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">StandardEnvironment</span> environment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandardEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// @ConditionalOnProperty(prefix = &quot;spring.aop&quot;, name = &quot;auto&quot;, havingValue = &quot;true&quot;, matchIfMissing = true)</span>
        environment<span class="token punctuation">.</span><span class="token function">getPropertySources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleCommandLinePropertySource</span><span class="token punctuation">(</span><span class="token string">&quot;--spring.aop.auto=true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">setEnvironment</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AnnotationConfigUtils</span><span class="token punctuation">.</span><span class="token function">registerAnnotationConfigProcessors</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">.</span><span class="token function">getDefaultListableBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">registerBean</span><span class="token punctuation">(</span><span class="token string">&quot;config&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Config</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        applicationContext<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BeanUtil</span><span class="token punctuation">.</span><span class="token function">printBeanNames</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AnnotationAwareAspectJAutoProxyCreator</span> creator <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;org.springframework.aop.config.internalAutoProxyCreator&quot;</span><span class="token punctuation">,</span> <span class="token class-name">AnnotationAwareAspectJAutoProxyCreator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;creator isProxyTargetClass: &quot;</span> <span class="token operator">+</span> creator<span class="token punctuation">.</span><span class="token function">isProxyTargetClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">MyImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Config</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyImportSelector</span> <span class="token keyword">implements</span> <span class="token class-name">DeferredImportSelector</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> importingClassMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
                    <span class="token class-name">AopAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-测试结果" tabindex="-1"><a class="header-anchor" href="#_2-2-测试结果" aria-hidden="true">#</a> 2.2 测试结果</h4><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code><span class="token operator">=====================</span>print start<span class="token operator">=========================</span>
org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>internalConfigurationAnnotationProcessor
org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>internalAutowiredAnnotationProcessor
org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>internalCommonAnnotationProcessor
org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>internalEventListenerProcessor
org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span><span class="token keyword">context</span><span class="token punctuation">.</span><span class="token keyword">event</span><span class="token punctuation">.</span>internalEventListenerFactory
<span class="token keyword">config</span>
org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>AopAutoConfiguration$AspectJAutoProxyingConfiguration$CglibAutoProxyConfiguration
org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span><span class="token keyword">config</span><span class="token punctuation">.</span>internalAutoProxyCreator
org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>AopAutoConfiguration$AspectJAutoProxyingConfiguration
org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>AopAutoConfiguration
<span class="token operator">=====================</span>print <span class="token keyword">end</span><span class="token operator">===========================</span>
creator isProxyTargetClass<span class="token punctuation">:</span> true

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-总结" tabindex="-1"><a class="header-anchor" href="#_2-3-总结" aria-hidden="true">#</a> 2.3 总结</h4><p>Spring Boot 是利用了自动配置类来简化了 aop 相关配置</p><ul><li>AOP 自动配置类为 <code>org.springframework.boot.autoconfigure.aop.AopAutoConfiguration</code></li><li>可以通过 <code>spring.aop.auto=false</code> 禁用 aop 自动配置</li><li>AOP 自动配置的本质是通过 <code>@EnableAspectJAutoProxy</code> 来开启了自动代理，如果在引导类上自己添加了 <code>@EnableAspectJAutoProxy</code> 那么以自己添加的为准</li><li><code>@EnableAspectJAutoProxy</code> 的本质是向容器中添加了 <code>AnnotationAwareAspectJAutoProxyCreator</code> 这个 bean 后处理器，它能够找到容器中所有切面，并为匹配切点的目标类创建代理，创建代理的工作一般是在 bean 的初始化阶段完成的</li></ul><h3 id="_3-datasourceautoconfiguration" tabindex="-1"><a class="header-anchor" href="#_3-datasourceautoconfiguration" aria-hidden="true">#</a> 3 DataSourceAutoConfiguration</h3><h4 id="_3-1-工具类" tabindex="-1"><a class="header-anchor" href="#_3-1-工具类" aria-hidden="true">#</a> 3.1 工具类</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>util</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">GenericApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>method<span class="token punctuation">.</span></span><span class="token class-name">ControllerAdviceBean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>mvc<span class="token punctuation">.</span>method<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMappingHandlerAdapter</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Field</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Set</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">Collectors</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> BeanUtil
 * <span class="token keyword">@description</span>
 * <span class="token keyword">@date</span> 2022/12/4 17:01
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">BeanUtil</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * 私有构造器
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">BeanUtil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 打印beanDefinitionNames中所有Bean的名称
     *
     * <span class="token keyword">@param</span> <span class="token parameter">beanFactory</span> beanFactory
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printBeanNames</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> beanFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====================print start=========================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> beanDefinitionNames <span class="token operator">=</span> beanFactory<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> beanName <span class="token operator">:</span> beanDefinitionNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====================print end===========================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 打印beanDefinitionNames中所有Bean的名称
     *
     * <span class="token keyword">@param</span> <span class="token parameter">applicationContext</span> applicationContext
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printBeanNamesAndResourceDescriptionNotNull</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====================print start=========================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> beanDefinitionNames <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>applicationContext <span class="token keyword">instanceof</span> <span class="token class-name">GenericApplicationContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">GenericApplicationContext</span> context <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">GenericApplicationContext</span><span class="token punctuation">)</span> applicationContext<span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> beanName <span class="token operator">:</span> beanDefinitionNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> resourceDescription <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>resourceDescription<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;name=%s, 来源: %s\n&quot;</span><span class="token punctuation">,</span> beanName<span class="token punctuation">,</span> resourceDescription<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====================print end===========================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 打印beanDefinitionNames中所有Bean的名称
     *
     * <span class="token keyword">@param</span> <span class="token parameter">applicationContext</span> applicationContext
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printBeanNamesAndResourceDescription</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====================print start=========================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> beanDefinitionNames <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>applicationContext <span class="token keyword">instanceof</span> <span class="token class-name">GenericApplicationContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">GenericApplicationContext</span> context <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">GenericApplicationContext</span><span class="token punctuation">)</span> applicationContext<span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> beanName <span class="token operator">:</span> beanDefinitionNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> resourceDescription <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;name=%s, 来源: %s\n&quot;</span><span class="token punctuation">,</span> beanName<span class="token punctuation">,</span> resourceDescription<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====================print end===========================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token class-name">String</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> str <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> str<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 存储全局的 @InitBinder 方法
     * private final Map<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ControllerAdviceBean,</span> <span class="token attr-name">Set&lt;Method</span><span class="token punctuation">&gt;</span></span>&gt; initBinderAdviceCache = new LinkedHashMap&lt;&gt;();
     * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
     * 存储控制器的@InitBinder方法
     * private final Map&lt;Class<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>?</span><span class="token punctuation">&gt;</span></span>, Set<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Method</span><span class="token punctuation">&gt;</span></span>&gt; initBinderCache = new ConcurrentHashMap&lt;&gt;(64);
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">showBindMethods</span><span class="token punctuation">(</span><span class="token class-name">RequestMappingHandlerAdapter</span> handlerAdapter<span class="token punctuation">)</span>
            <span class="token keyword">throws</span> <span class="token class-name">NoSuchFieldException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Field</span> initBinderAdviceCache <span class="token operator">=</span> <span class="token class-name">RequestMappingHandlerAdapter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;initBinderAdviceCache&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        initBinderAdviceCache<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ControllerAdviceBean</span><span class="token punctuation">,</span> <span class="token class-name">Set</span><span class="token punctuation">&lt;</span><span class="token class-name">Method</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> globalInitBinderMap <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ControllerAdviceBean</span><span class="token punctuation">,</span> <span class="token class-name">Set</span><span class="token punctuation">&lt;</span><span class="token class-name">Method</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> initBinderAdviceCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>handlerAdapter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;全局的 @InitBinder 方法{}&quot;</span><span class="token punctuation">,</span> globalInitBinderMap<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>ms <span class="token operator">-&gt;</span> ms<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Method</span><span class="token operator">::</span><span class="token function">getName</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Field</span> initBinderCache <span class="token operator">=</span> <span class="token class-name">RequestMappingHandlerAdapter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;initBinderCache&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        initBinderCache<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span> <span class="token class-name">Set</span><span class="token punctuation">&lt;</span><span class="token class-name">Method</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> controllerMap <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span> <span class="token class-name">Set</span><span class="token punctuation">&lt;</span><span class="token class-name">Method</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> initBinderCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>handlerAdapter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;控制器的 @InitBinder 方法{}&quot;</span><span class="token punctuation">,</span> controllerMap<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>ms <span class="token operator">-&gt;</span> ms<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Method</span><span class="token operator">::</span><span class="token function">getName</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-测试代码" tabindex="-1"><a class="header-anchor" href="#_3-2-测试代码" aria-hidden="true">#</a> 3.2 测试代码</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>auto</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">BeanUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">MybatisAutoConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">AutoConfigurationPackages</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span><span class="token class-name">DataSourceAutoConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span><span class="token class-name">DataSourceTransactionManagerAutoConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span></span><span class="token class-name">TransactionAutoConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">AnnotationConfigUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">DeferredImportSelector</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Import</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">GenericApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span><span class="token class-name">SimpleCommandLinePropertySource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span><span class="token class-name">StandardEnvironment</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">AnnotationMetadata</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> TestDataSourceAuto
 * <span class="token keyword">@description</span>
 * <span class="token keyword">@since</span> 2022/12/16 15:21
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDataSourceAuto</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">GenericApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">StandardEnvironment</span> environment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandardEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> jdbcParams <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;--spring.datasource.url=jdbc:mysql://localhost:3306/test&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;--spring.datasource.username=root&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;--spring.datasource.password=123456&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        environment<span class="token punctuation">.</span><span class="token function">getPropertySources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleCommandLinePropertySource</span><span class="token punctuation">(</span>jdbcParams<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">setEnvironment</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token class-name">AnnotationConfigUtils</span><span class="token punctuation">.</span><span class="token function">registerAnnotationConfigProcessors</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">.</span><span class="token function">getDefaultListableBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">registerBean</span><span class="token punctuation">(</span><span class="token string">&quot;config&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Config</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 添加包扫描，会扫描auto包</span>
        <span class="token class-name">String</span> packageName <span class="token operator">=</span> <span class="token class-name">TestDataSourceAuto</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;packageName: &quot;</span> <span class="token operator">+</span> packageName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AutoConfigurationPackages</span><span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">.</span><span class="token function">getDefaultListableBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> packageName<span class="token punctuation">)</span><span class="token punctuation">;</span>

        applicationContext<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">BeanUtil</span><span class="token punctuation">.</span><span class="token function">printBeanNamesAndResourceDescriptionNotNull</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">MyImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Config</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyImportSelector</span> <span class="token keyword">implements</span> <span class="token class-name">DeferredImportSelector</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> importingClassMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
                    <span class="token class-name">DataSourceAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 数据源的自动配置</span>
                    <span class="token class-name">MybatisAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Mybatis的自动配置</span>
                    <span class="token class-name">DataSourceTransactionManagerAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 数据源事务管理器自动配置</span>
                    <span class="token class-name">TransactionAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 事务自动配置</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-3-运行结果" tabindex="-1"><a class="header-anchor" href="#_3-3-运行结果" aria-hidden="true">#</a> 3.3 运行结果</h4><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code>packageName<span class="token punctuation">:</span> com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>auto
<span class="token operator">=====================</span>print start<span class="token operator">=========================</span>
name<span class="token operator">=</span>dataSource<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>jdbc<span class="token operator">/</span>DataSourceConfiguration$Hikari<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>hikariPoolDataSourceMetadataProvider<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>jdbc<span class="token operator">/</span>metadata<span class="token operator">/</span>DataSourcePoolMetadataProvidersConfiguration$HikariPoolDataSourceMetadataProviderConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>sqlSessionFactory<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>mybatis<span class="token operator">/</span>spring<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>MybatisAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>sqlSessionTemplate<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>mybatis<span class="token operator">/</span>spring<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>MybatisAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>transactionManager<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>jdbc<span class="token operator">/</span>DataSourceTransactionManagerAutoConfiguration$JdbcTransactionManagerConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span><span class="token keyword">config</span><span class="token punctuation">.</span>internalTransactionAdvisor<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>transaction<span class="token operator">/</span>annotation<span class="token operator">/</span>ProxyTransactionManagementConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>transactionAttributeSource<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>transaction<span class="token operator">/</span>annotation<span class="token operator">/</span>ProxyTransactionManagementConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>transactionInterceptor<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>transaction<span class="token operator">/</span>annotation<span class="token operator">/</span>ProxyTransactionManagementConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span><span class="token keyword">config</span><span class="token punctuation">.</span>internalTransactionalEventListenerFactory<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>transaction<span class="token operator">/</span>annotation<span class="token operator">/</span>ProxyTransactionManagementConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>transactionTemplate<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>transaction<span class="token operator">/</span>TransactionAutoConfiguration$TransactionTemplateConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>platformTransactionManagerCustomizers<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>transaction<span class="token operator">/</span>TransactionAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mapper1<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> file <span class="token punctuation">[</span>C<span class="token punctuation">:</span>\DISH\JavaCode\java\gitee\liuyangfang\java<span class="token operator">-</span>face\spring<span class="token operator">-</span>demo\target\classes\com\itheima\boot\a41\auto\mapper\Mapper1<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mapper2<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> file <span class="token punctuation">[</span>C<span class="token punctuation">:</span>\DISH\JavaCode\java\gitee\liuyangfang\java<span class="token operator">-</span>face\spring<span class="token operator">-</span>demo\target\classes\com\itheima\boot\a41\auto\mapper\Mapper2<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
<span class="token operator">=====================</span>print <span class="token keyword">end</span><span class="token operator">===========================</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-4-datasourceautoconfiguration-相关源码" tabindex="-1"><a class="header-anchor" href="#_3-4-datasourceautoconfiguration-相关源码" aria-hidden="true">#</a> 3.4 DataSourceAutoConfiguration 相关源码</h4><h5 id="_3-4-1-org-springframework-boot-autoconfigure-jdbc-datasourceautoconfiguration" tabindex="-1"><a class="header-anchor" href="#_3-4-1-org-springframework-boot-autoconfigure-jdbc-datasourceautoconfiguration" aria-hidden="true">#</a> 3.4.1 org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">DataSource</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">EmbeddedDatabaseType</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 类路径下存在DataSource 和 EmbeddedDatabaseType 则满足条件完成自动装配</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token string">&quot;io.r2dbc.spi.ConnectionFactory&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 不存在io.r2dbc.spi.ConnectionFactory这个bean才进行自动装配</span>
<span class="token annotation punctuation">@AutoConfigureBefore</span><span class="token punctuation">(</span><span class="token class-name">SqlInitializationAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">// 在SqlInitializationAutoConfiguration装配前进行装配</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">DataSourceProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">// 和配置文件中的spring.datasource开头的配置进行参数绑定</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">DataSourcePoolMetadataProvidersConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token comment">// 导入相关的配置类</span>
        <span class="token class-name">DataSourceInitializationConfiguration<span class="token punctuation">.</span>InitializationSpecificCredentialsDataSourceInitializationConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        <span class="token class-name">DataSourceInitializationConfiguration<span class="token punctuation">.</span>SharedCredentialsDataSourceInitializationConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataSourceAutoConfiguration</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Conditional</span><span class="token punctuation">(</span><span class="token class-name">EmbeddedDatabaseCondition</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">DataSource</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">XADataSource</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">EmbeddedDataSourceConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">EmbeddedDatabaseConfiguration</span> <span class="token punctuation">{</span><span class="token comment">// 内嵌数据源</span>

    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 非内嵌数据库连接池源
     * 支持Hikari, Tomcat, Dbcp2, OracleUcp, Generic等数据库源配置
     */</span>
    <span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Conditional</span><span class="token punctuation">(</span><span class="token class-name">PooledDataSourceCondition</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">DataSource</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">XADataSource</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">DataSourceConfiguration<span class="token punctuation">.</span>Hikari</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">DataSourceConfiguration<span class="token punctuation">.</span>Tomcat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
            <span class="token class-name">DataSourceConfiguration<span class="token punctuation">.</span>Dbcp2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">DataSourceConfiguration<span class="token punctuation">.</span>OracleUcp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
            <span class="token class-name">DataSourceConfiguration<span class="token punctuation">.</span>Generic</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">DataSourceJmxConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">PooledDataSourceConfiguration</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">AnyNestedCondition</span></span><span class="token punctuation">}</span> that checks that either <span class="token punctuation">{</span><span class="token keyword">@code</span> <span class="token code-section"><span class="token code language-java">spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>type</span></span><span class="token punctuation">}</span>
     * is set or <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">PooledDataSourceAvailableCondition</span></span><span class="token punctuation">}</span> applies.
     */</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">PooledDataSourceCondition</span> <span class="token keyword">extends</span> <span class="token class-name">AnyNestedCondition</span> <span class="token punctuation">{</span>

        <span class="token class-name">PooledDataSourceCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">ConfigurationPhase</span><span class="token punctuation">.</span><span class="token constant">PARSE_CONFIGURATION</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.datasource&quot;</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">&quot;type&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ExplicitType</span> <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Conditional</span><span class="token punctuation">(</span><span class="token class-name">PooledDataSourceAvailableCondition</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
        <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">PooledDataSourceAvailable</span> <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">Condition</span></span><span class="token punctuation">}</span> to test if a supported connection pool is available.
     */</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">PooledDataSourceAvailableCondition</span> <span class="token keyword">extends</span> <span class="token class-name">SpringBootCondition</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">ConditionOutcome</span> <span class="token function">getMatchOutcome</span><span class="token punctuation">(</span><span class="token class-name">ConditionContext</span> context<span class="token punctuation">,</span> <span class="token class-name">AnnotatedTypeMetadata</span> metadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">ConditionMessage<span class="token punctuation">.</span>Builder</span> message <span class="token operator">=</span> <span class="token class-name">ConditionMessage</span><span class="token punctuation">.</span><span class="token function">forCondition</span><span class="token punctuation">(</span><span class="token string">&quot;PooledDataSource&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">DataSourceBuilder</span><span class="token punctuation">.</span><span class="token function">findType</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">ConditionOutcome</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">foundExactly</span><span class="token punctuation">(</span><span class="token string">&quot;supported DataSource&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token class-name">ConditionOutcome</span><span class="token punctuation">.</span><span class="token function">noMatch</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">didNotFind</span><span class="token punctuation">(</span><span class="token string">&quot;supported DataSource&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">atAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">Condition</span></span><span class="token punctuation">}</span> to detect when an embedded <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">DataSource</span></span><span class="token punctuation">}</span> type can be used.
     * If a pooled <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">DataSource</span></span><span class="token punctuation">}</span> is available, it will always be preferred to an
     * <span class="token punctuation">{</span><span class="token keyword">@code</span> <span class="token code-section"><span class="token code language-java"><span class="token class-name">EmbeddedDatabase</span></span></span><span class="token punctuation">}</span>.
     */</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">EmbeddedDatabaseCondition</span> <span class="token keyword">extends</span> <span class="token class-name">SpringBootCondition</span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">DATASOURCE_URL_PROPERTY</span> <span class="token operator">=</span> <span class="token string">&quot;spring.datasource.url&quot;</span><span class="token punctuation">;</span>

        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">SpringBootCondition</span> pooledCondition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PooledDataSourceCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">ConditionOutcome</span> <span class="token function">getMatchOutcome</span><span class="token punctuation">(</span><span class="token class-name">ConditionContext</span> context<span class="token punctuation">,</span> <span class="token class-name">AnnotatedTypeMetadata</span> metadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">ConditionMessage<span class="token punctuation">.</span>Builder</span> message <span class="token operator">=</span> <span class="token class-name">ConditionMessage</span><span class="token punctuation">.</span><span class="token function">forCondition</span><span class="token punctuation">(</span><span class="token string">&quot;EmbeddedDataSource&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hasDataSourceUrlProperty</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">ConditionOutcome</span><span class="token punctuation">.</span><span class="token function">noMatch</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">because</span><span class="token punctuation">(</span><span class="token constant">DATASOURCE_URL_PROPERTY</span> <span class="token operator">+</span> <span class="token string">&quot; is set&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">anyMatches</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> metadata<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pooledCondition<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">ConditionOutcome</span><span class="token punctuation">.</span><span class="token function">noMatch</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">foundExactly</span><span class="token punctuation">(</span><span class="token string">&quot;supported pooled data source&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">EmbeddedDatabaseType</span> type <span class="token operator">=</span> <span class="token class-name">EmbeddedDatabaseConnection</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">ConditionOutcome</span><span class="token punctuation">.</span><span class="token function">noMatch</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">didNotFind</span><span class="token punctuation">(</span><span class="token string">&quot;embedded database&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">atAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token class-name">ConditionOutcome</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">found</span><span class="token punctuation">(</span><span class="token string">&quot;embedded database&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">items</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">hasDataSourceUrlProperty</span><span class="token punctuation">(</span><span class="token class-name">ConditionContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Environment</span> environment <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token function">containsProperty</span><span class="token punctuation">(</span><span class="token constant">DATASOURCE_URL_PROPERTY</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasText</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token constant">DATASOURCE_URL_PROPERTY</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IllegalArgumentException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// Ignore unresolvable placeholder errors</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-4-2-org-springframework-boot-autoconfigure-jdbc-datasourceconfiguration-hikari" tabindex="-1"><a class="header-anchor" href="#_3-4-2-org-springframework-boot-autoconfigure-jdbc-datasourceconfiguration-hikari" aria-hidden="true">#</a> 3.4.2 org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration.Hikari</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">createDataSource</span><span class="token punctuation">(</span><span class="token class-name">DataSourceProperties</span> properties<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">DataSource</span><span class="token punctuation">&gt;</span></span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span> properties<span class="token punctuation">.</span><span class="token function">initializeDataSourceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * Hikari DataSource configuration.
     */</span>
    <span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token class-name">HikariDataSource</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">// 检查是否存在HikariDataSource这个类，存在才装配</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">// 不存在DataSource.class这个类，才装配</span>
    <span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;spring.datasource.type&quot;</span><span class="token punctuation">,</span> havingValue <span class="token operator">=</span> <span class="token string">&quot;com.zaxxer.hikari.HikariDataSource&quot;</span><span class="token punctuation">,</span>
            matchIfMissing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// 如果配置中spring.datasource.type=com.zaxxer.hikari.HikariDataSource 或者不存在此项配置，则进行装配</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Hikari</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Bean</span>
        <span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.datasource.hikari&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 与spring.datasource.hikari开头的配置进行数据绑定</span>
        <span class="token class-name">HikariDataSource</span> <span class="token function">dataSource</span><span class="token punctuation">(</span><span class="token class-name">DataSourceProperties</span> properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">HikariDataSource</span> dataSource <span class="token operator">=</span> <span class="token function">createDataSource</span><span class="token punctuation">(</span>properties<span class="token punctuation">,</span> <span class="token class-name">HikariDataSource</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasText</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dataSource<span class="token punctuation">.</span><span class="token function">setPoolName</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> dataSource<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>对应的自动配置类为：org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration</li><li>它内部采用了条件装配，通过检查容器的 bean，以及类路径下的 class，来决定该 @Bean 是否生效</li></ul><p>简单说明一下，Spring Boot 支持两大类数据源：</p><ul><li>EmbeddedDatabase - 内嵌数据库连接池</li><li>PooledDataSource - 非内嵌数据库连接池</li></ul><p>PooledDataSource 又支持如下数据源</p><ul><li>hikari 提供的 HikariDataSource</li><li>tomcat-jdbc 提供的 DataSource</li><li>dbcp2 提供的 BasicDataSource</li><li>oracle 提供的 PoolDataSourceImpl</li></ul><p>如果知道数据源的实现类类型，即指定了 <code>spring.datasource.type</code>，理论上可以支持所有数据源，但这样做的一个最大问题是无法订制每种数据源的详细配置（如最大、最小连接数等）</p><h3 id="_4-mybatisautoconfiguration" tabindex="-1"><a class="header-anchor" href="#_4-mybatisautoconfiguration" aria-hidden="true">#</a> 4 MybatisAutoConfiguration</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@org.springframework.context.annotation.Configuration</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">SqlSessionFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">SqlSessionFactoryBean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 存在这两个类才装配</span>
<span class="token annotation punctuation">@ConditionalOnSingleCandidate</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">// 必须是单数据源，不然在装配时不知道选哪个数据源</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">MybatisProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">// 自动绑定mybatis开头的参数</span>
<span class="token annotation punctuation">@AutoConfigureAfter</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">DataSourceAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">MybatisLanguageDriverAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 必须在这两个类之后装配</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisAutoConfiguration</span> <span class="token keyword">implements</span> <span class="token class-name">InitializingBean</span> <span class="token punctuation">{</span>


    <span class="token comment">//...</span>

    <span class="token doc-comment comment">/**
     * 核心配置的两个Bean之1 SqlSessionFactory
     * MyBatis的核心对象，用来创建SqlSession
     *
     * <span class="token keyword">@param</span> <span class="token parameter">dataSource</span>
     * <span class="token keyword">@return</span>
     * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span>
    <span class="token keyword">public</span> <span class="token class-name">SqlSessionFactory</span> <span class="token function">sqlSessionFactory</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 核心配置的两个Bean之2 SqlSessionTemplate
     * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
     * SqlSessionTemplate---&gt; SqlSession的实现，此实现会与当前线程进行绑定
     *
     * <span class="token keyword">@param</span> <span class="token parameter">sqlSessionFactory</span>
     * <span class="token keyword">@return</span>
     * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span>
    <span class="token keyword">public</span> <span class="token class-name">SqlSessionTemplate</span> <span class="token function">sqlSessionTemplate</span><span class="token punctuation">(</span><span class="token class-name">SqlSessionFactory</span> sqlSessionFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ExecutorType</span> executorType <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">getExecutorType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>executorType <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionTemplate</span><span class="token punctuation">(</span>sqlSessionFactory<span class="token punctuation">,</span> executorType<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionTemplate</span><span class="token punctuation">(</span>sqlSessionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 用ImportBeanDefinitionRegistrar的方式扫描所有标注了@Mapper注解的接口
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfiguredMapperScannerRegistrar</span> <span class="token keyword">implements</span> <span class="token class-name">BeanFactoryAware</span><span class="token punctuation">,</span> <span class="token class-name">ImportBeanDefinitionRegistrar</span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token class-name">BeanFactory</span> beanFactory<span class="token punctuation">;</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> importingClassMetadata<span class="token punctuation">,</span> <span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">AutoConfigurationPackages</span><span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>beanFactory<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Could not determine auto-configuration package, automatic mapper scanning disabled.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Searching for mappers annotated with @Mapper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 使用AutoConfigurationPackages来确定扫描的包</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> packages <span class="token operator">=</span> <span class="token class-name">AutoConfigurationPackages</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>beanFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                packages<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>pkg <span class="token operator">-&gt;</span> logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Using auto-configuration base package &#39;{}&#39;&quot;</span><span class="token punctuation">,</span> pkg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token class-name">BeanDefinitionBuilder</span> builder <span class="token operator">=</span> <span class="token class-name">BeanDefinitionBuilder</span><span class="token punctuation">.</span><span class="token function">genericBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">MapperScannerConfigurer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            builder<span class="token punctuation">.</span><span class="token function">addPropertyValue</span><span class="token punctuation">(</span><span class="token string">&quot;processPropertyPlaceHolders&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            builder<span class="token punctuation">.</span><span class="token function">addPropertyValue</span><span class="token punctuation">(</span><span class="token string">&quot;annotationClass&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Mapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            builder<span class="token punctuation">.</span><span class="token function">addPropertyValue</span><span class="token punctuation">(</span><span class="token string">&quot;basePackage&quot;</span><span class="token punctuation">,</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">collectionToCommaDelimitedString</span><span class="token punctuation">(</span>packages<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">BeanWrapper</span> beanWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BeanWrapperImpl</span><span class="token punctuation">(</span><span class="token class-name">MapperScannerConfigurer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> propertyNames <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>beanWrapper<span class="token punctuation">.</span><span class="token function">getPropertyDescriptors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">PropertyDescriptor</span><span class="token operator">::</span><span class="token function">getName</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>propertyNames<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;lazyInitialization&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// Need to mybatis-spring 2.0.2+</span>
                builder<span class="token punctuation">.</span><span class="token function">addPropertyValue</span><span class="token punctuation">(</span><span class="token string">&quot;lazyInitialization&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;${mybatis.lazy-initialization:false}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>propertyNames<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;defaultScope&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// Need to mybatis-spring 2.0.6+</span>
                builder<span class="token punctuation">.</span><span class="token function">addPropertyValue</span><span class="token punctuation">(</span><span class="token string">&quot;defaultScope&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;${mybatis.mapper-default-scope:}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            registry<span class="token punctuation">.</span><span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">MapperScannerConfigurer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> builder<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanFactory</span><span class="token punctuation">(</span><span class="token class-name">BeanFactory</span> beanFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>beanFactory <span class="token operator">=</span> beanFactory<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * If mapper registering configuration or mapper scanning configuration not present, this configuration allow to scan
     * mappers based on the same component-scanning path as Spring Boot itself.
     */</span>
    <span class="token annotation punctuation">@org.springframework.context.annotation.Configuration</span>
    <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">AutoConfiguredMapperScannerRegistrar</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">MapperFactoryBean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">MapperScannerConfigurer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MapperScannerRegistrarNotFoundConfiguration</span> <span class="token keyword">implements</span> <span class="token class-name">InitializingBean</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span>
                    <span class="token string">&quot;Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>MyBatis 自动配置类为 <code>org.mybatis.spring.boot.autoconfigure.MybatisAutoConfiguration</code></li><li>它主要配置了两个 bean <ul><li>SqlSessionFactory - MyBatis 核心对象，用来创建 SqlSession</li><li>SqlSessionTemplate - SqlSession 的实现，此实现会与当前线程绑定</li><li>用 ImportBeanDefinitionRegistrar 的方式扫描所有标注了 @Mapper 注解的接口</li><li>用 AutoConfigurationPackages 来确定扫描的包</li></ul></li><li>还有一个相关的 bean：MybatisProperties，它会读取配置文件中带 <code>mybatis.</code> 前缀的配置项进行定制配置</li></ul><p>@MapperScan 注解的作用与 MybatisAutoConfiguration 类似，会注册 MapperScannerConfigurer 有如下区别</p><ul><li>@MapperScan 扫描具体包（当然也可以配置关注哪个注解）</li><li>@MapperScan 如果不指定扫描具体包，则会把引导类范围内，所有接口当做 Mapper 接口</li><li>MybatisAutoConfiguration 关注的是所有标注 @Mapper 注解的接口，会忽略掉非 @Mapper 标注的接口</li></ul><p>这里有同学有疑问，之前介绍的都是将具体类交给 Spring 管理，怎么到了 MyBatis 这儿，接口就可以被管理呢？</p><ul><li>其实并非将接口交给 Spring 管理，而是每个接口会对应一个 MapperFactoryBean，是后者被 Spring 所管理，接口只是作为 MapperFactoryBean 的一个属性来配置</li></ul><h3 id="_5-transactionautoconfiguration" tabindex="-1"><a class="header-anchor" href="#_5-transactionautoconfiguration" aria-hidden="true">#</a> 5 TransactionAutoConfiguration</h3><h4 id="_5-1-org-springframework-boot-autoconfigure-jdbc-datasourcetransactionmanagerautoconfiguration" tabindex="-1"><a class="header-anchor" href="#_5-1-org-springframework-boot-autoconfigure-jdbc-datasourcetransactionmanagerautoconfiguration" aria-hidden="true">#</a> 5.1 org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">/*
 * Copyright 2012-2021 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>jdbc</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span></span><span class="token class-name">ObjectProvider</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">AutoConfigureOrder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">EnableAutoConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnClass</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnMissingBean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnSingleCandidate</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span></span><span class="token class-name">TransactionManagerCustomizers</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">EnableConfigurationProperties</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">Ordered</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span><span class="token class-name">Environment</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">JdbcTemplate</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span></span><span class="token class-name">DataSourceTransactionManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">JdbcTransactionManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span></span><span class="token class-name">TransactionManager</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">EnableAutoConfiguration</span></span> Auto-configuration<span class="token punctuation">}</span> for <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">JdbcTransactionManager</span></span><span class="token punctuation">}</span>.
 *
 * <span class="token keyword">@author</span> Dave Syer
 * <span class="token keyword">@author</span> Stephane Nicoll
 * <span class="token keyword">@author</span> Andy Wilkinson
 * <span class="token keyword">@author</span> Kazuki Shimizu
 * <span class="token keyword">@since</span> 1.0.0
 */</span>
<span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">TransactionManager</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureOrder</span><span class="token punctuation">(</span><span class="token class-name">Ordered</span><span class="token punctuation">.</span><span class="token constant">LOWEST_PRECEDENCE</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">DataSourceProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataSourceTransactionManagerAutoConfiguration</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ConditionalOnSingleCandidate</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
	<span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">JdbcTransactionManagerConfiguration</span> <span class="token punctuation">{</span>

		<span class="token annotation punctuation">@Bean</span>
		<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">TransactionManager</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
		<span class="token class-name">DataSourceTransactionManager</span> <span class="token function">transactionManager</span><span class="token punctuation">(</span><span class="token class-name">Environment</span> environment<span class="token punctuation">,</span> <span class="token class-name">DataSource</span> dataSource<span class="token punctuation">,</span>
				<span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionManagerCustomizers</span><span class="token punctuation">&gt;</span></span> transactionManagerCustomizers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">DataSourceTransactionManager</span> transactionManager <span class="token operator">=</span> <span class="token function">createTransactionManager</span><span class="token punctuation">(</span>environment<span class="token punctuation">,</span> dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
			transactionManagerCustomizers<span class="token punctuation">.</span><span class="token function">ifAvailable</span><span class="token punctuation">(</span><span class="token punctuation">(</span>customizers<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> customizers<span class="token punctuation">.</span><span class="token function">customize</span><span class="token punctuation">(</span>transactionManager<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> transactionManager<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">private</span> <span class="token class-name">DataSourceTransactionManager</span> <span class="token function">createTransactionManager</span><span class="token punctuation">(</span><span class="token class-name">Environment</span> environment<span class="token punctuation">,</span> <span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;spring.dao.exceptiontranslation.enabled&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Boolean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Boolean</span><span class="token punctuation">.</span><span class="token constant">TRUE</span><span class="token punctuation">)</span>
					<span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">JdbcTransactionManager</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">DataSourceTransactionManager</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-2-org-springframework-boot-autoconfigure-transaction-transactionautoconfiguration" tabindex="-1"><a class="header-anchor" href="#_5-2-org-springframework-boot-autoconfigure-transaction-transactionautoconfiguration" aria-hidden="true">#</a> 5.2 org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">/*
 * Copyright 2012-2021 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>transaction</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">Collectors</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span></span><span class="token class-name">ObjectProvider</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">AutoConfigureAfter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnBean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnClass</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnMissingBean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnProperty</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnSingleCandidate</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>data<span class="token punctuation">.</span>neo4j<span class="token punctuation">.</span></span><span class="token class-name">Neo4jDataAutoConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span><span class="token class-name">DataSourceTransactionManagerAutoConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>orm<span class="token punctuation">.</span>jpa<span class="token punctuation">.</span></span><span class="token class-name">HibernateJpaAutoConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>jta<span class="token punctuation">.</span></span><span class="token class-name">JtaAutoConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">EnableConfigurationProperties</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span></span><span class="token class-name">PlatformTransactionManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span></span><span class="token class-name">ReactiveTransactionManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span></span><span class="token class-name">TransactionManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">AbstractTransactionManagementConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">EnableTransactionManagement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>reactive<span class="token punctuation">.</span></span><span class="token class-name">TransactionalOperator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">TransactionOperations</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">TransactionTemplate</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">EnableAutoConfiguration</span></span>
 * Auto-configuration<span class="token punctuation">}</span> for Spring transaction.
 *
 * <span class="token keyword">@author</span> Stephane Nicoll
 * <span class="token keyword">@since</span> 1.3.0
 */</span>
<span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token class-name">PlatformTransactionManager</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureAfter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">JtaAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">HibernateJpaAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
		<span class="token class-name">DataSourceTransactionManagerAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Neo4jDataAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">TransactionProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TransactionAutoConfiguration</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@Bean</span>
	<span class="token annotation punctuation">@ConditionalOnMissingBean</span>
	<span class="token keyword">public</span> <span class="token class-name">TransactionManagerCustomizers</span> <span class="token function">platformTransactionManagerCustomizers</span><span class="token punctuation">(</span>
			<span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PlatformTransactionManagerCustomizer</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> customizers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TransactionManagerCustomizers</span><span class="token punctuation">(</span>customizers<span class="token punctuation">.</span><span class="token function">orderedStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Bean</span>
	<span class="token annotation punctuation">@ConditionalOnMissingBean</span>
	<span class="token annotation punctuation">@ConditionalOnSingleCandidate</span><span class="token punctuation">(</span><span class="token class-name">ReactiveTransactionManager</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">TransactionalOperator</span> <span class="token function">transactionalOperator</span><span class="token punctuation">(</span><span class="token class-name">ReactiveTransactionManager</span> transactionManager<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token class-name">TransactionalOperator</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>transactionManager<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ConditionalOnSingleCandidate</span><span class="token punctuation">(</span><span class="token class-name">PlatformTransactionManager</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">TransactionTemplateConfiguration</span> <span class="token punctuation">{</span>

		<span class="token annotation punctuation">@Bean</span>
		<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">TransactionOperations</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
		<span class="token keyword">public</span> <span class="token class-name">TransactionTemplate</span> <span class="token function">transactionTemplate</span><span class="token punctuation">(</span><span class="token class-name">PlatformTransactionManager</span> transactionManager<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TransactionTemplate</span><span class="token punctuation">(</span>transactionManager<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ConditionalOnBean</span><span class="token punctuation">(</span><span class="token class-name">TransactionManager</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">AbstractTransactionManagementConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">EnableTransactionManagementConfiguration</span> <span class="token punctuation">{</span>

		<span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
		<span class="token annotation punctuation">@EnableTransactionManagement</span><span class="token punctuation">(</span>proxyTargetClass <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
		<span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.aop&quot;</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">&quot;proxy-target-class&quot;</span><span class="token punctuation">,</span> havingValue <span class="token operator">=</span> <span class="token string">&quot;false&quot;</span><span class="token punctuation">)</span>
		<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">JdkDynamicAutoProxyConfiguration</span> <span class="token punctuation">{</span>

		<span class="token punctuation">}</span>

		<span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
		<span class="token annotation punctuation">@EnableTransactionManagement</span><span class="token punctuation">(</span>proxyTargetClass <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
		<span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.aop&quot;</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">&quot;proxy-target-class&quot;</span><span class="token punctuation">,</span> havingValue <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">,</span>
				matchIfMissing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
		<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">CglibAutoProxyConfiguration</span> <span class="token punctuation">{</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>事务自动配置类有两个：</p><ul><li><code>org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration</code></li><li><code>org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration</code></li></ul></li><li><p>前者配置了 DataSourceTransactionManager 用来执行事务的提交、回滚操作</p></li><li><p>后者功能上对标 @EnableTransactionManagement，包含以下三个 bean</p><ul><li>BeanFactoryTransactionAttributeSourceAdvisor 事务切面类，包含通知和切点</li><li>TransactionInterceptor 事务通知类，由它在目标方法调用前后加入事务操作</li><li>AnnotationTransactionAttributeSource 会解析 @Transactional 及事务属性，也包含了切点功能</li></ul></li><li><p>如果自己配置了 DataSourceTransactionManager 或是在引导类加了 @EnableTransactionManagement，则以自己配置的为准</p></li></ul><h3 id="_6-wvc-自动配置" tabindex="-1"><a class="header-anchor" href="#_6-wvc-自动配置" aria-hidden="true">#</a> 6 WVC 自动配置</h3><h4 id="_6-1-测试代码" tabindex="-1"><a class="header-anchor" href="#_6-1-测试代码" aria-hidden="true">#</a> 6.1 测试代码</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>auto<span class="token punctuation">.</span>mvc</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">DispatcherServletAutoConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletWebServerFactoryAutoConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">WebMvcAutoConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>error<span class="token punctuation">.</span></span><span class="token class-name">ErrorMvcAutoConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">AnnotationConfigServletWebServerApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">DeferredImportSelector</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Import</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">GenericApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">AnnotationMetadata</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">BeanUtil</span><span class="token punctuation">.</span><span class="token static">isEmpty</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> TestMvcAuto
 * <span class="token keyword">@description</span>
 * <span class="token keyword">@since</span> 2022/12/16 16:41
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestMvcAuto</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">AnnotationConfigServletWebServerApplicationContext</span> context
                <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigServletWebServerApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        context<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">Config</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        context<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">print</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 打印beanDefinitionNames中所有Bean的名称
     *
     * <span class="token keyword">@param</span> <span class="token parameter">applicationContext</span> applicationContext
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====================print start=========================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> beanDefinitionNames <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>applicationContext <span class="token keyword">instanceof</span> <span class="token class-name">GenericApplicationContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">GenericApplicationContext</span> context <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">GenericApplicationContext</span><span class="token punctuation">)</span> applicationContext<span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> beanName <span class="token operator">:</span> beanDefinitionNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> resourceDescription <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>resourceDescription<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>resourceDescription<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;ServletWebServerFactory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        list1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonMap</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> resourceDescription<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>resourceDescription<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;DispatcherServlet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        list2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonMap</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> resourceDescription<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>resourceDescription<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;WebMvcAutoConfiguration&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        list3<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonMap</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> resourceDescription<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>resourceDescription<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;ErrorMvcAutoConfiguration&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        list4<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonMap</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> resourceDescription<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        list5<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonMap</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> resourceDescription<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token comment">// System.out.printf(&quot;name=%s, 来源: %s\n&quot;, beanName, resourceDescription);</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// ServletWebServerFactoryAutoConfiguration.class.getName(),</span>
        <span class="token comment">//                    DispatcherServletAutoConfiguration.class.getName(),</span>
        <span class="token comment">//                    WebMvcAutoConfiguration.class.getName(),</span>
        <span class="token comment">//                    ErrorMvcAutoConfiguration.class.getName()</span>
        <span class="token function">pintList</span><span class="token punctuation">(</span>list1<span class="token punctuation">,</span> <span class="token string">&quot;ServletWebServerFactoryAutoConfiguration对应的自动配置类&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">pintList</span><span class="token punctuation">(</span>list2<span class="token punctuation">,</span> <span class="token string">&quot;DispatcherServletAutoConfiguration对应的自动配置类&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">pintList</span><span class="token punctuation">(</span>list3<span class="token punctuation">,</span> <span class="token string">&quot;WebMvcAutoConfiguration对应的自动配置类&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">pintList</span><span class="token punctuation">(</span>list4<span class="token punctuation">,</span> <span class="token string">&quot;ErrorMvcAutoConfiguration对应的自动配置类&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">pintList</span><span class="token punctuation">(</span>list5<span class="token punctuation">,</span> <span class="token string">&quot;其它对应的自动配置类&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====================print end===========================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">pintList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> list<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=======================================&quot;</span> <span class="token operator">+</span> desc <span class="token operator">+</span> <span class="token string">&quot; start=======================================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringStringMap <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            stringStringMap<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;name=%s, 来源: %s\n&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=======================================&quot;</span> <span class="token operator">+</span> desc <span class="token operator">+</span> <span class="token string">&quot; end=======================================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Configuration</span>
    <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">MyImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Config</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyImportSelector</span> <span class="token keyword">implements</span> <span class="token class-name">DeferredImportSelector</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> importingClassMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
                    <span class="token class-name">ServletWebServerFactoryAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token class-name">DispatcherServletAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token class-name">WebMvcAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token class-name">ErrorMvcAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_6-1-1-测试结果" tabindex="-1"><a class="header-anchor" href="#_6-1-1-测试结果" aria-hidden="true">#</a> 6.1.1 测试结果</h5><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code><span class="token operator">=====================</span>print start<span class="token operator">=========================</span>
<span class="token operator">=======================================</span>ServletWebServerFactoryAutoConfiguration对应的自动配置类 start<span class="token operator">=======================================</span>
name<span class="token operator">=</span>tomcatServletWebServerFactory<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>ServletWebServerFactoryConfiguration$EmbeddedTomcat<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>servletWebServerFactoryCustomizer<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>ServletWebServerFactoryAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>tomcatServletWebServerFactoryCustomizer<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>ServletWebServerFactoryAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
<span class="token operator">=======================================</span>ServletWebServerFactoryAutoConfiguration对应的自动配置类 <span class="token keyword">end</span><span class="token operator">=======================================</span>


<span class="token operator">=======================================</span>DispatcherServletAutoConfiguration对应的自动配置类 start<span class="token operator">=======================================</span>
name<span class="token operator">=</span>dispatcherServlet<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>DispatcherServletAutoConfiguration$DispatcherServletConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>dispatcherServletRegistration<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>DispatcherServletAutoConfiguration$DispatcherServletRegistrationConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
<span class="token operator">=======================================</span>DispatcherServletAutoConfiguration对应的自动配置类 <span class="token keyword">end</span><span class="token operator">=======================================</span>


<span class="token operator">=======================================</span>WebMvcAutoConfiguration对应的自动配置类 start<span class="token operator">=======================================</span>
name<span class="token operator">=</span>requestMappingHandlerAdapter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>requestMappingHandlerMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>welcomePageHandlerMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>localeResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>themeResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>flashMapManager<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcConversionService<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcValidator<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcContentNegotiationManager<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcPatternParser<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcUrlPathHelper<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcPathMatcher<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>viewControllerHandlerMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>beanNameHandlerMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>routerFunctionMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>resourceHandlerMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcResourceUrlProvider<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>defaultServletHandlerMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>handlerFunctionAdapter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcUriComponentsContributor<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>httpRequestHandlerAdapter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>simpleControllerHandlerAdapter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>handlerExceptionResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcViewResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcHandlerMappingIntrospector<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>viewNameTranslator<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>defaultViewResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>viewResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>requestContextFilter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>formContentFilter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
<span class="token operator">=======================================</span>WebMvcAutoConfiguration对应的自动配置类 <span class="token keyword">end</span><span class="token operator">=======================================</span>


<span class="token operator">=======================================</span>ErrorMvcAutoConfiguration对应的自动配置类 start<span class="token operator">=======================================</span>
name<span class="token operator">=</span>error<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>beanNameViewResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>conventionErrorViewResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration$DefaultErrorViewResolverConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>errorAttributes<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>basicErrorController<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>errorPageCustomizer<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>preserveErrorControllerTargetClassPostProcessor<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
<span class="token operator">=======================================</span>ErrorMvcAutoConfiguration对应的自动配置类 <span class="token keyword">end</span><span class="token operator">=======================================</span>


<span class="token operator">=====================</span>print <span class="token keyword">end</span><span class="token operator">===========================</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_6-1-2-servletwebserverfactoryautoconfiguration对应的自动配置类" tabindex="-1"><a class="header-anchor" href="#_6-1-2-servletwebserverfactoryautoconfiguration对应的自动配置类" aria-hidden="true">#</a> 6.1.2 ServletWebServerFactoryAutoConfiguration对应的自动配置类</h5><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code>name<span class="token operator">=</span>tomcatServletWebServerFactory<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>ServletWebServerFactoryConfiguration$EmbeddedTomcat<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>servletWebServerFactoryCustomizer<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>ServletWebServerFactoryAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>tomcatServletWebServerFactoryCustomizer<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>ServletWebServerFactoryAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_6-1-3-dispatcherservletautoconfiguration对应的自动配置类" tabindex="-1"><a class="header-anchor" href="#_6-1-3-dispatcherservletautoconfiguration对应的自动配置类" aria-hidden="true">#</a> 6.1.3 DispatcherServletAutoConfiguration对应的自动配置类</h5><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code>name<span class="token operator">=</span>dispatcherServlet<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>DispatcherServletAutoConfiguration$DispatcherServletConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>dispatcherServletRegistration<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>DispatcherServletAutoConfiguration$DispatcherServletRegistrationConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_6-1-4-webmvcautoconfiguration对应的自动配置类" tabindex="-1"><a class="header-anchor" href="#_6-1-4-webmvcautoconfiguration对应的自动配置类" aria-hidden="true">#</a> 6.1.4 WebMvcAutoConfiguration对应的自动配置类</h5><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code>name<span class="token operator">=</span>requestMappingHandlerAdapter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>requestMappingHandlerMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>welcomePageHandlerMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>localeResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>themeResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>flashMapManager<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcConversionService<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcValidator<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcContentNegotiationManager<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcPatternParser<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcUrlPathHelper<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcPathMatcher<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>viewControllerHandlerMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>beanNameHandlerMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>routerFunctionMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>resourceHandlerMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcResourceUrlProvider<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>defaultServletHandlerMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>handlerFunctionAdapter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcUriComponentsContributor<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>httpRequestHandlerAdapter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>simpleControllerHandlerAdapter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>handlerExceptionResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcViewResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcHandlerMappingIntrospector<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>viewNameTranslator<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>defaultViewResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>viewResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>requestContextFilter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>formContentFilter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_6-1-5-errormvcautoconfiguration对应的自动配置类" tabindex="-1"><a class="header-anchor" href="#_6-1-5-errormvcautoconfiguration对应的自动配置类" aria-hidden="true">#</a> 6.1.5 ErrorMvcAutoConfiguration对应的自动配置类</h5><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code>name<span class="token operator">=</span>error<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>beanNameViewResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>conventionErrorViewResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration$DefaultErrorViewResolverConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>errorAttributes<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>basicErrorController<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>errorPageCustomizer<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>preserveErrorControllerTargetClassPostProcessor<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-2-servletwebserverfactoryautoconfiguration" tabindex="-1"><a class="header-anchor" href="#_6-2-servletwebserverfactoryautoconfiguration" aria-hidden="true">#</a> 6.2 ServletWebServerFactoryAutoConfiguration</h4><ul><li>提供 ServletWebServerFactory</li></ul><h4 id="_6-3-dispatcherservletautoconfiguration" tabindex="-1"><a class="header-anchor" href="#_6-3-dispatcherservletautoconfiguration" aria-hidden="true">#</a> 6.3 DispatcherServletAutoConfiguration</h4><ul><li>提供 DispatcherServlet</li><li>提供 DispatcherServletRegistrationBean</li></ul><h4 id="_6-4-webmvcautoconfiguration" tabindex="-1"><a class="header-anchor" href="#_6-4-webmvcautoconfiguration" aria-hidden="true">#</a> 6.4 WebMvcAutoConfiguration</h4><ul><li>配置 DispatcherServlet 的各项组件，提供的 bean 见过的有 <ul><li>多项 HandlerMapping</li><li>多项 HandlerAdapter</li><li>HandlerExceptionResolver</li></ul></li></ul><h4 id="_6-5-errormvcautoconfiguration" tabindex="-1"><a class="header-anchor" href="#_6-5-errormvcautoconfiguration" aria-hidden="true">#</a> 6.5 ErrorMvcAutoConfiguration</h4><ul><li>提供的 bean 有 BasicErrorController</li></ul><h4 id="_6-6-multipartautoconfiguration" tabindex="-1"><a class="header-anchor" href="#_6-6-multipartautoconfiguration" aria-hidden="true">#</a> 6.6 MultipartAutoConfiguration</h4><ul><li>它提供了 org.springframework.web.multipart.support.StandardServletMultipartResolver</li><li>该 bean 用来解析 multipart/form-data 格式的数据</li></ul><h4 id="_6-6-httpencodingautoconfiguration" tabindex="-1"><a class="header-anchor" href="#_6-6-httpencodingautoconfiguration" aria-hidden="true">#</a> 6.6 HttpEncodingAutoConfiguration</h4><ul><li>POST 请求参数如果有中文，无需特殊设置，这是因为 Spring Boot 已经配置了 org.springframework.boot.web.servlet.filter.OrderedCharacterEncodingFilter</li><li>对应配置 server.servlet.encoding.charset=UTF-8，默认就是 UTF-8</li><li>当然，它只影响非 json 格式的数据</li></ul><h3 id="_7-演示-自动配置类原理" tabindex="-1"><a class="header-anchor" href="#_7-演示-自动配置类原理" aria-hidden="true">#</a> 7 演示 - 自动配置类原理</h3><h4 id="_7-1-关键代码" tabindex="-1"><a class="header-anchor" href="#_7-1-关键代码" aria-hidden="true">#</a> 7.1 关键代码</h4><p>假设已有第三方的两个自动配置类</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span> <span class="token comment">// ⬅️第三方的配置类</span>
<span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfiguration1</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Bean1</span> <span class="token function">bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Configuration</span> <span class="token comment">// ⬅️第三方的配置类</span>
<span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfiguration2</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Bean2</span> <span class="token function">bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>提供一个配置文件 META-INF/spring.factories，key 为导入器类名，值为多个自动配置类名，用逗号分隔</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">MyImportSelector</span><span class="token punctuation">=</span><span class="token value attr-value">\
AutoConfiguration1,\
AutoConfiguration2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><em><strong>注意</strong></em></p><ul><li>上述配置文件中 MyImportSelector 与 AutoConfiguration1，AutoConfiguration2 为简洁均省略了包名，自己测试时请将包名根据情况补全</li></ul></blockquote><p>引入自动配置</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span> <span class="token comment">// ⬅️本项目的配置类</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">MyImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Config</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyImportSelector</span> <span class="token keyword">implements</span> <span class="token class-name">DeferredImportSelector</span> <span class="token punctuation">{</span>
    <span class="token comment">// ⬇️该方法从 META-INF/spring.factories 读取自动配置类名，返回的 String[] 即为要导入的配置类</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> importingClassMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SpringFactoriesLoader</span>
            <span class="token punctuation">.</span><span class="token function">loadFactoryNames</span><span class="token punctuation">(</span><span class="token class-name">MyImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-2-自动配置被springboot整合的完整的代码" tabindex="-1"><a class="header-anchor" href="#_7-2-自动配置被springboot整合的完整的代码" aria-hidden="true">#</a> 7.2 自动配置被SpringBoot整合的完整的代码</h4><h5 id="_7-2-1-meta-inf-spring-factories" tabindex="-1"><a class="header-anchor" href="#_7-2-1-meta-inf-spring-factories" aria-hidden="true">#</a> 7.2.1 META-INF/spring.factories</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
  com.itheima.boot.a41.auto.TestCustomAutoConfig.Business1AutoConfiguration,\
  com.itheima.boot.a41.auto.TestCustomAutoConfig.Business2AutoConfiguration
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_7-2-2-测试代码" tabindex="-1"><a class="header-anchor" href="#_7-2-2-测试代码" aria-hidden="true">#</a> 7.2.2 测试代码</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>auto</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">BeanUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">EnableAutoConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnMissingBean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>web<span class="token punctuation">.</span>embedded<span class="token punctuation">.</span>tomcat<span class="token punctuation">.</span></span><span class="token class-name">TomcatServletWebServerFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">AnnotationConfigServletWebServerApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span><span class="token class-name">SimpleCommandLinePropertySource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span><span class="token class-name">StandardEnvironment</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> TestCustomAutoConfig
 * <span class="token keyword">@description</span> 测试自定义的配置类是如何被SpringBoot程序进行管理的
 * <span class="token keyword">@since</span> 2022/12/16 17:10
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestCustomAutoConfig</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">AnnotationConfigServletWebServerApplicationContext</span> applicationContext
                <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigServletWebServerApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">StandardEnvironment</span> environment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandardEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        environment<span class="token punctuation">.</span><span class="token function">getPropertySources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleCommandLinePropertySource</span><span class="token punctuation">(</span>
                <span class="token string">&quot;--spring.datasource.url=jdbc:mysql://localhost:3306/test&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;--spring.datasource.username=root&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;--spring.datasource.password=123456&quot;</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">setEnvironment</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">Config</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BeanUtil</span><span class="token punctuation">.</span><span class="token function">printBeanNamesAndResourceDescriptionNotNull</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token comment">// @Import(MyImportSelector.class)</span>
    <span class="token comment">/* 
        在配置类上使用@EnableAutoConfiguration注解就能被SpringBoot程序所识别，
        SpringBoot程序就会去META-INF/spring.factories
        读取org.springframework.boot.autoconfigure.EnableAutoConfiguration开头的配置类
        并将这些配置类，及其里面配置的Bean全部由Spring进行管理
     */</span>
    <span class="token annotation punctuation">@EnableAutoConfiguration</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Config</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean1</span> <span class="token function">bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token string">&quot;Config&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">TomcatServletWebServerFactory</span> <span class="token function">tomcatServletWebServerFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TomcatServletWebServerFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Business1AutoConfiguration</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@ConditionalOnMissingBean</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean1</span> <span class="token function">bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token string">&quot;Business1AutoConfiguration&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Business2AutoConfiguration</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@ConditionalOnMissingBean</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean2</span> <span class="token function">bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token string">&quot;Business2AutoConfiguration&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean1</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Bean1, name=&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean2</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Bean2, name=&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_7-2-3-执行结果" tabindex="-1"><a class="header-anchor" href="#_7-2-3-执行结果" aria-hidden="true">#</a> 7.2.3 执行结果</h5><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code><span class="token punctuation">[</span>TRACE<span class="token punctuation">]</span> <span class="token number">17</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">48.298</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>a<span class="token punctuation">.</span>a<span class="token punctuation">.</span>a<span class="token punctuation">.</span>AnnotationAwareAspectJAutoProxyCreator <span class="token operator">-</span> Did <span class="token keyword">not</span> attempt to auto<span class="token operator">-</span>proxy infrastructure <span class="token keyword">class</span> <span class="token punctuation">[</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>interceptor<span class="token punctuation">.</span>BeanFactoryTransactionAttributeSourceAdvisor<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>TRACE<span class="token punctuation">]</span> <span class="token number">17</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">48.316</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>a<span class="token punctuation">.</span>a<span class="token punctuation">.</span>a<span class="token punctuation">.</span>AnnotationAwareAspectJAutoProxyCreator <span class="token operator">-</span> Did <span class="token keyword">not</span> attempt to auto<span class="token operator">-</span>proxy infrastructure <span class="token keyword">class</span> <span class="token punctuation">[</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>interceptor<span class="token punctuation">.</span>TransactionInterceptor<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO <span class="token punctuation">]</span> <span class="token number">17</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">48.545</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>b<span class="token punctuation">.</span>w<span class="token punctuation">.</span>e<span class="token punctuation">.</span>tomcat<span class="token punctuation">.</span>TomcatWebServer    <span class="token operator">-</span> Tomcat initialized <span class="token keyword">with</span> <span class="token function">port</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token number">8080</span> <span class="token punctuation">(</span>http<span class="token punctuation">)</span> 
十二月 <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">2022</span> <span class="token number">5</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">48</span> 下午 org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>coyote<span class="token punctuation">.</span>AbstractProtocol init
信息<span class="token punctuation">:</span> Initializing ProtocolHandler <span class="token punctuation">[</span><span class="token string">&quot;http-nio-8080&quot;</span><span class="token punctuation">]</span>
十二月 <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">2022</span> <span class="token number">5</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">48</span> 下午 org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>core<span class="token punctuation">.</span>StandardService startInternal
信息<span class="token punctuation">:</span> Starting service <span class="token punctuation">[</span>Tomcat<span class="token punctuation">]</span>
十二月 <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">2022</span> <span class="token number">5</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">48</span> 下午 org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>core<span class="token punctuation">.</span>StandardEngine startInternal
信息<span class="token punctuation">:</span> Starting Servlet engine<span class="token punctuation">:</span> <span class="token punctuation">[</span>Apache Tomcat<span class="token operator">/</span><span class="token number">9.0</span><span class="token punctuation">.</span><span class="token number">62</span><span class="token punctuation">]</span>
十二月 <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">2022</span> <span class="token number">5</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">48</span> 下午 org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>core<span class="token punctuation">.</span>ApplicationContext log
信息<span class="token punctuation">:</span> Initializing Spring embedded WebApplicationContext
<span class="token punctuation">[</span>INFO <span class="token punctuation">]</span> <span class="token number">17</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">48.715</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>b<span class="token punctuation">.</span>w<span class="token punctuation">.</span>s<span class="token punctuation">.</span>c<span class="token punctuation">.</span>ServletWebServerApplicationContext <span class="token operator">-</span> Root WebApplicationContext<span class="token punctuation">:</span> initialization completed in <span class="token number">1449</span> ms 
Bean1<span class="token punctuation">,</span> name<span class="token operator">=</span>Config
<span class="token punctuation">[</span>INFO <span class="token punctuation">]</span> <span class="token number">17</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">49.036</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a<span class="token punctuation">.</span>w<span class="token punctuation">.</span>s<span class="token punctuation">.</span>WelcomePageHandlerMapping <span class="token operator">-</span> Adding welcome page<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span><span class="token keyword">static</span><span class="token operator">/</span>index<span class="token punctuation">.</span>html<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO <span class="token punctuation">]</span> <span class="token number">17</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">49.089</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>a<span class="token punctuation">.</span>d<span class="token punctuation">.</span>s<span class="token punctuation">.</span>b<span class="token punctuation">.</span>a<span class="token punctuation">.</span>DruidDataSourceAutoConfigure <span class="token operator">-</span> Init DruidDataSource 
<span class="token punctuation">[</span>INFO <span class="token punctuation">]</span> <span class="token number">17</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">49.197</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>a<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span>DruidDataSource      <span class="token operator">-</span> <span class="token operator">{</span>dataSource<span class="token operator">-</span><span class="token number">1</span><span class="token operator">}</span> inited 
Bean2<span class="token punctuation">,</span> name<span class="token operator">=</span>Business2AutoConfiguration
十二月 <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">2022</span> <span class="token number">5</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">49</span> 下午 org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>coyote<span class="token punctuation">.</span>AbstractProtocol start
信息<span class="token punctuation">:</span> Starting ProtocolHandler <span class="token punctuation">[</span><span class="token string">&quot;http-nio-8080&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span>INFO <span class="token punctuation">]</span> <span class="token number">17</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">49.518</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>b<span class="token punctuation">.</span>w<span class="token punctuation">.</span>e<span class="token punctuation">.</span>tomcat<span class="token punctuation">.</span>TomcatWebServer    <span class="token operator">-</span> Tomcat started on <span class="token function">port</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token number">8080</span> <span class="token punctuation">(</span>http<span class="token punctuation">)</span> <span class="token keyword">with</span> <span class="token keyword">context</span> path &#39;&#39; 
<span class="token operator">=====================</span>print start<span class="token operator">=========================</span>
name<span class="token operator">=</span>bean1<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>auto<span class="token punctuation">.</span>TestCustomAutoConfig$Config
name<span class="token operator">=</span>tomcatServletWebServerFactory<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>auto<span class="token punctuation">.</span>TestCustomAutoConfig$Config
name<span class="token operator">=</span>messageSourceProperties<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span><span class="token keyword">context</span><span class="token operator">/</span>MessageSourceAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>messageSource<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span><span class="token keyword">context</span><span class="token operator">/</span>MessageSourceAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>propertySourcesPlaceholderConfigurer<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span><span class="token keyword">context</span><span class="token operator">/</span>PropertyPlaceholderAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>websocketServletWebServerCustomizer<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>websocket<span class="token operator">/</span>servlet<span class="token operator">/</span>WebSocketServletAutoConfiguration$TomcatWebSocketConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>servletWebServerFactoryCustomizer<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>ServletWebServerFactoryAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>tomcatServletWebServerFactoryCustomizer<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>ServletWebServerFactoryAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>dispatcherServlet<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>DispatcherServletAutoConfiguration$DispatcherServletConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>dispatcherServletRegistration<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>DispatcherServletAutoConfiguration$DispatcherServletRegistrationConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>taskExecutorBuilder<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span><span class="token keyword">task</span><span class="token operator">/</span>TaskExecutionAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>applicationTaskExecutor<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span><span class="token keyword">task</span><span class="token operator">/</span>TaskExecutionAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>error<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>beanNameViewResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>conventionErrorViewResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration$DefaultErrorViewResolverConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>errorAttributes<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>basicErrorController<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>errorPageCustomizer<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>preserveErrorControllerTargetClassPostProcessor<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>error<span class="token operator">/</span>ErrorMvcAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>requestMappingHandlerAdapter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>requestMappingHandlerMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>welcomePageHandlerMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>localeResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>themeResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>flashMapManager<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcConversionService<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcValidator<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcContentNegotiationManager<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcPatternParser<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcUrlPathHelper<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcPathMatcher<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>viewControllerHandlerMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>beanNameHandlerMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>routerFunctionMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>resourceHandlerMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcResourceUrlProvider<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>defaultServletHandlerMapping<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>handlerFunctionAdapter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcUriComponentsContributor<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>httpRequestHandlerAdapter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>simpleControllerHandlerAdapter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>handlerExceptionResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcViewResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mvcHandlerMappingIntrospector<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>viewNameTranslator<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$EnableWebMvcConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>defaultViewResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>viewResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>requestContextFilter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>formContentFilter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>WebMvcAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>dataSource<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>com<span class="token operator">/</span>alibaba<span class="token operator">/</span>druid<span class="token operator">/</span>spring<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>DruidDataSourceAutoConfigure<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>bean2<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>com<span class="token operator">/</span>itheima<span class="token operator">/</span>boot<span class="token operator">/</span>a41<span class="token operator">/</span>auto<span class="token operator">/</span>TestCustomAutoConfig$Business2AutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>hikariPoolDataSourceMetadataProvider<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>jdbc<span class="token operator">/</span>metadata<span class="token operator">/</span>DataSourcePoolMetadataProvidersConfiguration$HikariPoolDataSourceMetadataProviderConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>sqlSessionFactory<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>mybatis<span class="token operator">/</span>spring<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>MybatisAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>sqlSessionTemplate<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>mybatis<span class="token operator">/</span>spring<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>MybatisAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mbeanExporter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>jmx<span class="token operator">/</span>JmxAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>objectNamingStrategy<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>jmx<span class="token operator">/</span>JmxAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mbeanServer<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>jmx<span class="token operator">/</span>JmxAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>springApplicationAdminRegistrar<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>admin<span class="token operator">/</span>SpringApplicationAdminJmxAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>applicationAvailability<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>availability<span class="token operator">/</span>ApplicationAvailabilityAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>standardJacksonObjectMapperBuilderCustomizer<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>jackson<span class="token operator">/</span>JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>jacksonObjectMapperBuilder<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>jackson<span class="token operator">/</span>JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>parameterNamesModule<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>jackson<span class="token operator">/</span>JacksonAutoConfiguration$ParameterNamesModuleConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>jacksonObjectMapper<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>jackson<span class="token operator">/</span>JacksonAutoConfiguration$JacksonObjectMapperConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>jsonComponentModule<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>jackson<span class="token operator">/</span>JacksonAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>lifecycleProcessor<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span><span class="token keyword">context</span><span class="token operator">/</span>LifecycleAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>persistenceExceptionTranslationPostProcessor<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>dao<span class="token operator">/</span>PersistenceExceptionTranslationAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>freeMarkerConfigurer<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>freemarker<span class="token operator">/</span>FreeMarkerServletWebConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>freeMarkerConfiguration<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>freemarker<span class="token operator">/</span>FreeMarkerServletWebConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>freeMarkerViewResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>freemarker<span class="token operator">/</span>FreeMarkerServletWebConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>stringHttpMessageConverter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>http<span class="token operator">/</span>HttpMessageConvertersAutoConfiguration$StringHttpMessageConverterConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mappingJackson2XmlHttpMessageConverter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>http<span class="token operator">/</span>JacksonHttpMessageConvertersConfiguration$MappingJackson2XmlHttpMessageConverterConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mappingJackson2HttpMessageConverter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>http<span class="token operator">/</span>JacksonHttpMessageConvertersConfiguration$MappingJackson2HttpMessageConverterConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>messageConverters<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>http<span class="token operator">/</span>HttpMessageConvertersAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>jdbcTemplate<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>jdbc<span class="token operator">/</span>JdbcTemplateConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>namedParameterJdbcTemplate<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>jdbc<span class="token operator">/</span>NamedParameterJdbcTemplateConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>dataSourceScriptDatabaseInitializer<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>sql<span class="token operator">/</span>init<span class="token operator">/</span>DataSourceInitializationConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>scheduledBeanLazyInitializationExcludeFilter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span><span class="token keyword">task</span><span class="token operator">/</span>TaskSchedulingAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>taskSchedulerBuilder<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span><span class="token keyword">task</span><span class="token operator">/</span>TaskSchedulingAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>transactionManager<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>jdbc<span class="token operator">/</span>DataSourceTransactionManagerAutoConfiguration$JdbcTransactionManagerConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span><span class="token keyword">config</span><span class="token punctuation">.</span>internalTransactionAdvisor<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>transaction<span class="token operator">/</span>annotation<span class="token operator">/</span>ProxyTransactionManagementConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>transactionAttributeSource<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>transaction<span class="token operator">/</span>annotation<span class="token operator">/</span>ProxyTransactionManagementConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>transactionInterceptor<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>transaction<span class="token operator">/</span>annotation<span class="token operator">/</span>ProxyTransactionManagementConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span><span class="token keyword">config</span><span class="token punctuation">.</span>internalTransactionalEventListenerFactory<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>transaction<span class="token operator">/</span>annotation<span class="token operator">/</span>ProxyTransactionManagementConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>transactionTemplate<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>transaction<span class="token operator">/</span>TransactionAutoConfiguration$TransactionTemplateConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>platformTransactionManagerCustomizers<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>transaction<span class="token operator">/</span>TransactionAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>restTemplateBuilderConfigurer<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>client<span class="token operator">/</span>RestTemplateAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>restTemplateBuilder<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>client<span class="token operator">/</span>RestTemplateAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>tomcatWebServerFactoryCustomizer<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>embedded<span class="token operator">/</span>EmbeddedWebServerFactoryCustomizerAutoConfiguration$TomcatWebServerFactoryCustomizerConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>characterEncodingFilter<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>HttpEncodingAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>localeCharsetMappingsCustomizer<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>HttpEncodingAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>multipartConfigElement<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>MultipartAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>multipartResolver<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>org<span class="token operator">/</span>springframework<span class="token operator">/</span>boot<span class="token operator">/</span>autoconfigure<span class="token operator">/</span>web<span class="token operator">/</span>servlet<span class="token operator">/</span>MultipartAutoConfiguration<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mapper1<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> file <span class="token punctuation">[</span>C<span class="token punctuation">:</span>\DISH\JavaCode\java\gitee\liuyangfang\java<span class="token operator">-</span>face\spring<span class="token operator">-</span>demo\target\classes\com\itheima\boot\a41\auto\mapper\Mapper1<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
name<span class="token operator">=</span>mapper2<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> file <span class="token punctuation">[</span>C<span class="token punctuation">:</span>\DISH\JavaCode\java\gitee\liuyangfang\java<span class="token operator">-</span>face\spring<span class="token operator">-</span>demo\target\classes\com\itheima\boot\a41\auto\mapper\Mapper2<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
<span class="token operator">=====================</span>print <span class="token keyword">end</span><span class="token operator">===========================</span>
十二月 <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">2022</span> <span class="token number">5</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">49</span> 下午 org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>coyote<span class="token punctuation">.</span>AbstractProtocol pause
信息<span class="token punctuation">:</span> Pausing ProtocolHandler <span class="token punctuation">[</span><span class="token string">&quot;http-nio-8080&quot;</span><span class="token punctuation">]</span>
十二月 <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">2022</span> <span class="token number">5</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">49</span> 下午 org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>core<span class="token punctuation">.</span>StandardService stopInternal
信息<span class="token punctuation">:</span> Stopping service <span class="token punctuation">[</span>Tomcat<span class="token punctuation">]</span>
十二月 <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">2022</span> <span class="token number">5</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">49</span> 下午 org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>coyote<span class="token punctuation">.</span>AbstractProtocol stop
信息<span class="token punctuation">:</span> Stopping ProtocolHandler <span class="token punctuation">[</span><span class="token string">&quot;http-nio-8080&quot;</span><span class="token punctuation">]</span>
十二月 <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">2022</span> <span class="token number">5</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">49</span> 下午 org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>coyote<span class="token punctuation">.</span>AbstractProtocol destroy
信息<span class="token punctuation">:</span> Destroying ProtocolHandler <span class="token punctuation">[</span><span class="token string">&quot;http-nio-8080&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span>INFO <span class="token punctuation">]</span> <span class="token number">17</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">49.755</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>a<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span>DruidDataSource      <span class="token operator">-</span> <span class="token operator">{</span>dataSource<span class="token operator">-</span><span class="token number">1</span><span class="token operator">}</span> closing <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
<span class="token punctuation">[</span>INFO <span class="token punctuation">]</span> <span class="token number">17</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">49.756</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>a<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span>DruidDataSource      <span class="token operator">-</span> <span class="token operator">{</span>dataSource<span class="token operator">-</span><span class="token number">1</span><span class="token operator">}</span> closed 

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-2-收获💡" tabindex="-1"><a class="header-anchor" href="#_7-2-收获💡" aria-hidden="true">#</a> 7.2 收获💡</h4><ol><li>自动配置类本质上就是一个配置类而已，只是用 META-INF/spring.factories 管理，与应用配置类解耦</li><li>@Enable 打头的注解本质是利用了 @Import</li><li>@Import 配合 DeferredImportSelector 即可实现导入，selectImports 方法的返回值即为要导入的配置类名</li><li>DeferredImportSelector 的导入会在最后执行，为的是让其它配置优先解析</li></ol><h2 id="_42-条件装配底层" tabindex="-1"><a class="header-anchor" href="#_42-条件装配底层" aria-hidden="true">#</a> 42 条件装配底层</h2><h3 id="_1-测试代码1" tabindex="-1"><a class="header-anchor" href="#_1-测试代码1" aria-hidden="true">#</a> 1 测试代码1</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>conditional</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">BeanUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">GenericApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">AnnotatedTypeMetadata</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">AnnotationMetadata</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ClassUtils</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> TestConditionConfig1
 * <span class="token keyword">@description</span> 测试条件装配
 * <span class="token keyword">@since</span> 2022/12/16 17:44
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestConditionConfig1</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">GenericApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AnnotationConfigUtils</span><span class="token punctuation">.</span><span class="token function">registerAnnotationConfigProcessors</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">.</span><span class="token function">getDefaultListableBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">registerBean</span><span class="token punctuation">(</span><span class="token string">&quot;config&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Config</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">BeanUtil</span><span class="token punctuation">.</span><span class="token function">printBeanNamesAndResourceDescriptionNotNull</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">MyImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Config</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token annotation punctuation">@Conditional</span><span class="token punctuation">(</span><span class="token class-name">ClassConditional1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfiguration1</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean1</span> <span class="token function">bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token string">&quot;AutoConfiguration1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token annotation punctuation">@Conditional</span><span class="token punctuation">(</span><span class="token class-name">ClassConditional2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfiguration2</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean2</span> <span class="token function">bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token string">&quot;AutoConfiguration2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyImportSelector</span> <span class="token keyword">implements</span> <span class="token class-name">DeferredImportSelector</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> importingClassMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
                    <span class="token class-name">AutoConfiguration1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token class-name">AutoConfiguration2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean1</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;name=&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean2</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;name=&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ClassConditional1</span> <span class="token keyword">implements</span> <span class="token class-name">Condition</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">matches</span><span class="token punctuation">(</span><span class="token class-name">ConditionContext</span> context<span class="token punctuation">,</span> <span class="token class-name">AnnotatedTypeMetadata</span> metadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// ⬇️如果存在 Druid 依赖，条件成立</span>
            <span class="token keyword">return</span> <span class="token class-name">ClassUtils</span><span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ClassConditional2</span> <span class="token keyword">implements</span> <span class="token class-name">Condition</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">matches</span><span class="token punctuation">(</span><span class="token class-name">ConditionContext</span> context<span class="token punctuation">,</span> <span class="token class-name">AnnotatedTypeMetadata</span> metadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// ⬇️如果存在 Druid 依赖，条件成立</span>
            <span class="token keyword">return</span> <span class="token operator">!</span><span class="token class-name">ClassUtils</span><span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-1-结果" tabindex="-1"><a class="header-anchor" href="#_1-1-结果" aria-hidden="true">#</a> 1.1 结果</h4><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code>name<span class="token operator">=</span>AutoConfiguration1
<span class="token operator">=====================</span>print start<span class="token operator">=========================</span>
name<span class="token operator">=</span>bean1<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>com<span class="token operator">/</span>itheima<span class="token operator">/</span>boot<span class="token operator">/</span>a41<span class="token operator">/</span>conditional<span class="token operator">/</span>TestConditionConfig1$AutoConfiguration1<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
<span class="token operator">=====================</span>print <span class="token keyword">end</span><span class="token operator">===========================</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-测试代码2" tabindex="-1"><a class="header-anchor" href="#_2-测试代码2" aria-hidden="true">#</a> 2 测试代码2</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>a41<span class="token punctuation">.</span>conditional</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">BeanUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">GenericApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">AnnotatedTypeMetadata</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">AnnotationMetadata</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ClassUtils</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ElementType</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Retention</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RetentionPolicy</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Target</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> lyf
 * <span class="token keyword">@version</span> 1.0
 * <span class="token keyword">@classname</span> TestConditionConfig2
 * <span class="token keyword">@description</span> 测试条件装配
 * <span class="token keyword">@since</span> 2022/12/16 17:44
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestConditionConfig2</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">GenericApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AnnotationConfigUtils</span><span class="token punctuation">.</span><span class="token function">registerAnnotationConfigProcessors</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">.</span><span class="token function">getDefaultListableBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">registerBean</span><span class="token punctuation">(</span><span class="token string">&quot;config&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Config</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">BeanUtil</span><span class="token punctuation">.</span><span class="token function">printBeanNamesAndResourceDescriptionNotNull</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">MyImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Config</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span>exists <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> className <span class="token operator">=</span> <span class="token string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfiguration1</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean1</span> <span class="token function">bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token string">&quot;AutoConfiguration1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span>className <span class="token operator">=</span> <span class="token string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfiguration2</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token keyword">public</span> <span class="token class-name">Bean2</span> <span class="token function">bean2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token string">&quot;AutoConfiguration2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyImportSelector</span> <span class="token keyword">implements</span> <span class="token class-name">DeferredImportSelector</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> importingClassMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
                    <span class="token class-name">AutoConfiguration1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token class-name">AutoConfiguration2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean1</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;name=&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean2</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;name=&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">,</span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Conditional</span><span class="token punctuation">(</span><span class="token class-name">ClassConditional</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@interface</span> <span class="token class-name">ConditionalOnClass</span> <span class="token punctuation">{</span>
        <span class="token doc-comment comment">/**
         * 判断类是否需要判断存在
         *
         * <span class="token keyword">@return</span> true 表示需要判断存在，false表示判断不存在
         */</span>
        <span class="token keyword">boolean</span> <span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

        <span class="token doc-comment comment">/**
         * 需要判断的类名
         *
         * <span class="token keyword">@return</span> 需要判断的类名
         */</span>
        <span class="token class-name">String</span> <span class="token function">className</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ClassConditional</span> <span class="token keyword">implements</span> <span class="token class-name">Condition</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">matches</span><span class="token punctuation">(</span><span class="token class-name">ConditionContext</span> context<span class="token punctuation">,</span> <span class="token class-name">AnnotatedTypeMetadata</span> metadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> attributes <span class="token operator">=</span> metadata<span class="token punctuation">.</span><span class="token function">getAnnotationAttributes</span><span class="token punctuation">(</span><span class="token class-name">ConditionalOnClass</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>attributes <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> attributes<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token class-name">String</span> className <span class="token operator">=</span> attributes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;className&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">boolean</span> exists <span class="token operator">=</span> <span class="token class-name">Boolean</span><span class="token punctuation">.</span><span class="token function">parseBoolean</span><span class="token punctuation">(</span>attributes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;exists&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> exists <span class="token operator">==</span> <span class="token class-name">ClassUtils</span><span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span>className<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-1-结果" tabindex="-1"><a class="header-anchor" href="#_2-1-结果" aria-hidden="true">#</a> 2.1 结果</h4><div class="language-verilog line-numbers-mode" data-ext="verilog"><pre class="language-verilog"><code>name<span class="token operator">=</span>AutoConfiguration1
<span class="token operator">=====================</span>print start<span class="token operator">=========================</span>
name<span class="token operator">=</span>bean1<span class="token punctuation">,</span> 来源<span class="token punctuation">:</span> <span class="token keyword">class</span> path resource <span class="token punctuation">[</span>com<span class="token operator">/</span>itheima<span class="token operator">/</span>boot<span class="token operator">/</span>a41<span class="token operator">/</span>conditional<span class="token operator">/</span>TestConditionConfig2$AutoConfiguration1<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">]</span>
<span class="token operator">=====================</span>print <span class="token keyword">end</span><span class="token operator">===========================</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-总结" tabindex="-1"><a class="header-anchor" href="#_3-总结" aria-hidden="true">#</a> 3 总结</h3><p>条件装配的底层是本质上是 @Conditional 与 Condition，这两个注解。引入自动配置类时，期望满足一定条件才能被 Spring 管理，不满足则不管理，怎么做呢？</p><p>比如条件是【类路径下必须有 dataSource】这个 bean ，怎么做呢？</p><p>首先编写条件判断类，它实现 Condition 接口，编写条件判断逻辑</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyCondition1</span> <span class="token keyword">implements</span> <span class="token class-name">Condition</span> <span class="token punctuation">{</span> 
    <span class="token comment">// ⬇️如果存在 Druid 依赖，条件成立</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">matches</span><span class="token punctuation">(</span><span class="token class-name">ConditionContext</span> context<span class="token punctuation">,</span> <span class="token class-name">AnnotatedTypeMetadata</span> metadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">ClassUtils</span><span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其次，在要导入的自动配置类上添加 <code>@Conditional(MyCondition1.class)</code>，将来此类被导入时就会做条件检查</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span> <span class="token comment">// 第三方的配置类</span>
<span class="token annotation punctuation">@Conditional</span><span class="token punctuation">(</span><span class="token class-name">MyCondition1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">// ⬅️加入条件</span>
<span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfiguration1</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Bean1</span> <span class="token function">bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>分别测试加入和去除 druid 依赖，观察 bean1 是否存在于容器</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-收获💡" tabindex="-1"><a class="header-anchor" href="#_4-收获💡" aria-hidden="true">#</a> 4 收获💡</h3><ol><li>学习一种特殊的 if - else</li></ol></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/lyf110/lyf110.github.io/edit/main/docs/notes/ssm/spring/spring49/04_Spring高级49讲-SpringBoot相关.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在 GitHub 上编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: 1102970594@qq.com">lyf110</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><a href="/notes/ssm/spring/spring49/03_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-WEB.html" class="nav-link prev" aria-label="三、Spring高级49讲-WEB相关"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->三、Spring高级49讲-WEB相关</div></a><a href="/notes/ssm/spring/spring49/05_Spring%E9%AB%98%E7%BA%A749%E8%AE%B2-%E5%85%B6%E5%AE%83.html" class="nav-link next" aria-label="五、Spring高级49讲-其它部分"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">五、Spring高级49讲-其它部分<!----></div></a></nav><div class="giscus-wrapper input-top" id="comment" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">主题 <a href="https://theme-hope.vuejs.press/zh/">vuepress-theme-hope</a> | Apache License 2.0 Licensed</div><div class="copyright">Copyright © 2023-present liu yang fang</div></footer></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-ce1c9f9d.js" defer></script>
  </body>
</html>
